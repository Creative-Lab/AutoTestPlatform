<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="JCart-IntegrationTests" resourceRoot="${projectDir}" soapui-version="5.2.1" abortOnError="false" runType="SEQUENTIAL" activeEnvironment="Default" defaultScriptLanguage="Groovy" id="7e4f70dc-b039-45bb-b68f-ed812bedc9fb" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="true"/>
  <con:entry key="Enable UI" value="true"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="IntegrationTest"/>
  <con:entry key="Print Report" value="true"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.support.SecurityTestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="TestSuite 1"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="SecurityTest" value="&lt;all>"/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="SecurityTestRunner Path" value=""/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.ProTestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Report to Generate" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting><con:setting id="ProjectSettings@shadowPassword"/><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting></con:settings><con:interface xsi:type="con:RestService" id="e757382f-d6e8-40cc-87fc-11e3f2a84701" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobApi_INIT" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint></con:endpoints><con:resource name="initapi" path="/mobapi/main/initapi/" id="20162230-23a2-405a-abb6-3c991a6fbfc4"><con:settings/><con:parameters/><con:method name="Method 1" id="9ff554a8-43f2-4902-8715-532a64bb228d" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://integration1.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:credentials><con:username>rocket</con:username><con:password>Q67gING87DEFT</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobAPi_Login" type="rest" id="4ab42c27-8f0b-4897-99c4-9f9acbc999ae" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="MobApi_Login" path="/mobapi/customer/login" id="ca598ac1-1601-41be-a853-f867ecfab9ff"><con:settings/><con:parameters><con:parameter><con:name>LoginForm[email]</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>LoginForm[password]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="MobApi_Login" method="POST" id="ece54faf-108d-4d64-88bd-176763f3452c"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://alice14.jabong.in/mobapi/customer/login">log:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="b91d3b3f-0644-466e-b747-dcf76f8977ef"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value=""/>
  <con:entry key="X-USER-DEVICE-TYPE" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>LoginForm[email]</con:entry><con:entry>LoginForm[password]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobApi_redeemJC" type="rest" id="e249f4ff-a97d-4977-a231-ee792b9fc085" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Redeemjabongcredits" path="/mobapi/checkout/redeemjabongcredits" id="9b3f0108-78c1-4ad2-b077-3eca71f3bdee"><con:settings/><con:parameters><con:parameter><con:name>storecredit</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Redeemjabongcredits" method="GET" id="bcb12bd7-c920-4e67-a96d-c941fd79e2a0"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:red="http://alice14.jabong.in/mobapi/checkout/redeemjabongcredits">red:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:red="http://supermarket.jabongfashion.com/mobapi/checkout/redeemjabongcredits">red:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="2aee9869-25c2-4906-a2de-8ead4eccd02c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.6"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/wsoa.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://integration1.jabongfashion.com/mobapi/checkout/redeemjabongcredits</con:originalUri><con:credentials><con:username>rocket</con:username><con:password>Q67gING87DEFT</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="storecredit" value="0"/>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
</con:parameters><con:parameterOrder><con:entry>storecredit</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobApi_paymentmode" type="rest" id="c1872737-d708-470c-8826-538c1e9e799f" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Codcharges" path="/mobapi/checkout/codcharges" id="0ce3e7cf-ab60-4da3-be0f-d2c4b9c17ac8"><con:settings/><con:parameters><con:parameter><con:name>payment_method</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Codcharges" method="GET" id="1c859a67-28c5-4b04-83d3-47dbf52e7eb3"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cod="http://alice14.jabong.in/mobapi/checkout/codcharges">cod:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:cod="http://mobapi-preprod.jabongfashion.com/mobapi/checkout/codcharges">cod:Fault</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="b592c66e-4ef4-452b-880d-8aefd178dbbf"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value=""/>
  <con:entry key="X-USER-DEVICE-TYPE" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>payment_method</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobApi_payWithCOD" type="rest" id="9def0cec-5e3d-46f9-8bad-24a48ad328d1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Cod" path="/mobapi/checkout/cod" id="fe080b52-63fa-40b6-b0dc-6a153a241d96"><con:settings/><con:parameters><con:parameter><con:name>PaymentMethodForm[payment_method]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Cod" method="GET" id="a3a3d34f-24cf-46df-a84f-075fb93e1aa4"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cod="http://alice14.jabong.in/mobapi/checkout/cod">cod:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:cod="http://integration1.jabongfashion.com/mobapi/checkout/cod/">cod:Fault</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="beb8564a-7842-42e9-b532-4cdd4b82be47"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://integration1.jabongfashion.com/mobapi/checkout/cod/</con:originalUri><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
  <con:entry key="PaymentMethodForm[payment_method]" value="cod"/>
</con:parameters><con:parameterOrder><con:entry>PaymentMethodForm[payment_method]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="CartToReviewPage" type="rest" id="06e3d3e8-14f2-41c1-bd45-0dfd68eb81cc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="CartToReviewOrder" path="/mobapi/checkout/orderSummary" id="58dc6cc4-4703-4433-bf39-161f61b23306"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="CartToReviewOrder" method="GET" id="12314079-e811-4400-ad2d-942a39030287"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:car="http://alice14.jabong.in/mobapi/checkout/cartToReviewOrder">car:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:car="http://alice14.jabong.in/mobapi/checkout/cartToReviewOrder">car:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="8eaef57b-8ab5-428a-b56f-5ac132e3b2f1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-TYPE" value=""/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:credentials><con:username>rocket</con:username><con:password>Q67gING87DEFT</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="CART" type="rest" definitionUrl="htpp://" basePath="/mobapi/cart" id="59b532b7-e89b-4d31-9739-6d4a8c9cee67" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="addItemToCart" path="add" id="cdd9ee76-7952-4286-a6c5-bb4030d04fad"><con:settings/><con:parameters><con:parameter><con:name>p</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>sku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>quantity</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="23b9709a-e4b9-4a96-8b00-4b204d6df29f"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="6b4d1e1f-f98c-4051-8052-6b89981114cd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#API_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#DeviceType}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#API_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>p</con:entry><con:entry>sku</con:entry><con:entry>quantity</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="changecart" path="changecart" id="3f69fefe-3b91-495e-831b-a59070a66b3f"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="5e467c97-4a86-4cdd-a9ef-ee9e2652d3fd"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/x-www-form-urlencoded" postQueryString="false" id="2a3a983e-eb42-4506-8126-105e2663f518"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.4"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://mobapi.jabong.com</con:endpoint><con:request>qty_GI530JW78OOJINDFAS-452523_nonbundled1=4&amp;</con:request><con:originalUri>http://mobapi.jabong.com/mobapi/cart/changecart</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="4hn6fln287uf1lu2agoa1sl2j0" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="cartData" path="cartData" id="ca70204f-e395-4691-b22a-6d5b6472e30b"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="4ec18aeb-ac63-4fa2-9296-554f525ecd44"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="15cfbbdc-3347-47c3-a2b5-57ac75eef23f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="remove" path="remove" id="b05a8ff8-adab-4f72-8b2c-efe05f634942"><con:settings/><con:parameters><con:parameter><con:name>sku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="fd98e856-5c11-429e-ab44-23b9d82424f8"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="036d64e5-99fc-41fd-8a66-9cf3b972a229"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://mobapi.jabong.com</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/cart/remove</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="944v6gfso7mi96kp9jk5qg7f77"/>
  <con:entry key="sku" value="HA585WA64DRVINDFAS-2320584"/>
</con:parameters><con:parameterOrder><con:entry>sku</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCartAddLook" type="rest" id="b01bebee-f494-4317-8c06-8f7b81533b7b" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Look" path="/{version}/cart/look" id="547a4e2a-283b-4554-b92a-318f0d65445f"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Look" method="POST" id="0c4b95fa-4b0d-4b9b-9714-b0c198adf9b3"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>503</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:look="http://jcart-integration1.jabongfashion.com/v1/cart/look/">look:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>406 400</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/plain; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="f02f9455-e841-4d9c-ac49-e926974ea061"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "PrimarySku": "${#TestCase#Primary_sku}",
  "SimpleSkus": [
    "${#TestCase#secondary_sku_simple}"
  ]
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart/look/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCartRemove" type="rest" id="fa666bd7-4f9c-49fc-b4d2-10c7a10aed8a" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="RemovefromCart" path="/v1/cart/{SimpleSku}" id="5e3229a6-89d0-492c-b29d-0611d4156629"><con:settings/><con:parameters><con:parameter><con:name>SimpleSku</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="RemovefromCart" method="DELETE" id="7ecbe3e7-c0e6-4de6-8764-9a19ab07374d"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cart="http://jcart-integration1.jabongfashion.com/v1/cart">cart:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>406</con:status><con:params/></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="cfc67af9-2fae-4f16-8711-ccb5c1812ace"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="SimpleSku" value="${#TestCase#Product_Sku_Simple_To_Remove}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCARTItemsListing" type="rest" id="d0b65223-4e3b-4194-967d-02cf06cf3bd9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Cart" path="/v1/cart" id="08223f54-2193-49ae-abda-b2e1b1c3e536"><con:settings/><con:parameters/><con:method name="Method 1" method="GET" id="34a6424b-5495-4132-bdf7-9b25517bad64"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cart="http://jcart-integration1.jabongfashion.com/v1/cart">cart:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="f6bdb86e-7d18-4c1b-9455-5051a65c965c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Giftwrap" type="rest" id="87f5158a-70a1-4fd2-a628-cf2fbda7d642" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Giftwrap" path="/v1/giftwrap" id="5f990132-dfe4-496f-bdce-5f2e48550656"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value>version</con:value><con:style>TEMPLATE</con:style><con:default>version</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Giftwrap" method="POST" id="638c5686-2f90-4a35-9cf9-6ac7fb86a3bc"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:gif="http://jcart-integration1.jabongfashion.com/v1/giftwrap">gif:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:gif="http://jcart-integration1.jabongfashion.com/v1/giftwrap">gif:Fault</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="7140e7af-55dc-4435-bd84-389bac371919"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Message": "${#TestCase#Message}",
  "Occasion": "${#TestCase#Occasion}",
  "Recipient": "${#TestCase#Recipient}",
  "Sender": "${#TestCase#Sender}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="deletegiftwrap" path="/{version}/giftwrap" id="1f392640-5102-4838-8cb7-033419185cdb"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value>version</con:value><con:style>TEMPLATE</con:style><con:default>version</con:default></con:parameter></con:parameters><con:method name="Method 1" method="DELETE" id="74444240-4d25-4ee6-952c-6d3af70f7330"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:gif="http://jcart-integration1.jabongfashion.com/v1/giftwrap">gif:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="bd377f28-b8b4-4241-87b6-83a4ce65bac6"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Add to cart from wishlist" type="rest" id="34aa5d3d-ef0f-4530-88fd-b714b7fce0de" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Add to Cart" path="/v1/cart" id="e8943072-899f-4a93-817d-573130a064b5"><con:settings/><con:parameters/><con:method name="Method 1" method="POST" id="6d32f63f-4239-4304-9570-4a503c36134a"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cart="http://jcart-integration1.jabongfashion.com/v1/cart">cart:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="231ac3c0-9d70-45fe-bbe8-b13eeaf74981"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="${#Project#user_id}"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": true,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCartAdd" type="rest" definitionUrl="JCartAdd" id="660b0069-a196-417f-9465-8ce54d537208" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="AddToCart" path="/{version}/cart" id="dbddc0db-c59b-46ef-a846-d2a443230576"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value>version</con:value><con:style>TEMPLATE</con:style><con:default>version</con:default></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="f1deafcf-7f00-406a-8117-671aac86253c"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="af1531a1-8d73-467e-962e-c925c024f023"><con:settings/><con:endpoint/><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCartUpdate" type="rest" definitionUrl="JCartUpdate" id="8efe13db-651d-48d1-9cd6-c0d9eb66c127" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="Update in Cart" path="/{version}/cart" id="d0566f2e-cc77-4578-8ec9-2c8df722ffc0"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" method="PUT" id="dbf0b62f-7550-4b57-aad0-793bb4dd98fc"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="be1d9160-ad92-4614-b1a9-0c11f10681fb"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCartVoucher" type="rest" definitionUrl="JCartVoucher" id="7deae76f-96cf-4034-b34d-e7b1b09adf82" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="ApplyVoucher" path="/v1/voucher" id="5eb76c04-da98-4707-bd43-c09f1c97c10b"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="98a65859-dfe0-470a-bcca-89db9bbc0600"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="f660e82f-d95a-4193-9ded-d795d265666e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "${#TestCase#couponcode}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="RemoveVoucher" path="/{version}/voucher/{CouponCode}" id="89460aef-0771-4d2b-9953-07e54e810a87"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>CouponCode</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="DELETE" id="d6d24e61-47cc-4109-91e6-598bd87c4f7a"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="a5bacf3a-4835-4bdc-a21b-7e7ea554a808"><con:settings/><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="CouponCode" value="CouponCode" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry><con:entry>CouponCode</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JabongUsersAPIs" type="rest" basePath="/mobapi/customer" id="62c27339-1a46-409d-b023-836f8549129d" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint></con:endpoints><con:resource name="Userlogin" path="/login" id="e0e3d69b-4adb-407f-b95c-760aa1a74399"><con:settings/><con:parameters><con:parameter><con:name>LoginForm[email]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>LoginForm[password]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="5856054f-c03b-4358-ae77-3c373395e724"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://mobapi.jabong.com/mobapi/customer/login">log:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="d2c8acc1-7974-4bf2-80dc-d29ed6789cde"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/login</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="5qfgfpuqn9lio48iu8v60snri2"/>
  <con:entry key="LoginForm[password]" value="testtest"/>
  <con:entry key="LoginForm[email]" value="as674793on@mailinator.com"/>
</con:parameters><con:parameterOrder><con:entry>LoginForm[email]</con:entry><con:entry>LoginForm[password]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="Userlogout" path="/logout" id="fb206433-045a-42b9-bc0a-e522701c7b2e"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="6ea7db41-82d9-419f-890a-12089287fd6c"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://mobapi.jabong.com/mobapi/customer/logout">log:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="11796264-92aa-4732-900b-dd6ad5a6a629"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/logout</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="rjfrin7fmbcr0oggi6r13t2fb3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="NewUserRegistration" path="/create" id="b70d53b7-b711-4226-a962-3c145e987fc0"><con:settings/><con:parameters><con:parameter><con:name>RegistrationForm[email]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[first_name]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[last_name]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[password]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[gender]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[phone]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>RegistrationForm[is_newsletter_subscribed]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="60c16b08-68bb-460f-b7f1-721ae97bcdb4"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:cre="http://mobapi.jabong.com/mobapi/customer/create">cre:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cre="http://mobapi.jabong.com/mobapi/customer/create">cre:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="da7b9772-b4ba-45e6-8b28-a422942834d0"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/create</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="RegistrationForm[is_newsletter_subscribed]" value="0"/>
  <con:entry key="RegistrationForm[first_name]" value="Assert"/>
  <con:entry key="RegistrationForm[gender]" value="male"/>
  <con:entry key="RegistrationForm[email]" value="as674793on@mailinator.com"/>
  <con:entry key="RegistrationForm[phone]" value="7236984564"/>
  <con:entry key="RegistrationForm[last_name]" value="Test"/>
  <con:entry key="RegistrationForm[password]" value="testtest"/>
</con:parameters><con:parameterOrder><con:entry>RegistrationForm[email]</con:entry><con:entry>RegistrationForm[first_name]</con:entry><con:entry>RegistrationForm[last_name]</con:entry><con:entry>RegistrationForm[password]</con:entry><con:entry>RegistrationForm[gender]</con:entry><con:entry>RegistrationForm[phone]</con:entry><con:entry>RegistrationForm[is_newsletter_subscribed]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserForgotpassword" path="/forgotpassword" id="21db694e-d078-4f6c-ac91-5c5248bbb7fd"><con:settings/><con:parameters><con:parameter><con:name>email</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="98b7e9aa-3ddf-4b88-9c33-7c1c6e4b9af7"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:for="http://mobapi.jabong.com/mobapi/customer/forgotpassword">for:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="8729a1dc-9eed-42a8-8923-e26fdac42e89"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/forgotpassword</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="email" value="jabongtest.automation@gmail.com" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>email</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserDetails" path="/getdetails" id="0c3987e7-22cb-410f-b8c6-65c6ee9d0a24"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="6aa36c67-eb35-456b-ba37-2adf3060ff95"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getdetails">get:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getdetails">get:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>401</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="ea7dda3e-6b8d-41c1-893c-625157b8b86e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/getdetails</con:originalUri><con:credentials><con:username>rocket</con:username><con:password>Q67gING87DEFT</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="j8f94n4ekf7u0ri16k9ujthtv5" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserAutologin" path="/autologin" id="a783a44a-2981-4ee0-9f48-0ed4801ed621"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="3888dc8c-71f6-47bc-a679-fd25667078c1"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:aut="http://mobapi.jabong.com/mobapi/customer/autologin">aut:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="238b326b-e3cd-4e45-a815-e6c5ebdb27c4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/autologin</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="rjfrin7fmbcr0oggi6r13t2fb3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserAddShortlistSearchSuggestions" path="/addshortlist" id="3a4d38d4-5425-435d-9824-ed37caf38967"><con:settings/><con:parameters><con:parameter><con:name>sku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>simpleSku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="01f3cae6-ed46-4968-9ae0-19dcded3f86b"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:add="http://mobapi.jabong.com/mobapi/customer/addtoshortlist">add:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="0e07ed8d-36ea-4f4c-8b1c-7c01c2cc4e7d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/addtoshortlist</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="f8k1akmhas7tdfc56ftvkbuj73"/>
  <con:entry key="simpleSku" value="true"/>
  <con:entry key="sku" value="AM770HO93NTUINDFAS"/>
</con:parameters><con:parameterOrder><con:entry>sku</con:entry><con:entry>simpleSku</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserShortlistProduct" path="/getshortlist" id="34cc52ef-a5f1-41d5-afb3-21fcab302d0b"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="85694979-9521-43ee-a467-5e51ebcf342a"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getshortlist">get:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="9d100ed1-9132-4292-978e-538aab0f1506"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/getshortlist</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="0e9j8e392jmdtess5s0vgm8ak6" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserRemoveShortlistProduct" path="/removeshortlist" id="1efed326-504a-4a37-ad33-49a72c3a6d51"><con:settings/><con:parameters><con:parameter><con:name>erase-sku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="92615fc1-5376-4c58-98ce-f031df285c8b"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="23a29891-c235-48d2-a415-b0a37cb510cc"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>erase-sku</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserRemoveAllShortlistProduct" path="/deleteallshortlist" id="d7c16b40-55cf-4b4c-9eee-93df554a2595"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="a6b257e4-b85e-45d7-bcdf-dbbeb53b1772"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:del="http://mobapi.jabong.com/mobapi/customer/deleteallshortlist">del:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="057899dd-1f44-438f-bacc-ca1a62a73502"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/deleteallshortlist</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="0e9j8e392jmdtess5s0vgm8ak6" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserSyncShortlistWithSavedItems" path="/syncshortlist" id="c3049ac2-51c9-4d68-b74f-09d50b9a3812"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>wishlist</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="e042c283-6910-4d63-9cde-d9d654ebb9e1"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:syn="http://mobapi.jabong.com/mobapi/customer/syncshortlist">syn:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="8b54f064-ecd1-490c-8d07-2cc8bd2599a2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>session[id]</con:entry><con:entry>wishlist</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="UserGetVoucherList" path="/getvoucherlist" id="ae5d9d5c-aa51-44af-b361-0bbe8d5986c3"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="d3cfd383-578f-4f0d-832f-835e5faab3dd"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getvoucherlist">get:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="56ec39e5-115f-4838-bcac-f2b3b453db14"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/getvoucherlist</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="f4ruhsfv53bioptmkh55cd0040" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="find" path="find" id="d0a9d115-7844-45a4-a1c0-ca43e843e795"><con:settings/><con:parameters/><con:method name="Method 1" method="GET" id="862095c4-6795-4445-9664-6058d32a9be4"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="2e0c9283-dc01-459b-bbae-90ed9b44f618"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="ProductSavedForLater" path="isitemincart/" id="7e30ecdb-8c4d-478e-8d39-5439fe32ca09"><con:settings/><con:parameters><con:parameter><con:name>sku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>simpleSku</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="dfff4018-e963-4ae0-aaf9-fe3d0e1d209c"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:isit="http://mobapi.jabong.com/mobapi/customer/isitemincart/">isit:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="d94811a3-decb-42e7-aca6-74b307b577af"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/isitemincart/</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="f8k1akmhas7tdfc56ftvkbuj73"/>
  <con:entry key="simpleSku" value="true"/>
  <con:entry key="sku" value="AM770HO93NTUINDFAS"/>
</con:parameters><con:parameterOrder><con:entry>sku</con:entry><con:entry>simpleSku</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="shortlist" path="getshortlist" id="962fa885-27d9-4d93-85c3-8bdf82c808f5"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="6bd2192a-af44-42b4-bf9f-552c7f9d0d68"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getshortlist">get:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="cdf0d529-0c6d-4f31-addf-c8687ba95e45"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.3"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/getshortlist</con:originalUri><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="0e9j8e392jmdtess5s0vgm8ak6" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="getDetails" path="getDetails" id="b5f41277-a90d-473c-af96-79cd52076d53"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="9c841fdd-5347-439f-8233-a6e44f21cfc9"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:get="http://mobapi.jabong.com/mobapi/customer/getDetails">get:Response</con:element></con:representation><con:request name="Request 1" mediaType="application/json" id="f5f2f6fa-bacf-42cc-8a0d-dddad879efcc"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#API_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#DeviceType}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#API_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#APIEndpoint}</con:endpoint><con:request/><con:credentials><con:username>${#Project#username}</con:username><con:password>${#Project#password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="JCart-Serviceability" type="rest" definitionUrl="postcode" id="844a0977-7a4d-4d0b-a751-c1b4f5ee7cbb" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="Serviceability" path="/{version}/cart" id="343e5260-e2c0-4aac-bf31-7c51fce9663a"><con:settings/><con:parameters><con:parameter><con:name>version</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>Postcode</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="GET" id="9f1bec78-9938-4644-894e-25fa1bffc273"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" id="c74aa766-b370-4bf0-9d9f-56913deb9d1b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Postcode" value="120011"/>
  <con:entry key="version" value="${#Project#version}"/>
</con:parameters><con:parameterOrder><con:entry>version</con:entry><con:entry>Postcode</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="MobApiVersion1.8" type="rest" definitionUrl="http" id="8562d881-f6d7-4ded-96b7-60590ab89fef" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:endpoint>https://${#Project#MobApi_endpoint}</con:endpoint></con:endpoints><con:resource name="login" path="/mobapi/customer/login" id="3721eaea-cc35-4b13-b7c3-4c3fee6673ed"><con:settings/><con:parameters><con:parameter><con:name>session[id]</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" method="POST" id="30769d02-a0a5-4479-bb1e-876a83b1b98b"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="003b387a-1fe0-4ab8-972d-eefe66c1e111"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:request>LoginForm[email]=nayan.gaur@jabong.com&amp;LoginForm[password]=jabong@123</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Add Products with more than 1 quantity" type="rest" id="51e3620d-a2ca-4a70-ae48-c7bbf94d117d" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Cart" path="/v1/cart" id="ab061bae-f388-4410-b2d7-ede9caa355c2"><con:settings/><con:parameters/><con:method name="Cart" method="POST" id="109f94ec-f7b7-4473-a17f-fecd55b2c6fe"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="7e67d2c9-f759-4d6f-9860-138338256a24"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="${#Project#user_id}"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "${#TestCase#Quantity}",
  "Shortlist": false,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="Add product to cart" type="rest" id="27869302-9984-43f6-bdfc-f745c9aa1fc1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints/><con:resource name="Cart" path="/v1/cart" id="6b5180bd-52eb-49ef-9f4f-bebba109e6cf"><con:settings/><con:parameters/><con:method name="Cart" method="POST" id="5368e339-ea9b-4ef6-af66-e7e0a89abcde"><con:settings/><con:parameters/><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="b20bb52a-abb6-4a5d-8cf0-7f7a6130d570"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="${#Project#user_id}"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite name="Verify_correctness_of_items_in_cart" id="e05ed848-81cf-40c4-8083-4bb47dd8028a" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_Remove_Items_from_cart" searchProperties="true" id="934eff77-f46c-44b6-9a5e-c3fa53136875"><con:settings/><con:testStep type="groovy" name="Given user generates random session id" id="64a964da-6c96-4265-a7bc-4f9faf20b1de"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id


log.info "Property1" + context.expand('${#TestCase#testProperty1}');
log.info "Property2" + context.expand('${#TestCase#testProperty2}');</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="5bb0bd7a-8cca-4db9-b24a-b25a685c039b"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="4abf1d8b-0718-4595-aa2d-41b363b2d352"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="91055b5b-ca6b-4f2b-8416-c9d97d01c237"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="9848eb00-9bde-47bc-8edf-ade4edf7c204"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="cf4b316b-c500-4423-aead-2761d8af28dd"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="341b0284-d224-4af8-98f4-5b513abc0057"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def xmlresponse = holder.metadata.toString();
	log.info "xmlresponse" +xmlresponse
	


messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="fcf02b2f-0128-4ff5-8b0b-5872411464b8"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user get list of items added to cart" id="46265ba1-0f17-4d1a-a623-0ef047419ecf"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user get list of items added to cart" mediaType="application/json" id="fc0575f6-3617-42cb-bfec-ba82ab1f050d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="55de6a29-d2a2-40f6-8e57-09564933685c"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="3d8fd9d3-ea16-4b8a-b0b6-a9fea19df92f"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	
//	holder.metadata.cartItems.non_bundle.item_list.children().each{
//
//		def iteminCart = it.name();
//		log.info "string" +iteminCart

		
//	}



</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="cf63de3e-0ebc-4d7f-bd00-b0d828154647"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user verifies item added to cart is visible in cart" id="6fe7a8b0-2859-4619-baa0-150de9f0a995"><con:settings/><con:config><script>def addcart = context.expand( '${#TestCase#xmlresponse}' )
def listcart = context.expand( '${#TestCase#cartresponse}')


assert(addcart.equals(listcart)) : "Product details added to cart does not match products visible in cart"
</script></con:config></con:testStep><con:testStep type="groovy" name="Then Remove All items added to cart" id="dfee179c-64d6-49a4-9c07-2c1516567bee"><con:settings/><con:config><script>int i = context.List_of_Product_in_Cart.size()
log.info "i-->"+i
for(int j = 0; j&lt; i ; j++){
	log.info context.List_of_Product_in_Cart.get(j).toString()
	testRunner.testCase.testSuite.setPropertyValue("product_sku_simple", context.List_of_Product_in_Cart.get(j).toString())
	testRunner.runTestStepByName("User_Can_Remove_Item_Added_To_Cart")
}</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Can_Remove_Item_Added_To_Cart" disabled="true" id="9a3cc39d-1b45-4f0f-80ee-d57f3fd39045"><con:settings/><con:config service="JCartRemove" resourcePath="/v1/cart/{SimpleSku}" methodName="RemovefromCart" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Can_Remove_Item_Added_To_Cart" mediaType="application/json" postQueryString="false" id="cfc67af9-2fae-4f16-8711-ccb5c1812ace"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart/RE105SH90TWFINDFAS-3483833</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS-TRUE" id="8976cad9-1a0f-44d1-962f-de25a034a84f"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" name="DOES NOT CONTAINS MESSAGE-Items Restored" id="116df3ee-33ac-4d68-9eb6-f1bf7000a547"><con:configuration><token>Some items in your bag have been restored from an earlier visit. Please review before placing your order</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="SimpleSku" value="${#TestSuite#product_sku_simple}"/>
  <con:entry key="version" value="${#Project#version}"/>
</con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_add_and_verifies_items_in_cart" searchProperties="true" id="e3d3d6d8-87cd-436a-873e-86d642c3619f"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="be07bcba-16f2-4a54-8408-29a1cad12480"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="0ad56d26-23cd-48fa-8c84-f17e6e744891"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="9cd51dd2-d21d-46aa-8672-3369e7e53944"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="e8e2d63e-1112-4c4a-a397-4668369ed915"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="9de08c2e-f6a0-466c-ac9e-968f36f9d6da"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def xmlresponse = holder.metadata.toString();
	log.info "xmlresponse" +xmlresponse
	


messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user get list of items added to cart" id="e3008319-98c1-458b-9023-d5b9d5dc9092"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user get list of items added to cart" mediaType="application/json" id="7a4b7f69-a668-4009-b1c8-1de9cd12c329"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	
//	holder.metadata.cartItems.non_bundle.item_list.children().each{
//
//		def iteminCart = it.name();
//		log.info "string" +iteminCart

		
//	}



</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a1c5e92d-ef8d-42ef-b62b-5267fe58713b"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user verifies item added to cart is visible in cart" id="ba6350c0-df8c-40a6-8846-af952812880b"><con:settings/><con:config><script>def addcart = context.expand( '${#TestCase#xmlresponse}' )
def listcart = context.expand( '${#TestCase#cartresponse}')


assert(addcart.equals(listcart)) : "Product details added to cart does not match products visible in cart"
</script></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_Update_Quantity of_Cart_Item" searchProperties="true" id="40c28088-c50f-4444-a35c-055a45a3c211"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="c8044ca0-bccf-4da7-834a-af7695c1bd7b"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="c132c42b-057d-4118-aab2-7940a6702c8f"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="3e67d332-164e-4d79-9cc2-84b38dae17f9"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="4983743d-30e5-4ee3-92f8-fe2b95ec5a07"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="88dbea61-63c9-42a2-8653-885fa34b454e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c221711b-ee71-468b-8d0c-73314a879b59"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="cc42baa8-3a4a-4ef7-af75-a824405e44e0"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def xmlresponse = holder.metadata.toString();
	log.info "xmlresponse" +xmlresponse
	


messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="b1bf2a9c-a09a-45b2-a095-9362f07c3cca"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then the product added to CART and item details verified" id="d12cbd43-8ac7-4dfc-aa53-0eb1e30fe505"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then the product added to CART and item details verified" mediaType="application/json" id="d2c115e8-5986-4785-b58a-95364f7dcb84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c07c57d8-30ba-4820-822e-43202d6e7ccb"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="ca64ab5e-7fd3-4b29-ad4f-90829263f504"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	





</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="54c1b005-d2c9-4196-b741-bf1fb494f943"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And user verifies item added to cart is visible in cart" id="ac0f43fc-af09-4243-88b7-e00279407b57"><con:settings/><con:config><script>def addcart = context.expand( '${#TestCase#xmlresponse}' )
def listcart = context.expand( '${#TestCase#cartresponse}')


assert(addcart.equals(listcart)) : "Product details added to cart does not match products visible in cart"
</script></con:config></con:testStep><con:testStep type="restrequest" name="And When User change the quantity of product added to CART" id="1dff1cfc-cf0a-462a-b865-290520d7f444"><con:settings/><con:config service="JCartUpdate" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And When User change the quantity of product added to CART" mediaType="application/json" id="03a664bc-9e8c-4da5-ad48-c01c03b7d5a0" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "SimpleSkuWithQuantity": [
    {
      "Quantity": "4",
      "SimpleSku": "${#TestSuite#product_sku_simple}"
    }
  ]
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2cf8df29-92d3-4856-ae22-4af0e9bea0b7"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Assert for the success message.
def successMessage = responseHolder.messages.success[0].toString();
assert(successMessage == "ORDER_CART_CHANGE_SUCCESS" ): "Success message was not verified"; 

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then the product quantity get changed successfully" id="3efff71e-aef9-4647-9e87-f7b6835a8aeb"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then the product quantity get changed successfully" mediaType="application/json" id="a9acb610-cfa5-40d4-a167-263b3cd2ff33"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="fface5c8-4302-47c8-a236-c2c7aee3cda9"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;


String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.

String session = "session-id"
def session_id_response = responseHolder."${session}".toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID_Response",session_id_response);

//Assert seesion_id in response of API against session_id of product present in cart


def session_id = context.expand( '${#Project#Session_ID}' )
assert(session_id_response == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

def sku_in_cart = context.expand( '${#TestSuite#product_sku_simple}' )

//assert sku-simple in response is same as sku-simple present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		def item_expected_inCart = it.name();
		log.info "string" +item_expected_inCart
		log.info "item" +item_expected_inCart

		assert(item_expected_inCart == sku_in_cart):"Product in cart is not same as '"+item_expected_inCart+"'"
	
}

//assert quantity in response is same as quantity updated by API
holder.metadata.cartItems.non_bundle.item_list.children().each{
	def itemQuantity = it.quantity.text();
	log.info "itemQuantity" +itemQuantity 


assert(itemQuantity == "4") : "Product's quantity in cart was changed to '4' but we found  '" +itemQuantity + "'" ;	
}


     		
     		</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="Sessid" value="${#Project#session_id}"/>
  <con:entry key="version" value="${#Project#version}"/>
</con:parameters><con:parameterOrder><con:entry>Sessid</con:entry><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_User_Add_look(multiple products)_to_Cart" searchProperties="true" disabled="true" id="dc32603a-2f52-40b0-a544-a94a52fbafc8"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" id="efec40df-ac4e-4876-8792-11f7d1809df0"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user get list of SKUs with quantity which are not included in any STL" id="e85db118-ad8a-4e3a-b23c-e23e3c3dd213"><con:settings/><con:config><script>String primary_sku;
String secondary_sku
ArrayList&lt;String> list_sku = new ArrayList&lt;String>();

def resultSet = context.statement.executeQuery("""SELECT    catalog_config.sku,     SUM(IFNULL(((SELECT quantity FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple) - (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order
                WHERE fk_sales_order_process IN (1004,1005,1002,1003,1008,3,1007,1001,1006) AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku)), 0)) as quantity  FROM catalog_config  INNER JOIN catalog_simple    
                ON catalog_config.id_catalog_config = catalog_simple.fk_catalog_config where catalog_config.sku not in (select sku from catalog_shop_look_detail as csld inner join catalog_shop_look as csl on csld.fk_catalog_shop_look=csl.id_catalog_shop_look where csl.type=0) 
                and ((catalog_config.status = \"active\"  AND catalog_config.status_supplier_config = \"active\"  AND catalog_config.pet_approved = 1 AND EXISTS (SELECT id_catalog_product_image FROM catalog_product_image WHERE fk_catalog_config=id_catalog_config) 
                AND (EXISTS (SELECT * FROM catalog_brand WHERE catalog_config.fk_catalog_brand=id_catalog_brand AND status = \"active\")) AND (EXISTS (SELECT * FROM catalog_supplier  WHERE catalog_config.fk_catalog_supplier=id_catalog_supplier AND status = \"active\")) 
                AND (EXISTS (SELECT * FROM catalog_category JOIN catalog_config_has_catalog_category ON catalog_config_has_catalog_category.fk_catalog_category=id_catalog_category
                WHERE catalog_config_has_catalog_category.fk_catalog_config=id_catalog_config AND status = "active"))AND (EXISTS
               (SELECT * FROM catalog_simple WHERE catalog_simple.status = "active" AND catalog_simple.status_supplier_simple = "active"
                AND catalog_simple.price > 0 AND (SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
                WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple) - (SELECT COUNT(*)
                FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order WHERE fk_sales_order_process IN (1004,
                1005, 1002, 1003, 1008, 3, 1007, 1001, 1006)  AND is_reserved = 1 AND sales_order_item.sku = catalog_simple.sku) > 0
                AND catalog_simple.fk_catalog_config = id_catalog_config)))) group by catalog_config.id_catalog_config having quantity > 0  
                order by catalog_config.id_catalog_config desc limit 10""");

while(resultSet.next()){
	list_sku.add(resultSet.getString("sku"))
}

context.Sku_list_for_stl = list_sku
log.info list_sku
//set primary SKU
log.info list_sku.get(1)

testRunner.testCase.setPropertyValue("Primary_sku",list_sku.get(0))
testRunner.testCase.setPropertyValue("Secondary_sku",list_sku.get(1))
testRunner.testCase.setPropertyValue("Second_Secondary_sku",list_sku.get(2))


</script></con:config></con:testStep><con:testStep type="groovy" name="When user set name and url_key for new STL to be created And get product id for the Primary and secondary SKU" id="06974895-c6c6-43ad-a2c1-81168825a94e"><con:settings/><con:config><script>import net.sf.json.groovy.*;
import org.apache.commons.lang.RandomStringUtils;

String randomString = (RandomStringUtils.random(6, true, false));
log.info(randomString);
testRunner.testCase.setPropertyValue("STL_name",randomString)

randomString = (RandomStringUtils.random(8, true, false));
log.info(randomString);
testRunner.testCase.setPropertyValue("STL_url_key",randomString)

String product_id;
def resultSet = context.statement.executeQuery("select id_catalog_config from catalog_config where sku='"+testRunner.testCase.getPropertyValue("Primary_sku")+"'");	
while(resultSet.next()){
	product_id = String.valueOf(resultSet.getInt("id_catalog_config"))
}
resultSet.close();

testRunner.testCase.testSuite.setPropertyValue("primary_product_id",product_id)

String sec_product_id = "";
resultSet = context.statement.executeQuery("select id_catalog_config from catalog_config where sku='"+testRunner.testCase.getPropertyValue("Secondary_sku")+"'");	
while(resultSet.next()){
	sec_product_id = String.valueOf(resultSet.getInt("id_catalog_config"))
}
testRunner.testCase.testSuite.setPropertyValue("secondary_product_id",sec_product_id)
log.info sec_product_id


String second_sec_product_id = "";
resultSet = context.statement.executeQuery("select id_catalog_config from catalog_config where sku='"+testRunner.testCase.getPropertyValue("Second_Secondary_sku")+"'");	
while(resultSet.next()){
	second_sec_product_id = String.valueOf(resultSet.getInt("id_catalog_config"))
}
testRunner.testCase.testSuite.setPropertyValue("second_secondary_product_id",second_sec_product_id)
log.info second_sec_product_id
</script></con:config></con:testStep><con:testStep type="groovy" name="And user get simple for the primary and secondary sku where qty > 0" id="ccc0ccfa-ec3e-4bd7-93a3-235b1972f45b"><con:settings/><con:config><script>String primary_simple;
String primary_sku_simple;
def resultSet = context.statement.executeQuery("SELECT id_catalog_simple, barcode_ean, sku, IFNULL(((SELECT quantity FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple) - (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order WHERE fk_sales_order_process IN ( 1004,1005,1002,1003,1008,3,1007,1001,1006 ) AND is_reserved = 1 AND sales_order_item.sku = catalog_simple.sku)), 0) AS quantity, catalog_tax_class.tax_percent AS tax_percent, IF (special_price IS NOT NULL   AND (special_from_date IS NULL  OR special_from_date &lt;= CURDATE())  AND (special_to_date IS NULL OR special_to_date >= CURDATE()), special_price, 0) AS special_price, special_from_date, special_to_date FROM catalog_simple LEFT JOIN catalog_tax_class ON catalog_tax_class.id_catalog_tax_class=catalog_simple.fk_catalog_tax_class WHERE fk_catalog_config = "+testRunner.testCase.testSuite.getPropertyValue("primary_product_id")+" AND price > 0 AND catalog_simple.status = \"active\" AND catalog_simple.status_supplier_simple = \"active\"");	
while(resultSet.next()){
	if(resultSet.getInt("id_catalog_simple") > 0){
		primary_simple = resultSet.getInt("id_catalog_simple")
		primary_sku_simple = resultSet.getString("sku")
	}
}


testRunner.testCase.testSuite.setPropertyValue("primary_simple",primary_simple)
testRunner.testCase.testSuite.setPropertyValue("primary_sku_simple",primary_sku_simple)
resultSet.close()
String secondary_simple;
String secondary_sku_simple;
resultSet = context.statement.executeQuery("SELECT id_catalog_simple, barcode_ean, sku, IFNULL(((SELECT quantity FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple) - (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order WHERE fk_sales_order_process IN ( 1004,1005,1002,1003,1008,3,1007,1001,1006 ) AND is_reserved = 1 AND sales_order_item.sku = catalog_simple.sku)), 0) AS quantity, catalog_tax_class.tax_percent AS tax_percent, IF (special_price IS NOT NULL   AND (special_from_date IS NULL  OR special_from_date &lt;= CURDATE())  AND (special_to_date IS NULL OR special_to_date >= CURDATE()), special_price, 0) AS special_price, special_from_date, special_to_date FROM catalog_simple LEFT JOIN catalog_tax_class ON catalog_tax_class.id_catalog_tax_class=catalog_simple.fk_catalog_tax_class WHERE fk_catalog_config = "+testRunner.testCase.testSuite.getPropertyValue("secondary_product_id")+" AND price > 0 AND catalog_simple.status = \"active\" AND catalog_simple.status_supplier_simple = \"active\"");	
while(resultSet.next()){
	if(resultSet.getInt("id_catalog_simple") > 0){
		secondary_simple = resultSet.getInt("id_catalog_simple")
		secondary_sku_simple = resultSet.getString("sku")
	}
}


testRunner.testCase.testSuite.setPropertyValue("secondary_simple",secondary_simple)
testRunner.testCase.testSuite.setPropertyValue("secondary_sku_simple",secondary_sku_simple)</script></con:config></con:testStep><con:properties><con:property><con:name>Primary_sku</con:name><con:value>PE443BG65JVAINDFAS</con:value></con:property><con:property><con:name>Secondary_sku</con:name><con:value>PE443BG67JUYINDFAS</con:value></con:property><con:property><con:name>Second_Secondary_sku</con:name><con:value>PE443BG71JUUINDFAS</con:value></con:property><con:property><con:name>STL_name</con:name><con:value>cNLhhL</con:value></con:property><con:property><con:name>STL_url_key</con:name><con:value>APvCtdmj</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_User_verifies_VAT_on_discounted_product" searchProperties="true" id="a3001e41-6a6d-4d5c-93ca-82ae9915df82"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="d6368d09-cda7-4639-89f1-5693191edd9e"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="6ee5c692-adf5-48e4-8dca-3739910b4c99"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given User fetch VAT enabled and discounted sku's from database" id="5096e105-3cef-407c-a65f-e0b4fea730c2"><con:settings/><con:config><script>String sku;
String simple;


def resultSet = context.statement.executeQuery("""SELECT cc.sku,cs.sku AS simple
					FROM catalog_stock AS stock INNER JOIN catalog_simple cs 
					ON stock.fk_catalog_simple = id_catalog_simple 
					INNER JOIN catalog_config cc on cs.fk_catalog_config=cc.id_catalog_config
					AND (SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock 
					WHERE catalog_stock.fk_catalog_simple = cs.id_catalog_simple) - 
					(SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
					fk_sales_order = id_sales_order WHERE fk_sales_order_process 
					IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND 
					is_reserved = 1  AND sales_order_item.sku = cs.sku) > 10 
					AND cc.vat_company_contribution>cc.vat_customer_contribution 
					AND cs.price-cs.simple_special_price>500
					AND cs.special_to_date > CURDATE()
					AND cs.price&lt;2000 ORDER BY stock.id_catalog_stock DESC limit 3 """); 
						
				
 while(resultSet.next()){
  	sku_simple  = resultSet.getString("simple")

  	log.info "sku_simple" +sku_simple
  	
  	sku		  = resultSet.getString("sku")	
  	log.info "sku" +sku
 break;
 
}

testRunner.testCase.testSuite.setPropertyValue("sku" ,sku.toString())
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple.toString())
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add discounted item to Cart and capture VAT details" id="a884c811-f8dc-41c0-9033-2bbc1e09d835"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add discounted item to Cart and capture VAT details" mediaType="application/json" postQueryString="false" id="b7897d82-0059-477b-ae27-9133a6961e8b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c221711b-ee71-468b-8d0c-73314a879b59"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="cc42baa8-3a4a-4ef7-af75-a824405e44e0"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Fetch discounted product added details

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
def is_vat_charged
def Vat_Amount



	holder.metadata.cartItems.non_bundle.item_list.children().additional_info.each{
	is_vat_charged = it.is_vat_charged.text();
	Vat_Amount	= it.vat_amount.text();
	
		}

	def VATAmount

	VATAmount = Float.parseFloat(Vat_Amount);	

messageExchange.modelItem.testCase.testSuite.setPropertyValue("is_vat_charged",is_vat_charged);


messageExchange.modelItem.testCase.testSuite.setPropertyValue("VATAmount",VATAmount.toString());


def shipping_Charges = responseHolder.metadata.total.shipping_charge.toString();

if(shipping_Charges == "null") { shipping_Charges = "0.00";}
def shippingCharges =Float.parseFloat(shipping_Charges);
log.info "shippingCharges" +shippingCharges

def bundle_discount = responseHolder.metadata.total.bundle_discount.toString();
if(bundle_discount == "null") { bundle_discount = "0.00";}
def bundleDiscount =Float.parseFloat(bundle_discount);


def coupon_Money = responseHolder.metadata.total.coupon_money_value.toString();
if(coupon_Money == "null") { coupon_Money = "0.00";}
def couponMoneyValue = Float.parseFloat(coupon_Money);

def gift_Wrap = responseHolder.metadata.total.gift_wrap_charges.toString();
if(gift_Wrap == "null"){gift_Wrap = "0.00";}
def giftWrapCharges = Float.parseFloat(gift_Wrap);

//sku special price

def specialprice

holder.metadata.cartItems.non_bundle.item_list.children().each{
	specialprice = it.specialPrice.text();
	
	if(specialprice == ""){
		specialprice = "0.00";
	}
	log.info specialprice
}

def productPrice = Float.parseFloat(specialprice);
messageExchange.modelItem.testCase.setPropertyValue("productPrice",productPrice.toString());
log.info "productPrice" +productPrice


def sub_Total = responseHolder.metadata.total.sub_total.toString();

if(sub_Total == "null") { sub_Total = "0.00"}
def subTotal = Float.parseFloat(sub_Total);



messageExchange.modelItem.testCase.setPropertyValue("subTotal",subTotal.toString());

assert(subTotal == productPrice) : "SubTotal  must be same as product price, as there is only 1 item in CART";

//Cart Value

def cartTotal = Float.parseFloat(responseHolder.metadata.cartValue.toString());

messageExchange.modelItem.testCase.setPropertyValue("Cart_Value",cartTotal.toString());


def totalPrice = subTotal + shippingCharges - bundleDiscount - couponMoneyValue + giftWrapCharges + VATAmount;


totalPrice = Math.floor(totalPrice * 100)/100;


////assert that the total price is same as the the CART total.

if((cartTotal - totalPrice) > 0.1){

	assert false : "Cart total is not equivalent to Total Price calulated. CART TOTAL VALUE -- " + cartTotal + " And calculated total value -- " + totalPrice;
}
else{
	assert true;
}

messageExchange.modelItem.testCase.setPropertyValue("totalPrice",totalPrice.toString());


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="b1bf2a9c-a09a-45b2-a095-9362f07c3cca"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then the product added to CART and VAT calculation,total verified" id="bb359b71-c8cc-4118-867c-ce38144f839a"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then the product added to CART and VAT calculation,total verified" mediaType="application/json" id="ee19b655-5327-4959-ba74-6be2ae4a84be"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c07c57d8-30ba-4820-822e-43202d6e7ccb"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="ca64ab5e-7fd3-4b29-ad4f-90829263f504"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Assert product visible in cart against the discounted product added to cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
def is_vat_charged_response
def Vat_Amount_response



	holder.metadata.cartItems.non_bundle.item_list.children().additional_info.each{
	is_vat_charged_response = it.is_vat_charged.text();
	Vat_Amount_response	= it.vat_amount.text();
	
		}

	def VATAmount_response

	VATAmount_reponse = Float.parseFloat(Vat_Amount_response).toString();

	
				
		def VATChargedFlag = context.expand('${#TestSuite#is_vat_charged}')
	
		def VATAmount = context.expand('${#TestSuite#VATAmount}')

//VAT details assertion

assert(is_vat_charged_response == VATChargedFlag) : "vat charged flag is mismatching"

assert(VATAmount_reponse == VATAmount) : " VAT amount in response is not same as " +VATAmount+ " charged on discounted product"

//Rest of the details

def shipping_Charges = responseHolder.metadata.total.shipping_charge.toString();

if(shipping_Charges == "null") { shipping_Charges = "0.00";}
def shippingCharges =Float.parseFloat(shipping_Charges);
log.info "shippingCharges" +shippingCharges


def bundle_discount = responseHolder.metadata.total.bundle_discount.toString();
if(bundle_discount == "null") { bundle_discount = "0.00";}
def bundleDiscount =Float.parseFloat(bundle_discount);


def coupon_Money = responseHolder.metadata.total.coupon_money_value.toString();
if(coupon_Money == "null") { coupon_Money = "0.00";}
def couponMoneyValue = Float.parseFloat(coupon_Money);


def gift_Wrap = responseHolder.metadata.total.gift_wrap_charges.toString();
if(gift_Wrap == "null"){gift_Wrap = "0.00";}
def giftWrapCharges = Float.parseFloat(gift_Wrap);


//sku special price visible in response

def specialprice

holder.metadata.cartItems.non_bundle.item_list.children().each{
	specialprice = it.specialPrice.text();
	
}

def productPrice_response = Float.parseFloat(specialprice).toString();


//asserting special price visible in response against special price of the discounted product

def productPrice = context.expand('${#TestCase#productPrice}')

assert(productPrice_response == productPrice) : "Special price visible in cart is not same as special price of discounted product added"

//Asserting the sub-total in response againt sub-total for discounted product added to cart

def sub_Total = responseHolder.metadata.total.sub_total.toString();

if(sub_Total == "null") { sub_Total = "0.00"}
def subTotal_response = Float.parseFloat(sub_Total).toString();


def subTotal = context.expand('${#TestCase#subTotal}')


assert(subTotal_response == subTotal) : "SubTotal of discounted product in cart in not correct"

//Asserting Cart Value visible in response against cart value of discounted product added to cart

def cart_Total = responseHolder.metadata.cartValue.toString();

def cartTotal_response = Float.parseFloat(cart_Total).toString();


def Cart_Value = context.expand('${#TestCase#Cart_Value}')

assert(cartTotal_response == Cart_Value) : "Cart value is mismatching"

//asserting total visible in cart is same as total cart price for discounted product that was added to cart

VATAmountreponse = Float.parseFloat(VATAmount_reponse);
subTotalresponse = Float.parseFloat(subTotal_response);



def totalPriceresponse = subTotalresponse + shippingCharges - bundleDiscount - couponMoneyValue + giftWrapCharges + VATAmountreponse;

messageExchange.modelItem.testCase.setPropertyValue("totalPriceresponse",totalPriceresponse.toString());

totalPriceresponse = Math.floor(totalPriceresponse * 100)/100;

////assert that the total price visible in response is same as total price of discounted item added

//Fetching the total price calculated from previous rest test request

def totalPrice = context.expand('${#TestCase#totalPrice}')

//Converting the total price calculted for the item visible in cart from "double" to "string" for asserting

def totalinresponse = totalPriceresponse.toString();

 assert(totalinresponse == totalPrice):"Total price visible in cart is not same as total cart/price value of discounted product"







</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Response</con:name><con:value><![CDATA[{"success":true,"messages":[],"session":{"id":"jb9b7835cce240feee596f20233d789248cfcac5583cb2ae2fc71d71c962c6525d","is_loggedin":false,"app_cache_mt":{"segments":1427123847,"menu":1427123847,"md5":1427123847,"stmsgv":"1.0","hpbr":"850"},"YII_CSRF_TOKEN":"433dd3fecf3f8ff31c93db762bbb0d764d175776","rpid":null},"server_flags":{"webp_enabled":0},"metadata":{"base_url":"http://rocket:Q67gING87DEFT@integration1.jabongfashion.com/mobapi/","media_base_url":"http://static.jabong.com","data":{"color":null,"discounted":null,"total":28,"recommendations":null,"facets":{"facet_category":{"idCatalogFilter":1,"name":"Category","param":"category","facet_search":"facet_category","view":"category-segment","showOne":1,"expand":true,"displayZero":true,"showEmpty":false,"display":1,"multipleSelect":2,"resolveId":1,"multi":1,"mapRes":[{"4355":{"name":"Accessories","segment":"men","urlKey":"accessories","composedUrl":"accessories","selected":false,"amountItems":28,"categoryId":"4355","hasChildren":1}},{"4357":{"name":"Men Accessories","segment":"men","urlKey":"accessories","composedUrl":"men/accessories","selected":false,"amountItems":28,"categoryId":"4357","hasChildren":1}},[{"name":"Watch & Sunglass Cases","segment":"men","urlKey":"watch-sunglass-cases","composedUrl":"men/accessories/watch-sunglass-cases","selected":true,"amountItems":28,"categoryId":"4368","hasChildren":0}]]},"facet_ty":{"idCatalogFilter":47,"name":"Type","param":"ty","facet_search":"facet_ty","view":"ty-multi","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapRes":[{"name":"Watch Cases","url_key":"watch-cases","id":480,"productCount":28,"selected":true}],"facet_search_box":false},"facet_price":{"idCatalogFilter":16,"name":"Price","param":"price","facet_search":"facet_price","view":"price-range","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":0,"facet_model":"FacetPrice","freeRanges":{"field":"facet_price"},"mapRes":[{"name":"below Rs. 1000","productCount":3,"value":"0-999","url_key":"0-999","id":"0-999","selected":false},{"name":"above Rs. 999","productCount":25,"value":"1000-2499","url_key":"1000-2499","id":"1000-2499","selected":false}],"facet_search_box":false},"facet_discounted":{"idCatalogFilter":18,"name":"Discounts","param":"discounted","facet_search":"facet_discounted","view":"special-price","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":0,"resolveId":0,"mapping":{"online-sale":"Discounted items","non-discount":"Non-Discounted items"},"mapRes":[{"name":"Non-Discounted items","url_key":"non-discount","id":"non-discount","productCount":17,"selected":false},{"name":"Discounted items","url_key":"online-sale","id":"online-sale","productCount":11,"selected":false}],"facet_search_box":false},"facet_brand":{"idCatalogFilter":2,"name":"Brand","param":"brand","facet_search":"facet_brand","view":"brands-multi","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapRes":[{"name":"tZaro","url_key":"tzaro","id":1329,"productCount":1,"selected":false},{"name":"ILINA","url_key":"ilina","id":1760,"productCount":4,"selected":false},{"name":"D'SIGNER","url_key":"d-signer","id":2226,"productCount":12,"selected":false},{"name":"Anno Dominii","url_key":"anno-dominii","id":3051,"productCount":11,"selected":false}],"facet_search_box":true},"facet_color_family":{"idCatalogFilter":17,"name":"Color","param":"color","facet_search":"facet_color_family","view":"color-all","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapping":{"Black":"#333333","Blue":"#1664c4","Gray":"#adadad","Grey":"#adadad","Red":"#c00707","Silver":"#ecf1ef","White":"#f3f3f3","Bronze":"#d58c5c","Brown":"#943f00","Coffee":"#67372c","Copper":"#c14d00","Dark green":"#346f00","Dark Grey":"#808080","Gold":"#ffe45d","Green":"#6fcc14","Lemon":"#efec0e","Maroon":"#9b1d00","Khaki":"#bdb76b","Multi":"multicolor.gif","Navy Blue":"#0a43a3","Off White":"#f3f1e7","Olive":"#97a573","Orange":"#ffc600","Purple":"#5d00dc","Pink":"#ff1cae","Tan":"#ede4b2","Yellow":"#f1f40e","Lilac":"#cba2c8","Beige":"#f5f5dc","Wine":"#722f37","Sand":"#c2b280","Ruby":"#951b30","Firozi":"#42b4e6","Emerald":"#029875","Magenta":"#ee028b","Champange":"#dbbc8d","Fuschia":"#cc4290","Turquoise":"#3c9f9c","Metal":"#6f6f79","Cobalt":"#003cb1","Apricot":"#fdb970","Pearl":"#dfc39c","Ash":"#968b77","Citrine":"#b7c47f","Aqua":"#10bdc4","Camel":"#c79f6e","Rust":"#a33921","Peach":"#f0785f","Dahlia":"#823a87","Grey milange":"#c1c1c1","Mauve":"#ab8c92","Cream":"#fef1ce","Neutral":"#f1e6ca","Cherry":"#a10021","Light Blue":"#80b6e5","Nude":"#d4b69a","Golden":"#e1b228","Violet indigo":"#670167","Aqua Blue":"#22a6ee","Mustard Yellow":"#ca9138","Light Grey":"#c4c4c4","Brick Red":"#841f27","Lavender":"#8b76c1","Antique":"#766143","Ice Blue":"#5fc4d0","Cobalt Blue":"#003cb1","Transparent":"#ffffff","Two tone":"two-tones.gif","Assorted":"assorted.gif"},"mapRes":[{"name":"Black","productCount":7,"url_key":"Black","selected":false,"id":"#333333"},{"name":"Blue","productCount":2,"url_key":"Blue","selected":false,"id":"#1664c4"},{"name":"Brown","productCount":6,"url_key":"Brown","selected":false,"id":"#943f00"},{"name":"Golden","productCount":1,"url_key":"Golden","selected":false,"id":"#e1b228"},{"name":"Multi","productCount":2,"url_key":"Multi","selected":false,"id":"multicolor.gif"},{"name":"Pink","productCount":4,"url_key":"Pink","selected":false,"id":"#ff1cae"},{"name":"Red","productCount":5,"url_key":"Red","selected":false,"id":"#c00707"},{"name":"Silver","productCount":1,"url_key":"Silver","selected":false,"id":"#ecf1ef"}],"facet_search_box":false}},"category":{"id_catalog_category":"4368","name":"Watch & Sunglass Cases","lft":"934","rgt":"935","url_key":"watch-sunglass-cases","sizechart_active":"1","pdf_active":"0","pdf_name":null,"display_size_conversion":"0","google_tree_mapping":"Apparel & Accessories>Jewelry>Watch Accessories","segments":"Men"},"subCategories":null,"categoryTotals":null,"brand":null,"search":null,"specialPrice":null,"spellcheckingSuggestions":[],"ty":[{"id_catalog_ty":"480","name":"Watch Cases","url_key":"watch-cases","categories":"4361,4368"},{"id_catalog_ty":"480","name":"Watch Cases","url_key":"watch-cases","categories":"4361,4368"}],"sortedBy":{"sortParam":"sort","dirParam":"dir","sort":"discount","sortDirection":"desc","sortOptions":{"popularity":{"dir":"desc","label":"Popularity","solr":"popularity","url_key":"popularity"},"whatsnew":{"dir":"desc","label":"What's new","solr":"score_product_new","url_key":"whatsnew"},"price-high":{"dir":"desc","label":"Price: High to Low","solr":"facet_price","url_key":"price"},"price-low":{"dir":"asc","label":"Price: Low to High","solr":"facet_price","url_key":"price"},"discount":{"dir":"desc","label":"Discount: High to Low","solr":"facet_discount","url_key":"discount"}},"sortOptionsSorted":["popularity","whatsnew","price-high","price-low","discount"]},"facetsOrder":["facet_category","facet_ty","facet_price","facet_discounted","facet_brand","facet_color_family"],"selectedPriceRenge":false,"campaign":[],"items":[{"sku":"AN051JW65IBQINDFAS","name":"Brown Watch Case (12 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Brown-Watch-Case-2812-Blocks29-0595-430306-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1199","max_saving_percentage":"40","price":"1999"},{"sku":"AN051JW91VYIINDFAS","name":"Black Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-285-Blocks29-5222-801245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"AN051JW90VYJINDFAS","name":"Blue Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Blue-Watch-Case-285-Blocks29-5276-901245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"AN051JW88VYLINDFAS","name":"Red Watch Case (10 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1079","max_saving_percentage":"40","price":"1799"},{"sku":"AN051BG26TUVINDFAS","name":"Pink Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Pink-Watch-Case-0810-372186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1199","max_saving_percentage":"40","price":"1999"},{"sku":"AN051JW89VYKINDFAS","name":"Red Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Red-Watch-Case-285-Blocks29-5309-011245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"IL760JW92TWTINDFAS","name":"Pink Watch Case","status":"active","brand":"ILINA","gender":"Men|Women","image":"http://static.jabong.com/p/ILINA-Pink-Watch-Case-3012-705938-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1049","max_saving_percentage":"30","price":"1499"},{"sku":"IL760BG84JITINDFAS","name":"Pink Watch Case","status":"active","brand":"ILINA","gender":"Men|Women","image":"http://static.jabong.com/p/ILINA-Pink-Watch-Case-1121-510615-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1399","max_saving_percentage":"30","price":"1999"},{"sku":"AN051BG27TUUINDFAS","name":"Black Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-3751-272186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"AN051JW66IBPINDFAS","name":"Pink Watch Case (12 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Pink-Watch-Case-2812-Blocks29-1649-330306-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"AN051BG28TUTINDFAS","name":"Multi Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Multi-Watch-Case-3340-172186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW33BQGINDFAS","name":"Golden Faux Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Golden-Faux-Leather-Watch-Case-3545-668657-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1199"},{"sku":"DS226JW40JLBINDFAS","name":"Black Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black-Watch-Case-4738-952476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS333JW72ERFINDFAS","name":"Black/Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black2FRed-Watch-Case-6647-721064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1499"},{"sku":"DS333JW65ERMINDFAS","name":"Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red-Watch-Case-8945-431064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS333JW74ERDINDFAS","name":"Red/Black Watch Case (10 Blocks)","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red2FBlack-Watch-Case-2810-Blocks29-6637-521064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW36BQDINDFAS","name":"Black Faux Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black-Faux-Leather-Watch-Case-1470-368657-2","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"TZ329JW16MOHINDFAS","name":"Black Watch Case (10 Blocks)","status":"active","brand":"tZaro","gender":"Men","image":"http://static.jabong.com/p/tZaro-Black-Watch-Case-2810-Blocks29-5251-388744-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW39JLCINDFAS","name":"Brown Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Watch-Case-5004-062476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"AN051JW76BMTINDFAS","name":"Multi Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Multi-Watch-Case-9706-326127-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW38JLDINDFAS","name":"Brown Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Watch-Case-5022-162476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"AN051JW80BMPINDFAS","name":"Black Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-9502-916127-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW37JLEINDFAS","name":"Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red-Watch-Case-5040-262476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW35BQEINDFAS","name":"Brown Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Leather-Watch-Case-2628-468657-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"}],"breadcrumb":[{"name":"Home","url":"/"},{"name":"Men","url":"/men/"},{"name":"Accessories","url":"/men/accessories/"},{"name":"Watch & Sunglass Cases","url":"/men/accessories/watch-sunglass-cases/"}],"getH1TagText":"Men Multi Types","non_exact_search":false,"mobapi_catalog_url":"men/accessories/watch-sunglass-cases/watch-cases/watch-cases/?sort=discount&dir=desc","pixelInfo":{"catid":["2","4357","4355","4368"],"subcat1id":"4357","subcat2id":"4355"}},"action_name":"index","recomm_url":"http://mobapi-integration1.jabongfashion.com/mobapi/recommendation?c=catalog&a=index&cat=4368&segment=men&page=1&pids=","ab_test":{"app_refine_filter_abtest":"b_80"}}}]]></con:value></con:property><con:property><con:name>is_reusable</con:name><con:value/></con:property><con:property><con:name>Segment</con:name><con:value>men</con:value></con:property><con:property><con:name>Category</con:name><con:value>accessories</con:value></con:property><con:property><con:name>SubCategory1</con:name><con:value>watch-sunglass-cases</con:value></con:property><con:property><con:name>SubCategory2</con:name><con:value>watch-cases</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false1001010.79{"default":{"bonus":10.79}}053.95Anno Dominii6017996FREE SIZEAN051JW88VYLINDFAS-154862410790#c00707542111AN051JW88VYLINDFASMon, 15th Jun6-9 days/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-3/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-falsefalse0anno-dominii-Red-Watch-Case-10-Blocks-542111.html40Red Watch Case (10 Blocks)11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001010.79{"default":{"bonus":10.79}}053.95Red Watch Case (10 Blocks)1799.001132.950.00AN051JW88VYLINDFAS-1548624000.001079.001079.006Anno DominiisizeSizeFREE SIZE1132.950AccessoriesWomen AccessoriesMen AccessoriesMen|Women0.000.000.000.000.000.001079.0053.95This is part of VAT/CST, deposited by Jabong to govt. For details refer FAQs.</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>1164.29</con:value></con:property><con:property><con:name>productPrice</con:name><con:value>1049.0</con:value></con:property><con:property><con:name>subTotal</con:name><con:value>1049.0</con:value></con:property><con:property><con:name>totalPrice</con:name><con:value>1164.29</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>2000false1001011.99{"default":{"bonus":11.99}}059.95Anno Dominii6019996Free SizeAN051BG26TUVINDFAS-200494411990#ff1cae681273AN051BG26TUVINDFASTue, 16th Jun6-9 days/p/Anno-Dominii-Pink-Watch-Case-0810-372186-3/p/Anno-Dominii-Pink-Watch-Case-0810-372186-falsefalse0anno-dominii-Pink-Watch-Case-681273.html40Pink Watch Case11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001011.99{"default":{"bonus":11.99}}059.95Pink Watch Case1999.001258.950.00AN051BG26TUVINDFAS-2004944000.001199.001199.006Anno DominiisizeSizeFree Size000false1001010.79{"default":{"bonus":10.79}}053.95Anno Dominii6017996FREE SIZEAN051JW88VYLINDFAS-154862410790#c00707542111AN051JW88VYLINDFASTue, 16th Jun6-9 days/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-3/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-falsefalse1anno-dominii-Red-Watch-Case-10-Blocks-542111.html40Red Watch Case (10 Blocks)11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001010.79{"default":{"bonus":10.79}}053.95Red Watch Case (10 Blocks)1799.001132.950.00AN051JW88VYLINDFAS-1548624000.001079.001079.006Anno DominiisizeSizeFREE SIZE2391.900AccessoriesWomen AccessoriesMen AccessoriesMen|WomenAccessoriesWomen AccessoriesMen AccessoriesMen|Women0.000.000.000.000.000.002278.00113.90This is part of VAT/CST, deposited by Jabong to govt. For details refer FAQs.</con:value></con:property><con:property><con:name>totalPrice_response</con:name><con:value>839.00.041.95</con:value></con:property><con:property><con:name>totalPriceresponse</con:name><con:value>1164.2900009155273</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_User_verifies_Shipping_charges_on_shipping_charges_enabled_sku's" searchProperties="true" id="712fca8a-f169-425e-9b69-ab52a5f4f3f0"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="548c7150-b07e-40e1-962b-08039f65ba45"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="67aa8341-27c8-4dd1-bb86-4feb8859e698"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given User fetch shipping charges enabled sku's and simples from database" id="2a249bc6-c518-40a4-beb0-7795af98b8a7"><con:settings/><con:config><script>String sku;
String simple;


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
										from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       									inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
										where fk_catalog_shipment_type = 1 # Shipment type = warehouse
										and fk_catalog_attribute_option_global_dispatch_location = 2 # Dispatch location = Warehouse
       									and pet_approved = 1 and quantity > 20 and shipping_amount > 0
       									and catalog_simple.price&lt;1000
       									and catalog_config.status ='ACTIVE' limit 15 """); 
				
 while(resultSet.next()){
  	sku_simple  = resultSet.getString("simple")

  	log.info "sku_simple" +sku_simple
  	
  	sku		  = resultSet.getString("sku")	
  	log.info "sku" +sku
 break;
 
}

testRunner.testCase.testSuite.setPropertyValue("sku" ,sku.toString())
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple.toString())
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add shipping charges enabled item to Cart and capture details" id="b0b67527-ef4b-41cc-9dbd-8a698a6a3f7b"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add shipping charges enabled item to Cart and capture details" mediaType="application/json" postQueryString="false" id="73ca168a-36bf-46d5-9d72-0fbe8f56fe4c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c221711b-ee71-468b-8d0c-73314a879b59"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="cc42baa8-3a4a-4ef7-af75-a824405e44e0"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Fetch product added with shipping charges details

def Vat_Amount = responseHolder.metadata.total.total_vat_amount.toString();

if(Vat_Amount == "null"){Vat_Amount = "0.00";}
def VATAmount = Float.parseFloat(Vat_Amount);

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
def item_inCart

holder.metadata.cartItems.non_bundle.item_list.children().each{
	item_inCart = it.name();	
		}


messageExchange.modelItem.testCase.setPropertyValue("item_inCart",item_inCart);


def shipping_Charges = responseHolder.metadata.total.shipping_charge.toString();

if(shipping_Charges == "null") { shipping_Charges = "0.00";}
def shippingCharges =Float.parseFloat(shipping_Charges);
log.info "shippingCharges" +shippingCharges

def bundle_discount = responseHolder.metadata.total.bundle_discount.toString();
if(bundle_discount == "null") { bundle_discount = "0.00";}
def bundleDiscount =Float.parseFloat(bundle_discount);


def coupon_Money = responseHolder.metadata.total.coupon_money_value.toString();
if(coupon_Money == "null") { coupon_Money = "0.00";}
def couponMoneyValue = Float.parseFloat(coupon_Money);

def gift_Wrap = responseHolder.metadata.total.gift_wrap_charges.toString();
if(gift_Wrap == "null"){gift_Wrap = "0.00";}
def giftWrapCharges = Float.parseFloat(gift_Wrap);

def item_price

holder.metadata.cartItems.non_bundle.item_list.children().salesOrderItem.each{
	item_price = it.unit_price.text();
log.info "itemprice" +item_price
}
def itemprice = Float.parseFloat(item_price);

messageExchange.modelItem.testCase.setPropertyValue("item_price",item_price)

def sub_Total = responseHolder.metadata.total.sub_total.toString();

if(sub_Total == "null") { sub_Total = "0.00"}
def subTotal = Float.parseFloat(sub_Total);
log.info "subtotal" +subTotal



messageExchange.modelItem.testCase.setPropertyValue("subTotal",subTotal.toString());

assert(subTotal == itemprice) : "SubTotal  must be same as item price, as there is only 1 item in CART";

//Cart Value

def cartTotal = Float.parseFloat(responseHolder.metadata.cartValue.toString());

messageExchange.modelItem.testCase.setPropertyValue("Cart_Value",cartTotal.toString());

log.info "cartTotal" +cartTotal


def totalPrice = subTotal + shippingCharges - bundleDiscount - couponMoneyValue + giftWrapCharges + VATAmount;


totalPrice = Math.floor(totalPrice * 100)/100;


////assert that the total price is same as the the CART total and contains shipping charges

if((cartTotal - totalPrice) > 0.1){

	assert false : "Cart total is not equivalent to Total Price calulated. CART TOTAL VALUE -- " + cartTotal + " And calculated total value -- " + totalPrice;
}
else{
	assert true;
}

messageExchange.modelItem.testCase.setPropertyValue("totalPrice",totalPrice.toString());


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="b1bf2a9c-a09a-45b2-a095-9362f07c3cca"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then the product added to CART and shipping charges calculation,total verified" id="65d546bd-c8ce-4fe7-96a7-d3e1dab8ff4c"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then the product added to CART and shipping charges calculation,total verified" mediaType="application/json" id="143cb74e-86c7-4216-83c1-a6733d6e54a9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="c07c57d8-30ba-4820-822e-43202d6e7ccb"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="ca64ab5e-7fd3-4b29-ad4f-90829263f504"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Assert product visible in cart against the discounted product added to cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

//Asserting sku in response against sku added

	holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		def sku_in_response = it.name();

		itemAddedToCart = context.expand('${#TestCase#item_inCart}')

assert(sku_in_response == itemAddedToCart) :"Sku visible in response is not same as " +itemAddedToCart+ " "

	}


//Rest of the details

def shipping_Charges = responseHolder.metadata.total.shipping_charge.toString();

if(shipping_Charges == "null") { shipping_Charges = "0.00";}
def shippingCharges =Float.parseFloat(shipping_Charges);
log.info "shippingCharges" +shippingCharges

def Vat_Amount = responseHolder.metadata.total.total_vat_amount.toString();

if(Vat_Amount == "null"){Vat_Amount = "0.00";}
def VATAmountreponse = Float.parseFloat(Vat_Amount);


def bundle_discount = responseHolder.metadata.total.bundle_discount.toString();
if(bundle_discount == "null") { bundle_discount = "0.00";}
def bundleDiscount =Float.parseFloat(bundle_discount);


def coupon_Money = responseHolder.metadata.total.coupon_money_value.toString();
if(coupon_Money == "null") { coupon_Money = "0.00";}
def couponMoneyValue = Float.parseFloat(coupon_Money);


def gift_Wrap = responseHolder.metadata.total.gift_wrap_charges.toString();
if(gift_Wrap == "null"){gift_Wrap = "0.00";}
def giftWrapCharges = Float.parseFloat(gift_Wrap);


//sku unit price visible in response

def itemprice_response

holder.metadata.cartItems.non_bundle.item_list.children().salesOrderItem.each{
	 itemprice_response = it.unit_price.text();

	 def itemprice = context.expand('${#TestCase#item_price}')

	 assert(itemprice_response == itemprice) : "Unit price of item added is not same as unit price of item visible in response"
}


//Calculating sub-total in response for shipping charges enabled product added to cart

def sub_Total = responseHolder.metadata.total.sub_total.toString();

if(sub_Total == "null") { sub_Total = "0.00"}
def subTotal_response = Float.parseFloat(sub_Total);


//Asserting Cart Value visible in response against cart value of shipping charges enabled product added to cart

def cart_Total = responseHolder.metadata.cartValue.toString();

def cartTotal_response = Float.parseFloat(cart_Total).toString();


def Cart_Value = context.expand('${#TestCase#Cart_Value}')

assert(cartTotal_response == Cart_Value) : "Cart value is mismatching"

//asserting total visible in cart is same as total cart price for product that was added to cart


def totalPriceresponse = subTotal_response + shippingCharges - bundleDiscount - couponMoneyValue + giftWrapCharges + VATAmountreponse;

//messageExchange.modelItem.testCase.setPropertyValue("totalPriceresponse",totalPriceresponse.toString());

totalPriceresponse = Math.floor(totalPriceresponse * 100)/100;

////assert that the total price visible in response is same as total price of item added


def totalPrice = context.expand('${#TestCase#totalPrice}')



def totalinresponse = totalPriceresponse.toString();

 assert(totalinresponse == totalPrice):"Total price visible in cart is not same as total cart/price value of shipping charges enabled product"







</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Response</con:name><con:value><![CDATA[{"success":true,"messages":[],"session":{"id":"jb9b7835cce240feee596f20233d789248cfcac5583cb2ae2fc71d71c962c6525d","is_loggedin":false,"app_cache_mt":{"segments":1427123847,"menu":1427123847,"md5":1427123847,"stmsgv":"1.0","hpbr":"850"},"YII_CSRF_TOKEN":"433dd3fecf3f8ff31c93db762bbb0d764d175776","rpid":null},"server_flags":{"webp_enabled":0},"metadata":{"base_url":"http://rocket:Q67gING87DEFT@integration1.jabongfashion.com/mobapi/","media_base_url":"http://static.jabong.com","data":{"color":null,"discounted":null,"total":28,"recommendations":null,"facets":{"facet_category":{"idCatalogFilter":1,"name":"Category","param":"category","facet_search":"facet_category","view":"category-segment","showOne":1,"expand":true,"displayZero":true,"showEmpty":false,"display":1,"multipleSelect":2,"resolveId":1,"multi":1,"mapRes":[{"4355":{"name":"Accessories","segment":"men","urlKey":"accessories","composedUrl":"accessories","selected":false,"amountItems":28,"categoryId":"4355","hasChildren":1}},{"4357":{"name":"Men Accessories","segment":"men","urlKey":"accessories","composedUrl":"men/accessories","selected":false,"amountItems":28,"categoryId":"4357","hasChildren":1}},[{"name":"Watch & Sunglass Cases","segment":"men","urlKey":"watch-sunglass-cases","composedUrl":"men/accessories/watch-sunglass-cases","selected":true,"amountItems":28,"categoryId":"4368","hasChildren":0}]]},"facet_ty":{"idCatalogFilter":47,"name":"Type","param":"ty","facet_search":"facet_ty","view":"ty-multi","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapRes":[{"name":"Watch Cases","url_key":"watch-cases","id":480,"productCount":28,"selected":true}],"facet_search_box":false},"facet_price":{"idCatalogFilter":16,"name":"Price","param":"price","facet_search":"facet_price","view":"price-range","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":0,"facet_model":"FacetPrice","freeRanges":{"field":"facet_price"},"mapRes":[{"name":"below Rs. 1000","productCount":3,"value":"0-999","url_key":"0-999","id":"0-999","selected":false},{"name":"above Rs. 999","productCount":25,"value":"1000-2499","url_key":"1000-2499","id":"1000-2499","selected":false}],"facet_search_box":false},"facet_discounted":{"idCatalogFilter":18,"name":"Discounts","param":"discounted","facet_search":"facet_discounted","view":"special-price","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":0,"resolveId":0,"mapping":{"online-sale":"Discounted items","non-discount":"Non-Discounted items"},"mapRes":[{"name":"Non-Discounted items","url_key":"non-discount","id":"non-discount","productCount":17,"selected":false},{"name":"Discounted items","url_key":"online-sale","id":"online-sale","productCount":11,"selected":false}],"facet_search_box":false},"facet_brand":{"idCatalogFilter":2,"name":"Brand","param":"brand","facet_search":"facet_brand","view":"brands-multi","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapRes":[{"name":"tZaro","url_key":"tzaro","id":1329,"productCount":1,"selected":false},{"name":"ILINA","url_key":"ilina","id":1760,"productCount":4,"selected":false},{"name":"D'SIGNER","url_key":"d-signer","id":2226,"productCount":12,"selected":false},{"name":"Anno Dominii","url_key":"anno-dominii","id":3051,"productCount":11,"selected":false}],"facet_search_box":true},"facet_color_family":{"idCatalogFilter":17,"name":"Color","param":"color","facet_search":"facet_color_family","view":"color-all","showOne":1,"expand":true,"displayZero":false,"showEmpty":false,"display":1,"multipleSelect":1,"mapping":{"Black":"#333333","Blue":"#1664c4","Gray":"#adadad","Grey":"#adadad","Red":"#c00707","Silver":"#ecf1ef","White":"#f3f3f3","Bronze":"#d58c5c","Brown":"#943f00","Coffee":"#67372c","Copper":"#c14d00","Dark green":"#346f00","Dark Grey":"#808080","Gold":"#ffe45d","Green":"#6fcc14","Lemon":"#efec0e","Maroon":"#9b1d00","Khaki":"#bdb76b","Multi":"multicolor.gif","Navy Blue":"#0a43a3","Off White":"#f3f1e7","Olive":"#97a573","Orange":"#ffc600","Purple":"#5d00dc","Pink":"#ff1cae","Tan":"#ede4b2","Yellow":"#f1f40e","Lilac":"#cba2c8","Beige":"#f5f5dc","Wine":"#722f37","Sand":"#c2b280","Ruby":"#951b30","Firozi":"#42b4e6","Emerald":"#029875","Magenta":"#ee028b","Champange":"#dbbc8d","Fuschia":"#cc4290","Turquoise":"#3c9f9c","Metal":"#6f6f79","Cobalt":"#003cb1","Apricot":"#fdb970","Pearl":"#dfc39c","Ash":"#968b77","Citrine":"#b7c47f","Aqua":"#10bdc4","Camel":"#c79f6e","Rust":"#a33921","Peach":"#f0785f","Dahlia":"#823a87","Grey milange":"#c1c1c1","Mauve":"#ab8c92","Cream":"#fef1ce","Neutral":"#f1e6ca","Cherry":"#a10021","Light Blue":"#80b6e5","Nude":"#d4b69a","Golden":"#e1b228","Violet indigo":"#670167","Aqua Blue":"#22a6ee","Mustard Yellow":"#ca9138","Light Grey":"#c4c4c4","Brick Red":"#841f27","Lavender":"#8b76c1","Antique":"#766143","Ice Blue":"#5fc4d0","Cobalt Blue":"#003cb1","Transparent":"#ffffff","Two tone":"two-tones.gif","Assorted":"assorted.gif"},"mapRes":[{"name":"Black","productCount":7,"url_key":"Black","selected":false,"id":"#333333"},{"name":"Blue","productCount":2,"url_key":"Blue","selected":false,"id":"#1664c4"},{"name":"Brown","productCount":6,"url_key":"Brown","selected":false,"id":"#943f00"},{"name":"Golden","productCount":1,"url_key":"Golden","selected":false,"id":"#e1b228"},{"name":"Multi","productCount":2,"url_key":"Multi","selected":false,"id":"multicolor.gif"},{"name":"Pink","productCount":4,"url_key":"Pink","selected":false,"id":"#ff1cae"},{"name":"Red","productCount":5,"url_key":"Red","selected":false,"id":"#c00707"},{"name":"Silver","productCount":1,"url_key":"Silver","selected":false,"id":"#ecf1ef"}],"facet_search_box":false}},"category":{"id_catalog_category":"4368","name":"Watch & Sunglass Cases","lft":"934","rgt":"935","url_key":"watch-sunglass-cases","sizechart_active":"1","pdf_active":"0","pdf_name":null,"display_size_conversion":"0","google_tree_mapping":"Apparel & Accessories>Jewelry>Watch Accessories","segments":"Men"},"subCategories":null,"categoryTotals":null,"brand":null,"search":null,"specialPrice":null,"spellcheckingSuggestions":[],"ty":[{"id_catalog_ty":"480","name":"Watch Cases","url_key":"watch-cases","categories":"4361,4368"},{"id_catalog_ty":"480","name":"Watch Cases","url_key":"watch-cases","categories":"4361,4368"}],"sortedBy":{"sortParam":"sort","dirParam":"dir","sort":"discount","sortDirection":"desc","sortOptions":{"popularity":{"dir":"desc","label":"Popularity","solr":"popularity","url_key":"popularity"},"whatsnew":{"dir":"desc","label":"What's new","solr":"score_product_new","url_key":"whatsnew"},"price-high":{"dir":"desc","label":"Price: High to Low","solr":"facet_price","url_key":"price"},"price-low":{"dir":"asc","label":"Price: Low to High","solr":"facet_price","url_key":"price"},"discount":{"dir":"desc","label":"Discount: High to Low","solr":"facet_discount","url_key":"discount"}},"sortOptionsSorted":["popularity","whatsnew","price-high","price-low","discount"]},"facetsOrder":["facet_category","facet_ty","facet_price","facet_discounted","facet_brand","facet_color_family"],"selectedPriceRenge":false,"campaign":[],"items":[{"sku":"AN051JW65IBQINDFAS","name":"Brown Watch Case (12 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Brown-Watch-Case-2812-Blocks29-0595-430306-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1199","max_saving_percentage":"40","price":"1999"},{"sku":"AN051JW91VYIINDFAS","name":"Black Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-285-Blocks29-5222-801245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"AN051JW90VYJINDFAS","name":"Blue Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Blue-Watch-Case-285-Blocks29-5276-901245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"AN051JW88VYLINDFAS","name":"Red Watch Case (10 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1079","max_saving_percentage":"40","price":"1799"},{"sku":"AN051BG26TUVINDFAS","name":"Pink Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Pink-Watch-Case-0810-372186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1199","max_saving_percentage":"40","price":"1999"},{"sku":"AN051JW89VYKINDFAS","name":"Red Watch Case (5 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Red-Watch-Case-285-Blocks29-5309-011245-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"839","max_saving_percentage":"40","price":"1399"},{"sku":"IL760JW92TWTINDFAS","name":"Pink Watch Case","status":"active","brand":"ILINA","gender":"Men|Women","image":"http://static.jabong.com/p/ILINA-Pink-Watch-Case-3012-705938-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1049","max_saving_percentage":"30","price":"1499"},{"sku":"IL760BG84JITINDFAS","name":"Pink Watch Case","status":"active","brand":"ILINA","gender":"Men|Women","image":"http://static.jabong.com/p/ILINA-Pink-Watch-Case-1121-510615-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":"1399","max_saving_percentage":"30","price":"1999"},{"sku":"AN051BG27TUUINDFAS","name":"Black Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-3751-272186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"AN051JW66IBPINDFAS","name":"Pink Watch Case (12 Blocks)","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Pink-Watch-Case-2812-Blocks29-1649-330306-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"AN051BG28TUTINDFAS","name":"Multi Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Multi-Watch-Case-3340-172186-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW33BQGINDFAS","name":"Golden Faux Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Golden-Faux-Leather-Watch-Case-3545-668657-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1199"},{"sku":"DS226JW40JLBINDFAS","name":"Black Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black-Watch-Case-4738-952476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS333JW72ERFINDFAS","name":"Black/Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black2FRed-Watch-Case-6647-721064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1499"},{"sku":"DS333JW65ERMINDFAS","name":"Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red-Watch-Case-8945-431064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS333JW74ERDINDFAS","name":"Red/Black Watch Case (10 Blocks)","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red2FBlack-Watch-Case-2810-Blocks29-6637-521064-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW36BQDINDFAS","name":"Black Faux Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Black-Faux-Leather-Watch-Case-1470-368657-2","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"TZ329JW16MOHINDFAS","name":"Black Watch Case (10 Blocks)","status":"active","brand":"tZaro","gender":"Men","image":"http://static.jabong.com/p/tZaro-Black-Watch-Case-2810-Blocks29-5251-388744-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"},{"sku":"DS226JW39JLCINDFAS","name":"Brown Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Watch-Case-5004-062476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"AN051JW76BMTINDFAS","name":"Multi Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Multi-Watch-Case-9706-326127-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW38JLDINDFAS","name":"Brown Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Watch-Case-5022-162476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"AN051JW80BMPINDFAS","name":"Black Watch Case","status":"active","brand":"Anno Dominii","gender":"Men|Women","image":"http://static.jabong.com/p/Anno-Dominii-Black-Watch-Case-9502-916127-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW37JLEINDFAS","name":"Red Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Red-Watch-Case-5040-262476-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"2499"},{"sku":"DS226JW35BQEINDFAS","name":"Brown Leather Watch Case","status":"active","brand":"D'SIGNER","gender":"Men|Women","image":"http://static.jabong.com/p/D27SIGNER-Brown-Leather-Watch-Case-2628-468657-1","is_bundle_product":false,"bundle_details":{"text":"","html":""},"special_price":null,"max_saving_percentage":null,"price":"1999"}],"breadcrumb":[{"name":"Home","url":"/"},{"name":"Men","url":"/men/"},{"name":"Accessories","url":"/men/accessories/"},{"name":"Watch & Sunglass Cases","url":"/men/accessories/watch-sunglass-cases/"}],"getH1TagText":"Men Multi Types","non_exact_search":false,"mobapi_catalog_url":"men/accessories/watch-sunglass-cases/watch-cases/watch-cases/?sort=discount&dir=desc","pixelInfo":{"catid":["2","4357","4355","4368"],"subcat1id":"4357","subcat2id":"4355"}},"action_name":"index","recomm_url":"http://mobapi-integration1.jabongfashion.com/mobapi/recommendation?c=catalog&a=index&cat=4368&segment=men&page=1&pids=","ab_test":{"app_refine_filter_abtest":"b_80"}}}]]></con:value></con:property><con:property><con:name>is_reusable</con:name><con:value/></con:property><con:property><con:name>Segment</con:name><con:value>men</con:value></con:property><con:property><con:name>Category</con:name><con:value>accessories</con:value></con:property><con:property><con:name>SubCategory1</con:name><con:value>watch-sunglass-cases</con:value></con:property><con:property><con:name>SubCategory2</con:name><con:value>watch-cases</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false1001010.79{"default":{"bonus":10.79}}053.95Anno Dominii6017996FREE SIZEAN051JW88VYLINDFAS-154862410790#c00707542111AN051JW88VYLINDFASMon, 15th Jun6-9 days/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-3/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-falsefalse0anno-dominii-Red-Watch-Case-10-Blocks-542111.html40Red Watch Case (10 Blocks)11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001010.79{"default":{"bonus":10.79}}053.95Red Watch Case (10 Blocks)1799.001132.950.00AN051JW88VYLINDFAS-1548624000.001079.001079.006Anno DominiisizeSizeFREE SIZE1132.950AccessoriesWomen AccessoriesMen AccessoriesMen|Women0.000.000.000.000.000.001079.0053.95This is part of VAT/CST, deposited by Jabong to govt. For details refer FAQs.</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>574.0</con:value></con:property><con:property><con:name>productPrice</con:name><con:value>1279.0</con:value></con:property><con:property><con:name>subTotal</con:name><con:value>499.0</con:value></con:property><con:property><con:name>totalPrice</con:name><con:value>574.0</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>2000false1001011.99{"default":{"bonus":11.99}}059.95Anno Dominii6019996Free SizeAN051BG26TUVINDFAS-200494411990#ff1cae681273AN051BG26TUVINDFASTue, 16th Jun6-9 days/p/Anno-Dominii-Pink-Watch-Case-0810-372186-3/p/Anno-Dominii-Pink-Watch-Case-0810-372186-falsefalse0anno-dominii-Pink-Watch-Case-681273.html40Pink Watch Case11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001011.99{"default":{"bonus":11.99}}059.95Pink Watch Case1999.001258.950.00AN051BG26TUVINDFAS-2004944000.001199.001199.006Anno DominiisizeSizeFree Size000false1001010.79{"default":{"bonus":10.79}}053.95Anno Dominii6017996FREE SIZEAN051JW88VYLINDFAS-154862410790#c00707542111AN051JW88VYLINDFASTue, 16th Jun6-9 days/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-3/p/Anno-Dominii-Red-Watch-Case-2810-Blocks29-5347-111245-falsefalse1anno-dominii-Red-Watch-Case-10-Blocks-542111.html40Red Watch Case (10 Blocks)11Anno Dominii0012.500.00Watch &amp; Sunglass Cases00000false1001010.79{"default":{"bonus":10.79}}053.95Red Watch Case (10 Blocks)1799.001132.950.00AN051JW88VYLINDFAS-1548624000.001079.001079.006Anno DominiisizeSizeFREE SIZE2391.900AccessoriesWomen AccessoriesMen AccessoriesMen|WomenAccessoriesWomen AccessoriesMen AccessoriesMen|Women0.000.000.000.000.000.002278.00113.90This is part of VAT/CST, deposited by Jabong to govt. For details refer FAQs.</con:value></con:property><con:property><con:name>totalPrice_response</con:name><con:value>839.00.041.95</con:value></con:property><con:property><con:name>totalPriceresponse</con:name><con:value>1419.5599975585938</con:value></con:property><con:property><con:name>item_inCart</con:name><con:value>FR332MA26XIR-52672</con:value></con:property><con:property><con:name>itemprice</con:name><con:value>499.00</con:value></con:property><con:property><con:name>item_price</con:name><con:value>499.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of Given_User_Add_look(multiple products)_to_Cart" searchProperties="true" disabled="true" id="8d80e994-56c3-474e-88f0-bf931bc348e9"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="07e8fe16-372d-4469-8c38-67346a39b1ee"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user get list of SKUs with quantity which are not included in any STL" disabled="true" id="654945a0-d050-4eb9-aa2a-f06218d5f096"><con:settings/><con:config><script>String primary_sku;
String secondary_sku
String sku_simple
ArrayList&lt;String> config_id = new ArrayList&lt;String>();
ArrayList&lt;String> sku_simples = new ArrayList&lt;String>();

def resultSet = context.statement.executeQuery("""SELECT `catalog_shop_look`.
							`id_catalog_shop_look`, `catalog_shop_look`.`is_active`,
							`catalog_shop_look`.`url_key`, `catalog_shop_look`.`name`,
							`catalog_shop_look_detail`.`sku` AS `primary_sku`,
							(SELECT GROUP_CONCAT(sku) FROM catalog_shop_look_detail 
							WHERE catalog_shop_look_detail.fk_catalog_shop_look = 
							catalog_shop_look.id_catalog_shop_look AND 
							catalog_shop_look_detail.is_primary = 0 )
							AS secondary_skus , `catalog_shop_look_detail`.`created_at`
							FROM `catalog_shop_look` INNER JOIN `catalog_shop_look_detail`
							ON catalog_shop_look_detail.fk_catalog_shop_look = 
							catalog_shop_look.id_catalog_shop_look WHERE 
							(catalog_shop_look_detail.is_primary = 1) AND
							(catalog_shop_look.type = 0) ORDER BY `id_catalog_shop_look` 
							DESC limit 2""");

  while(resultSet.next()){
  primary_sku = resultSet.getString("primary_sku")
  secondary_sku = resultSet.getString("secondary_skus")
 break;
 
}

log.info "secondary_sku" +secondary_sku
log.info "primary_sku" +primary_sku


testRunner.testCase.setPropertyValue("primary_sku",primary_sku)
testRunner.testCase.setPropertyValue("secondary_sku",secondary_sku)


//def resultSetNew = context.statement.executeQuery("select id_catalog_config from catalog_config where sku IN('"+primary_sku+"','"+secondary_sku+"')");
//
//
//while(resultSetNew.next()){
//
//	config_id.add(resultSetNew.getString("id_catalog_config"));
//
//}
//
//int size = config_id.size();
//
//log.info "size" +size
//
//context.config_id = config_id;
//
//log.info "config_id" +config_id
//
//
//testRunner.testCase.testSuite.setPropertyValue("config_id", config_id.toString());
//
//
//def resultSetsku = context.statement.executeQuery("select sku from catalog_simple where fk_catalog_config = '"+config_id+"' ");
//
//
//
//while(resultSetsku.next()){
//
//	sku_simples.add(resultSetsku.getString("sku"));
//
//}
//
//context.sku_simples = sku_simples
//log.info "sku_simples" +sku_simples


//def resultSetNew = context.statement.executeQuery("""select cs.sku from catalog_simple AS cs 
										JOIN catalog_config as cc ON cs.fk_catalog_config = cc.id_catalog_config 
										where cc.sku IN('"""+primary_sku+"""' ,'"""+secondary_sku+"""') """ )  ;



while(resultSetNew.next()){

	sku_simple =resultSetNew.getString("sku");

}


log.info "sku_simple" +sku_simple
testRunner.testCase.setPropertyValue("sku_simple",sku_simple)




  



</script></con:config></con:testStep><con:testStep type="restrequest" name="REST Test Request" disabled="true" id="8ecf3e3c-4600-4819-9c2d-5f8694a41d16"><con:settings/><con:config service="JCartAddLook" resourcePath="/{version}/cart/look" methodName="Look" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Test Request" mediaType="application/json" postQueryString="false" id="f02f9455-e841-4d9c-ac49-e926974ea061"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "PrimarySku": "${#TestCase#primary_sku}",
  "SimpleSkus": [
    "${#TestCase#sku_simple}"
  ]
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart/look/v1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="316f8df6-fe44-4033-b3a5-79d6f969f4ec"><con:settings/><con:config><script>String primary_sku;
String secondary_sku
String sku_simple
ArrayList&lt;String> config_id = new ArrayList&lt;String>();
ArrayList&lt;String> sku_simples = new ArrayList&lt;String>();

def resultSet = context.statement.executeQuery("""SELECT `catalog_shop_look`.
							`id_catalog_shop_look`, `catalog_shop_look`.`is_active`,
							`catalog_shop_look`.`url_key`, `catalog_shop_look`.`name`,
							`catalog_shop_look_detail`.`sku` AS `primary_sku`,
							(SELECT GROUP_CONCAT(sku) FROM catalog_shop_look_detail 
							WHERE catalog_shop_look_detail.fk_catalog_shop_look = 
							catalog_shop_look.id_catalog_shop_look AND 
							catalog_shop_look_detail.is_primary = 0 )
							AS secondary_skus , `catalog_shop_look_detail`.`created_at`
							FROM `catalog_shop_look` INNER JOIN `catalog_shop_look_detail`
							ON catalog_shop_look_detail.fk_catalog_shop_look = 
							catalog_shop_look.id_catalog_shop_look WHERE 
							(catalog_shop_look_detail.is_primary = 1) AND
							(catalog_shop_look.type = 0) ORDER BY `id_catalog_shop_look` 
							DESC limit 2""");

  while(resultSet.next()){
  primary_sku = resultSet.getString("primary_sku")
  secondary_sku = resultSet.getString("secondary_skus")
 break;
 
}

log.info "secondary_sku" +secondary_sku
log.info "primary_sku" +primary_sku


testRunner.testCase.setPropertyValue("primary_sku",primary_sku)
testRunner.testCase.setPropertyValue("secondary_sku",secondary_sku)


def resultSetNew = context.statement.executeQuery("select id_catalog_config from catalog_config where sku IN('"+primary_sku+"','"+secondary_sku+"')");


while(resultSetNew.next()){

	config_id.add(resultSetNew.getString("id_catalog_config"));

}

//int size = config_id.size();

//log.info "size" +size

context.config_id = config_id;

log.info "config_id" +config_id

//
testRunner.testCase.testSuite.setPropertyValue("config_id", config_id.toString());


log.info "config_id value" +config_id


def resultSetSku = context.statement.executeQuery("select sku from catalog_simple where fk_catalog_config IN ('"+config_id[0]+"','"+config_id[1]+"') ");



while(resultSetSku.next()){

	sku_simples.add(resultSetSku.getString("sku"));

}

context.sku_simples = sku_simples
log.info "sku_simples values" +sku_simples


//def resultSetNew = context.statement.executeQuery("""select cs.sku from catalog_simple AS cs 
//										JOIN catalog_config as cc ON cs.fk_catalog_config = cc.id_catalog_config 
//										where cc.sku IN('"""+primary_sku+"""' ,'"""+secondary_sku+"""') """ )  ;



//while(resultSetNew.next()){
//
//	sku_simple =resultSetNew.getString("sku");
//
//}
//
//
//log.info "sku_simple" +sku_simple
//testRunner.testCase.setPropertyValue("sku_simple",sku_simple)
//
//
//
//
//  
//
//
//
</script></con:config></con:testStep><con:properties><con:property><con:name>Primary_sku</con:name><con:value>PE443BG59JVGINDFAS</con:value></con:property><con:property><con:name>Secondary_sku</con:name><con:value>PE443BG61JVEINDFAS</con:value></con:property><con:property><con:name>Second_Secondary_sku</con:name><con:value>PE443BG71JUUINDFAS</con:value></con:property><con:property><con:name>STL_name</con:name><con:value>DMIRrq</con:value></con:property><con:property><con:name>STL_url_key</con:name><con:value>yHWqRgPU</con:value></con:property><con:property><con:name>sku_simple</con:name><con:value>PE443BG61JVEINDFAS-4456452</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="serviceability" searchProperties="true" disabled="true" id="2bc254eb-1cea-4d9c-b244-ca1cbf8ed039"><con:settings/><con:testStep type="restrequest" name="REST Test Request" id="819585d6-5b61-4f27-9f90-2f3d1b965eb3"><con:settings/><con:config service="JCart-Serviceability" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="REST Test Request" mediaType="application/json" id="d26a5fab-bc52-4a8c-aee1-e854bfd709bc"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry><con:entry/></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>product-sku</con:name><con:value>DS333JW72ERFINDFAS</con:value></con:property><con:property><con:name>sku_simple</con:name><con:value>FR332MA26XIR-52672</con:value></con:property><con:property><con:name>sku</con:name><con:value>FR332MA26XIR</con:value></con:property><con:property><con:name>is_vat_charged</con:name><con:value>1</con:value></con:property><con:property><con:name>VATAmount</con:name><con:value>115.29</con:value></con:property><con:property><con:name>price</con:name><con:value>200</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>4144197</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>TW089WA86MGVINDFAS</con:value></con:property><con:property><con:name>product_sku_simple</con:name><con:value>TW089WA86MGVINDFAS-4144197</con:value></con:property><con:property><con:name>primary_product_id</con:name><con:value>1395140</con:value></con:property><con:property><con:name>secondary_product_id</con:name><con:value>1395138</con:value></con:property><con:property><con:name>second_secondary_product_id</con:name><con:value>1395128</con:value></con:property><con:property><con:name>primary_simple</con:name><con:value>4456454</con:value></con:property><con:property><con:name>primary_sku_simple</con:name><con:value>PE443BG59JVGINDFAS-4456454</con:value></con:property><con:property><con:name>secondary_simple</con:name><con:value>4456452</con:value></con:property><con:property><con:name>secondary_sku_simple</con:name><con:value>PE443BG61JVEINDFAS-4456452</con:value></con:property><con:property><con:name>config_id</con:name><con:value>[1395140, 1395138]</con:value></con:property></con:properties></con:testSuite><con:testSuite name="VerifyCorrectnessOfGiftWrapAPI" id="20ef4eee-2980-4123-aadb-f3b1fa985df2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reg_user_is_placing_order_with_giftwrappable_product" searchProperties="true" id="4dc646e0-e607-415c-8e90-e94514877b88"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" id="6aa4ffc5-7610-46f8-a622-04fe83f8395a" disabled="true"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Get Session ID" id="92e2f298-f44f-47f0-b763-c61f0a17df9a"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Create token" id="5e6e879f-743f-4806-a41a-7b588c8e8da4"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String token_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("token_id",token_id)


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="2fdc1580-2183-4964-a682-ccb05b0c7255"><con:settings/><con:config><script>String mobapiversion = testRunner.testCase.testSuite.project.getPropertyValue("MobApi_Version");
def mobApiLoginTestStep = testRunner.testCase.getTestStepByName("Then user login to the application");
def mobApiLoginTestStepNew = testRunner.testCase.getTestStepByName("Then user login to the application using latest mobapi version");
log.info mobapiversion
if(mobapiversion == "1.8"){
	log.info "Enabling MobApi v 1.8";
	log.info mobApiLoginTestStepNew.disabled
	mobApiLoginTestStepNew.setDisabled(false);
	mobApiLoginTestStep.setDisabled(true);
	/*if(mobApiLoginTestStepNew.disabled){
		mobApiLoginTestStepNew.setDisabled(false);
		if(!mobApiLoginTestStep.disabled){
			mobApiLoginTestStep.setDisabled(true);
		}
	}	*/
}
else{
	log.info "Enabling MobApi earlier version";
	mobApiLoginTestStepNew.setDisabled(true);
	mobApiLoginTestStep.setDisabled(false);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user login to the application" id="a85b9130-8fa1-4e95-87c0-53007ba5e160"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/JAuth-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
log.info "ABSOLUTE PATH-->>>"+absolute
if (!com.eviware.soapui.SoapUI.isStandalone()) 
// running in the ProUI
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    // running in the free version via testRunner.bat
    project = new WsdlProject(absolute)
}
myInterface = project.getInterfaceByName("JAuthManageUserAPIs")
myOperation = myInterface.getOperationByName("User Login")
myRequest = myOperation.getRequestByName("Request 1")
 
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsString()
// Get hold on JSON Response.


log.info "JAUTH -->>"+content
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(content);


def email = responseHolder.metadata.user.email.toString();

testRunner.testCase.testSuite.setPropertyValue("email",email);

//Capture id_customer of logged in user

def id_customer = responseHolder.metadata.user.id_customer.toString();

testRunner.testCase.testSuite.setPropertyValue("id_customer",id_customer);
testRunner.testCase.testSuite.project.setPropertyValue("user_id",id_customer);

//Capture logged in session id

String session = "session-id"
def LoggedInSession_ID = responseHolder."${session}".toString();

if(!LoggedInSession_ID.toString().equals(context.expand('${#Project#session_id}')))
	assert(false):"SESSION ID ASSERTION FAILURE : Session Id received After login is different from the one sent , Expected -- > "+context.expand('${#Project#session_id}')+" Actual -->"+LoggedInSession_ID

def id = context.expand('${#Project#session_id}')

assert(LoggedInSession_ID == id) : "Session id is mismatching"


}
catch(all){

assert(false):"Exception occurred: "+all	
}

</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user login to the application using latest mobapi version" id="c9d7314b-e090-4023-96a1-d617162c5578" disabled="true"><con:settings/><con:config service="MobApiVersion1.8" methodName="Method 1" resourcePath="/mobapi/customer/login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user login to the application using latest mobapi version" mediaType="application/x-www-form-urlencoded" postQueryString="false" id="f34210ca-9e19-4e81-8467-1c72dc78a304"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://${#Project#MobApi_endpoint}</con:endpoint><con:request>LoginForm[email]=${#TestCase#Email}&amp;LoginForm[password]=${#TestCase#Password}</con:request><con:originalUri>http://integration1.jabongfashion.com/mobapi/customer/login</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="712597f9-b900-4346-a858-0ceb477e774a"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="768ec6e6-e268-41cc-9411-8e17c9798e77"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",responseJsonHolder.session.id.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get all items added to cart" id="c3aba071-b6ba-4615-b85d-284ccabb96a7"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get all items added to cart" mediaType="application/json" id="f6bdb86e-7d18-4c1b-9455-5051a65c965c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="3abac72c-ce43-478e-bf47-afb4dab9f066"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then Remove All items added to cart" id="cbbefab8-5b5d-459e-9ecd-a03264d7413b"><con:settings/><con:config><script>int i = context.List_of_Product_in_Cart.size()
log.info "i-->"+i
for(int j = 0; j&lt; i ; j++){
	log.info context.List_of_Product_in_Cart.get(j).toString()
	testRunner.testCase.testSuite.setPropertyValue("product_sku_simple", context.List_of_Product_in_Cart.get(j).toString())
	testRunner.runTestStepByName("User_Can_Remove_Item_Added_To_Cart")
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Can_Remove_Item_Added_To_Cart" disabled="true" id="7e3cb09a-c35f-4cb4-9d79-8dc0181a93b7"><con:settings/><con:config service="JCartRemove" resourcePath="/v1/cart/{SimpleSku}" methodName="RemovefromCart" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Can_Remove_Item_Added_To_Cart" mediaType="application/json" postQueryString="false" id="e0303a0c-6881-4c33-8d2e-459ad1a1dd99"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "SimpleSku": ""
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="SimpleSku" value="${#TestSuite#product_sku_simple}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="User can fetch giftwrappable products from db" id="3d4c81a6-e993-4456-87cb-1437a4a2f696"><con:settings/><con:config><script>String str_sku_simple
def resultSet
resultSet = context.statement.executeQuery("""SELECT cs.sku,  
		(( SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = cs.id_catalog_simple ) - 
		( SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order 
		WHERE fk_sales_order_process IN ( select id_sales_order_process from sales_order_process) AND is_reserved = 1 AND 
		sales_order_item.sku = cs.sku)) AS quantity FROM catalog_simple cs JOIN catalog_config cc on cc.id_catalog_config=cs.fk_catalog_config
		WHERE cc.is_gift_wrappable=1 AND cc.status='active' AND cs.status='active' GROUP BY cs.fk_catalog_config
		HAVING (quantity IS NOT NULL AND quantity > 2) limit 10""");	

while(resultSet.next()){
	str_sku_simple = resultSet.getString("sku")
	log.info "ARTEMIS SKU RESPONSE"+str_sku_simple
}

testRunner.testCase.setPropertyValue("Product_Sku",str_sku_simple.split("-")[0])
testRunner.testCase.setPropertyValue("Product_Sku_Simple",str_sku_simple)
</script></con:config></con:testStep><con:testStep type="restrequest" name="And user add product to cart" id="5b8405cd-6b9a-4f96-92b9-6aa8a904806f"><con:settings/><con:config service="Add to cart from wishlist" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user add product to cart" mediaType="application/json" postQueryString="false" id="231ac3c0-9d70-45fe-bbe8-b13eeaf74981"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="${#Project#user_id}"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="79e2c04d-63d9-4d16-aea8-75b156c7a821"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1a393b8b-18cf-4397-a485-47db543c8724"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	log.info context.expand('${#TestCase#Product_Sku_Simple}') +":"+it.name().toString()
	if(it.name().toString().equals(context.expand('${#TestCase#Product_Sku_Simple}').toString())){
		bFlag = true;
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()
	}
	

}
assert(bFlag):"Product SKU still present in shortlist "+context.expand('${#TestCase#Product_Sku_Simple}')

assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("false")):"Giftwrap is applied already : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("0.00")):"Giftwrap charges are already applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then user will apply giftwrap" id="7c62e1e7-7a86-43a5-8b8d-5180ed2ad047"><con:settings/><con:config service="Giftwrap" resourcePath="/v1/giftwrap" methodName="Giftwrap" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user will apply giftwrap" mediaType="application/json" postQueryString="false" id="7140e7af-55dc-4435-bd84-389bac371919"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Message": "${#TestCase#Message}",
  "Occasion": "${#TestCase#Occasion}",
  "Recipient": "${#TestCase#Recipient}",
  "Sender": "${#TestCase#Sender}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/giftwrap</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="f5080e66-ca13-4fc0-9c62-bad31fd6023d"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1c5a28c9-4241-4c85-a9e4-ccca6f89bef8"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	log.info context.expand('${#TestCase#Product_Sku_Simple}') +":"+it.name().toString()
	if(it.name().toString().equals(context.expand('${#TestCase#Product_Sku_Simple}').toString())){
		bFlag = true;
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()
	}
	

}
assert(bFlag):"Product SKU still present in shortlist "+context.expand('${#TestCase#Product_Sku_Simple}')

assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("true")):"Giftwrap option is not applied : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges are not applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.giftwrap_message.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Message").toString())):"Giftwrap message on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.giftwrap_message.text()
assert(holder.metadata.gift_wrap_info.recipient.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Recipient").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.recipient.text()
assert(holder.metadata.gift_wrap_info.sender.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Sender").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.sender.text()
assert(holder.metadata.gift_wrap_info.occasion.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Occasion").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.occasion.text()
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="57a4832b-1374-4148-bf45-3a3c96ec6d1b"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.setPropertyValue("Sub_Total_At_cart",responseJsonHolder.metadata.total.sub_total.toString())
messageExchange.modelItem.testCase.setPropertyValue("Giftwrap_charges_At_cart",responseJsonHolder.metadata.total.gift_wrap_charges.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Payment API is called to verify COD visibility" id="de98cfe2-02cb-4ee0-ae86-bcb71802417b"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/Checkout-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone())
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    project = new WsdlProject(absolute)
}

myInterface = project.getInterfaceByName("PaymentMethods")
myOperation = myInterface.getOperationByName("PaymentMethods")
myRequest = myOperation.getRequestByName("Request 1")
 String endpoint = testRunner.testCase.testSuite.project.getPropertyValue("endpoint")
String checkout_endpoint = testRunner.testCase.testSuite.project.getPropertyValue("checkout_endpoint")

testRunner.testCase.testSuite.project.setPropertyValue("endpoint",checkout_endpoint)
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsXml()
log.info content
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
def holder = new XmlSlurper().parseText(content);
def mapForPaymentMethod = [:]
String strTitle
	holder.metadata.data.payment_options.depthFirst().each(){
		if(it.name().equals("id"))
			strTitle = it.text()+"_"
	 	if(it.name().equals("id") || it.name().equals("title") || it.name().equals("message") || it.name().equals("visibility") ){
	 		mapForPaymentMethod[strTitle+it.name()] = it.text()
	 	}
	 	
	 }
	
	testRunner.testCase.testSuite.project.setPropertyValue("Payment_options",mapForPaymentMethod.toString())
log.info testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	
}
catch(all){
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
assert(false):"Exception occurred: "+all
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate COD visibility" id="30137495-9e05-4028-9fcf-f7d13ab73af4"><con:settings/><con:config><script>boolean bFlag = false
def selectionMap = testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	for(String str : selectionMap.toString().split(",")){
		if(str.equals(" COD_visibility:0") || str.contains(" COD_message:")){
			bFlag = true
			break;
		}
	}
	if(!bFlag)
		assert(false):"COD VISIBILITY ASSERTION FAILURE : COD visibility is not 0 "</script></con:config></con:testStep><con:properties><con:property><con:name>segment</con:name><con:value>men</con:value></con:property><con:property><con:name>category</con:name><con:value>accessories</con:value></con:property><con:property><con:name>subcategory</con:name><con:value>sunglasses</con:value></con:property><con:property><con:name>specificselection</con:name><con:value>rectangle-frame</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>MI863WA26LDXINDFAS</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>MI863WA26LDXINDFAS-3342385</con:value></con:property><con:property><con:name>Message</con:name><con:value>Hi</con:value></con:property><con:property><con:name>Occasion</con:name><con:value>Default</con:value></con:property><con:property><con:name>Recipient</con:name><con:value>Automation Team</con:value></con:property><con:property><con:name>Sender</con:name><con:value>Jabong</con:value></con:property><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Sub_Total_At_cart</con:name><con:value>799.00</con:value></con:property><con:property><con:name>Giftwrap_charges_At_cart</con:name><con:value>30.00</con:value></con:property><con:property><con:name>Response_Internal</con:name><con:value><![CDATA[<Response xmlns="http://alice14.jabong.in/mobapi/checkout/cartToReviewOrder">
   <messages>
      <success>
         <e/>
      </success>
   </messages>
   <metadata>
      <address_count>1190</address_count>
      <delivery_time_msg>Please note that based on your shipping address, delivery time for your order has been updated. Your order will be delivered within 2-3 days.</delivery_time_msg>
      <disable_checkout>false</disable_checkout>
      <is_voucher_disabled>false</is_voucher_disabled>
      <jabong_credits>
         <credits_applied>0.00</credits_applied>
         <credits_available>5570.00</credits_available>
         <grand_total>2875.00</grand_total>
         <order_total_value_without_credits>2875.00</order_total_value_without_credits>
         <show_store_credit_block>true</show_store_credit_block>
         <total_store_credits>5570.00</total_store_credits>
      </jabong_credits>
      <order_items>
         <e>
            <brand>Casio</brand>
            <color>
               <Silver>#ecf1ef</Silver>
            </color>
            <delivery_date>Mon, 1st Jun</delivery_date>
            <delivery_time>2-3 days</delivery_time>
            <image>http://static.jabong.com/p/Casio-Enticer-Mtp-1191A-1Adf-Silver2FBlack-Analog-Watch-6167-69071-1-cart.jpg</image>
            <is_freebie>false</is_freebie>
            <is_pickup>false</is_pickup>
            <name>Enticer Mtp-1191A-1Adf Silver/Black Analog Watch</name>
            <price>2845</price>
            <quantity>1</quantity>
            <size>FREE SIZE</size>
            <sku>CA490JW03ZHO-56081</sku>
            <striked_price>2995</striked_price>
         </e>
      </order_items>
      <order_shipping_address>
         <address1>1ULvkxK3YF,</address1>
         <address2>Gurgaon - 122001</address2>
         <id>15380074</id>
         <name>hadphtvmjo</name>
         <phone>+91 5319345868</phone>
      </order_shipping_address>
      <order_total_block>
         <gift_wrap_charges>30.00</gift_wrap_charges>
         <shipping_charges>0.00</shipping_charges>
         <subtotal>2845.00</subtotal>
         <total>2875.00</total>
      </order_total_block>
      <payment_options>
         <e>
            <id>ExpressCheckout</id>
            <position>0</position>
            <title>Saved Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>COD</id>
            <message>
               <e>Cash on Delivery not available for orders with Gift Wrap</e>
            </message>
            <position>1</position>
            <title>Cash on Delivery</title>
            <visibility>0</visibility>
         </e>
         <e>
            <id>Netbanking</id>
            <position>2</position>
            <title>Net Banking</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>CreditCard</id>
            <position>3</position>
            <title>Credit Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>DebitCard</id>
            <position>4</position>
            <title>Debit Card</title>
            <visibility>1</visibility>
         </e>
      </payment_options>
      <reward_points>57</reward_points>
      <stored_card_details>
         <C>
            <e>
               <billingAddress>3855523</billingAddress>
               <cardCategory>C</cardCategory>
               <cardNumber>XXXXXXXXXXXX7018</cardNumber>
               <cardType>mastercard</cardType>
               <expiryDate>Expires on September 2015</expiryDate>
               <imageUrl>https://rocket:G9zqP2CFaotYQ@pay-integration1.jabongfashion.com/public/img/masterCard.jpg</imageUrl>
               <jabongToken>c28d0666da00f78c5809a13605e2c883620a6c97</jabongToken>
               <nameOnCard>MC</nameOnCard>
               <rank>1</rank>
            </e>
         </C>
      </stored_card_details>
      <user>
         <created_at>2014-11-06 16:25:48</created_at>
         <email>jabong.automation@gmail.com</email>
         <first_name>gbmslklogc</first_name>
         <gender>male</gender>
         <giftcard_credits_available>2332.33</giftcard_credits_available>
         <id_customer>11584369</id_customer>
         <is_confirmed>1</is_confirmed>
         <last_name>jabongm</last_name>
         <order_count>5967</order_count>
         <password>b1e84150a37e8d142d8ea78d98f44a802a6563da26f00f07f6666d027480f5c3</password>
         <phone>9662627992</phone>
         <store_credits_available>5570.00</store_credits_available>
         <total_store_credits>7902.33</total_store_credits>
      </user>
   </metadata>
   <server_flags>
      <webp_enabled>0</webp_enabled>
   </server_flags>
   <session>
      <YII_CSRF_TOKEN>f2797f767225583aa5424a10638baf6cfe6a27c2</YII_CSRF_TOKEN>
      <api_token>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</api_token>
      <app_cache_mt>
         <hpbr>850</hpbr>
         <md5>1427123847</md5>
         <menu>1427123847</menu>
         <segments>1427123847</segments>
         <stmsgv>1.0</stmsgv>
      </app_cache_mt>
      <expire null="true"/>
      <id>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</id>
      <is_loggedin>true</is_loggedin>
      <rpid null="true"/>
   </session>
   <success>true</success>
</Response>]]></con:value></con:property><con:property><con:name>Total_Cart_Value</con:name><con:value>2325.0</con:value></con:property><con:property><con:name>userDeviceType</con:name><con:value>mobile</con:value></con:property><con:property><con:name>utmSource</con:name><con:value/></con:property><con:property><con:name>utmCampaign</con:name><con:value/></con:property><con:property><con:name>isAgentCheckout</con:name><con:value>0</con:value></con:property><con:property><con:name>storecredit</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reg_user_is_placing_order_with_two_giftwrappable_products" searchProperties="true" id="79e02912-f06e-4812-9db7-266b1ef273ab"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" id="a878bd88-5477-4099-88fe-6924961f44ec" disabled="true"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Get Session ID" id="029951f4-056e-4cae-967a-2edcf803fb16"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id


</script></con:config></con:testStep><con:testStep type="groovy" name="Create Token" id="b6e100b3-7503-41d5-9cc4-6e201e609213"><con:settings/><con:config><script>
def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String token_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("token_id",token_id)


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="1d964c03-6cba-452e-a5c9-43b2db93c4e3"><con:settings/><con:config><script>String mobapiversion = testRunner.testCase.testSuite.project.getPropertyValue("MobApi_Version");
def mobApiLoginTestStep = testRunner.testCase.getTestStepByName("Then user login to the application");
def mobApiLoginTestStepNew = testRunner.testCase.getTestStepByName("Then user login to the application using latest mobapi version");
log.info mobapiversion
if(mobapiversion == "1.8"){
	log.info "Enabling MobApi v 1.8";
	log.info mobApiLoginTestStepNew.disabled
	mobApiLoginTestStepNew.setDisabled(false);
	mobApiLoginTestStep.setDisabled(true);
	/*if(mobApiLoginTestStepNew.disabled){
		mobApiLoginTestStepNew.setDisabled(false);
		if(!mobApiLoginTestStep.disabled){
			mobApiLoginTestStep.setDisabled(true);
		}
	}	*/
}
else{
	log.info "Enabling MobApi earlier version";
	mobApiLoginTestStepNew.setDisabled(true);
	mobApiLoginTestStep.setDisabled(false);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user login to the application" id="f011b680-d5a0-4e1b-86d6-a11dcefa4a93"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/JAuth-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
log.info "ABSOLUTE PATH-->>>"+absolute
if (!com.eviware.soapui.SoapUI.isStandalone()) 
// running in the ProUI
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    // running in the free version via testRunner.bat
    project = new WsdlProject(absolute)
}
myInterface = project.getInterfaceByName("JAuthManageUserAPIs")
myOperation = myInterface.getOperationByName("User Login")
myRequest = myOperation.getRequestByName("Request 1")
 
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsString()
// Get hold on JSON Response.



def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(content);


def email = responseHolder.metadata.user.email.toString();

testRunner.testCase.testSuite.setPropertyValue("email",email);

//Capture id_customer of logged in user

def id_customer = responseHolder.metadata.user.id_customer.toString();

testRunner.testCase.testSuite.setPropertyValue("id_customer",id_customer);

//Capture logged in session id

String session = "session-id"
def LoggedInSession_ID = responseHolder."${session}".toString();

if(!LoggedInSession_ID.toString().equals(context.expand('${#Project#session_id}')))
	assert(false):"SESSION ID ASSERTION FAILURE : Session Id received After login is different from the one sent , Expected -- > "+context.expand('${#Project#session_id}')+" Actual -->"+LoggedInSession_ID

def id = context.expand('${#Project#session_id}')

assert(LoggedInSession_ID == id) : "Session id is mismatching"


}
catch(all){

assert(false):"Exception occurred: "+all	
}

</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user login to the application using latest mobapi version" disabled="true" id="f3796c33-9af7-4628-8964-7587f694cc52"><con:settings/><con:config service="MobApiVersion1.8" methodName="Method 1" resourcePath="/mobapi/customer/login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user login to the application using latest mobapi version" mediaType="application/x-www-form-urlencoded" postQueryString="false" id="712cb749-cb7f-4518-b7ba-3dfc1a3624a2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://${#Project#MobApi_endpoint}</con:endpoint><con:request>LoginForm[email]=${#TestCase#Email}&amp;LoginForm[password]=${#TestCase#Password}</con:request><con:originalUri>http://integration1.jabongfashion.com/mobapi/customer/login</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="c340eaa0-5d30-402a-b0b3-0356572b5b27"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6aa47534-6c82-45aa-9d71-4ff25a1c0c7d"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",responseJsonHolder.session.id.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get all items added to cart" id="f266441e-ee7b-497e-9853-692c6d84be5a"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get all items added to cart" mediaType="application/json" id="f6bdb86e-7d18-4c1b-9455-5051a65c965c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="013869c7-7075-452a-afc4-5de733b85ff6"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then Remove All items added to cart" id="aa47b1f3-8c93-48f8-8b27-e9f3a4646076"><con:settings/><con:config><script>int i = context.List_of_Product_in_Cart.size()
log.info "i-->"+i
for(int j = 0; j&lt; i ; j++){
	log.info context.List_of_Product_in_Cart.get(j).toString()
	testRunner.testCase.testSuite.setPropertyValue("product_sku_simple", context.List_of_Product_in_Cart.get(j).toString())
	testRunner.runTestStepByName("User_Can_Remove_Item_Added_To_Cart")
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Can_Remove_Item_Added_To_Cart" disabled="true" id="93c7587d-0aec-4e3c-bc43-1444a5b3c6a9"><con:settings/><con:config service="JCartRemove" resourcePath="/v1/cart/{SimpleSku}" methodName="RemovefromCart" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Can_Remove_Item_Added_To_Cart" mediaType="application/json" postQueryString="false" id="f3c4c852-d302-4349-ad3b-57643d99a585"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "SimpleSku": ""
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="SimpleSku" value="${#TestSuite#product_sku_simple}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="User can fetch giftwrappable products from db" id="f7512db8-1486-4002-9783-7e94a994451e"><con:settings/><con:config><script>String str_sku_simple = ""
def resultSet
resultSet = context.statement.executeQuery("""SELECT cs.sku,  
		(( SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = cs.id_catalog_simple ) - 
		( SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order 
		WHERE fk_sales_order_process IN ( select id_sales_order_process from sales_order_process) AND is_reserved = 1 AND 
		sales_order_item.sku = cs.sku)) AS quantity FROM catalog_simple cs JOIN catalog_config cc on cc.id_catalog_config=cs.fk_catalog_config
		WHERE cc.is_gift_wrappable=1 AND cc.status='active' AND cs.status='active' GROUP BY cs.fk_catalog_config
		HAVING (quantity IS NOT NULL AND quantity > 2) limit 2""");	

while(resultSet.next()){
	str_sku_simple = str_sku_simple + resultSet.getString("sku") + ","
}
testRunner.testCase.setPropertyValue("Product_Sku_Simple_List",str_sku_simple)
for(String str : testRunner.testCase.getPropertyValue("Product_Sku_Simple_List").split(",")){
testRunner.testCase.setPropertyValue("Product_Sku",str.split("-")[0])
testRunner.testCase.setPropertyValue("Product_Sku_Simple",str)
	testRunner.runTestStepByName("And user add product to cart")
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="And user add product to cart" id="08938bf6-fc29-4d52-979b-67c2e49be70a"><con:settings/><con:config service="Add to cart from wishlist" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user add product to cart" mediaType="application/json" postQueryString="false" id="231ac3c0-9d70-45fe-bbe8-b13eeaf74981"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value=""/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="ab49416c-7129-48cc-9993-b72e57c384f9"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="11595064-c344-4edc-936a-b8571a988b9c"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()

	

}
assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("false")):"Giftwrap is applied already : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("0.00")):"Giftwrap charges are already applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then user will apply giftwrap" id="4f4f4d39-0ba8-423a-bb3a-03f62b469e9e"><con:settings/><con:config service="Giftwrap" resourcePath="/v1/giftwrap" methodName="Giftwrap" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user will apply giftwrap" mediaType="application/json" postQueryString="false" id="7140e7af-55dc-4435-bd84-389bac371919"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Message": "${#TestCase#Message}",
  "Occasion": "${#TestCase#Occasion}",
  "Recipient": "${#TestCase#Recipient}",
  "Sender": "${#TestCase#Sender}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/giftwrap</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="9a596d83-e9e9-4771-b938-b4a11e15688d"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7b5c623f-a55c-45c8-84bc-6f13fcd4bc9a"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	log.info context.expand('${#TestCase#Product_Sku_Simple}') +":"+it.name().toString()
	if(it.name().toString().equals(context.expand('${#TestCase#Product_Sku_Simple}').toString())){
		bFlag = true;
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()
	}
	

}
assert(bFlag):"Product SKU still present in shortlist "+context.expand('${#TestCase#Product_Sku_Simple}')

assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("true")):"Giftwrap option is not applied : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges are not applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.giftwrap_message.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Message").toString())):"Giftwrap message on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.giftwrap_message.text()
assert(holder.metadata.gift_wrap_info.recipient.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Recipient").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.recipient.text()
assert(holder.metadata.gift_wrap_info.sender.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Sender").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.sender.text()
assert(holder.metadata.gift_wrap_info.occasion.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Occasion").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.occasion.text()
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="f09f071b-71bb-40f9-b0f7-529e27cf7fa8"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.setPropertyValue("Sub_Total_At_cart",responseJsonHolder.metadata.total.sub_total.toString())
messageExchange.modelItem.testCase.setPropertyValue("Giftwrap_charges_At_cart",responseJsonHolder.metadata.total.gift_wrap_charges.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Payment API is called to verify COD visibility" id="7aeaebe1-a687-4f31-9f69-5f8a0b1720ea"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/Checkout-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone())
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    project = new WsdlProject(absolute)
}

myInterface = project.getInterfaceByName("PaymentMethods")
myOperation = myInterface.getOperationByName("PaymentMethods")
myRequest = myOperation.getRequestByName("Request 1")
 String endpoint = testRunner.testCase.testSuite.project.getPropertyValue("endpoint")
String checkout_endpoint = testRunner.testCase.testSuite.project.getPropertyValue("checkout_endpoint")

testRunner.testCase.testSuite.project.setPropertyValue("endpoint",checkout_endpoint)
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsXml()
log.info content
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
def holder = new XmlSlurper().parseText(content);
def mapForPaymentMethod = [:]
String strTitle
	holder.metadata.data.payment_options.depthFirst().each(){
		if(it.name().equals("id"))
			strTitle = it.text()+"_"
	 	if(it.name().equals("id") || it.name().equals("title") || it.name().equals("message") || it.name().equals("visibility") ){
	 		mapForPaymentMethod[strTitle+it.name()] = it.text()
	 	}
	 	
	 }
	
	testRunner.testCase.testSuite.project.setPropertyValue("Payment_options",mapForPaymentMethod.toString())
log.info testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	
}
catch(all){
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
assert(false):"Exception occurred: "+all
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate COD visibility" id="986df6e7-17ac-4b92-89c4-57a8da599f30"><con:settings/><con:config><script>boolean bFlag = false
def selectionMap = testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	for(String str : selectionMap.toString().split(",")){
		if(str.equals(" COD_visibility:0") || str.contains(" COD_message:")){
			bFlag = true
			break;
		}
	}
	if(!bFlag)
		assert(false):"COD VISIBILITY ASSERTION FAILURE : COD visibility is not 0 "</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user will remove giftwrap charges" id="77d47988-f4da-4edb-81e4-3d571800e99a"><con:settings/><con:config service="Giftwrap" resourcePath="/{version}/giftwrap" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user will remove giftwrap charges" mediaType="application/json" id="bd377f28-b8b4-4241-87b6-83a4ce65bac6"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/giftwrap</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e4ede9fe-c140-425a-b122-c682674d0424"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);
assert(responseHolder.success == true):"Giftwrap charges are not removed"
assert(responseHolder.messages.success[0].toString().equals("Gift Wrap removed successfully")):"Gift Wrap did not remove successfully"</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call payment method API post removing Giftwrap charges" id="713e516a-957d-413d-b52f-3c0bbb3f7b09"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/Checkout-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone())
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    project = new WsdlProject(absolute)
}

myInterface = project.getInterfaceByName("PaymentMethods")
myOperation = myInterface.getOperationByName("PaymentMethods")
myRequest = myOperation.getRequestByName("Request 1")
 String endpoint = testRunner.testCase.testSuite.project.getPropertyValue("endpoint")
String checkout_endpoint = testRunner.testCase.testSuite.project.getPropertyValue("checkout_endpoint")

testRunner.testCase.testSuite.project.setPropertyValue("endpoint",checkout_endpoint)
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsXml()
log.info content
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
def holder = new XmlSlurper().parseText(content);
def mapForPaymentMethod = [:]
String strTitle
	holder.metadata.data.payment_options.depthFirst().each(){
		if(it.name().equals("id"))
			strTitle = it.text()+"_"
	 	if(it.name().equals("id") || it.name().equals("title") || it.name().equals("message") || it.name().equals("visibility") ){
	 		mapForPaymentMethod[strTitle+it.name()] = it.text()
	 	}
	 	
	 }
	
	testRunner.testCase.testSuite.project.setPropertyValue("Payment_options",mapForPaymentMethod.toString())
log.info testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	
}
catch(all){
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
assert(false):"Exception occurred: "+all
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate COD visibility post removing giftwrap charges" id="b17cd462-97ea-4147-8af5-5a59389aaf10"><con:settings/><con:config><script>boolean bFlag = false
def selectionMap = testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	for(String str : selectionMap.toString().split(",")){
		if(str.equals(" COD_visibility:1") || str.contains(" COD_message:Cash on Delivery not available for the chosen pincode")){
			bFlag = true
			break;
		}
	}
	if(!bFlag)
		assert(false):"COD VISIBILITY ASSERTION FAILURE : COD visibility is not 1 after removing gift wrap "</script></con:config></con:testStep><con:properties><con:property><con:name>segment</con:name><con:value>men</con:value></con:property><con:property><con:name>category</con:name><con:value>accessories</con:value></con:property><con:property><con:name>subcategory</con:name><con:value>sunglasses</con:value></con:property><con:property><con:name>specificselection</con:name><con:value>rectangle-frame</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>MI863WA26LDXINDFAS</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>MI863WA26LDXINDFAS-3342385</con:value></con:property><con:property><con:name>Message</con:name><con:value>Hi</con:value></con:property><con:property><con:name>Occasion</con:name><con:value>Default</con:value></con:property><con:property><con:name>Recipient</con:name><con:value>Automation Team</con:value></con:property><con:property><con:name>Sender</con:name><con:value>Jabong</con:value></con:property><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Sub_Total_At_cart</con:name><con:value>799.00</con:value></con:property><con:property><con:name>Giftwrap_charges_At_cart</con:name><con:value>30.00</con:value></con:property><con:property><con:name>Response_Internal</con:name><con:value><![CDATA[<Response xmlns="http://alice14.jabong.in/mobapi/checkout/cartToReviewOrder">
   <messages>
      <success>
         <e/>
      </success>
   </messages>
   <metadata>
      <address_count>1190</address_count>
      <delivery_time_msg>Please note that based on your shipping address, delivery time for your order has been updated. Your order will be delivered within 2-3 days.</delivery_time_msg>
      <disable_checkout>false</disable_checkout>
      <is_voucher_disabled>false</is_voucher_disabled>
      <jabong_credits>
         <credits_applied>0.00</credits_applied>
         <credits_available>5570.00</credits_available>
         <grand_total>2875.00</grand_total>
         <order_total_value_without_credits>2875.00</order_total_value_without_credits>
         <show_store_credit_block>true</show_store_credit_block>
         <total_store_credits>5570.00</total_store_credits>
      </jabong_credits>
      <order_items>
         <e>
            <brand>Casio</brand>
            <color>
               <Silver>#ecf1ef</Silver>
            </color>
            <delivery_date>Mon, 1st Jun</delivery_date>
            <delivery_time>2-3 days</delivery_time>
            <image>http://static.jabong.com/p/Casio-Enticer-Mtp-1191A-1Adf-Silver2FBlack-Analog-Watch-6167-69071-1-cart.jpg</image>
            <is_freebie>false</is_freebie>
            <is_pickup>false</is_pickup>
            <name>Enticer Mtp-1191A-1Adf Silver/Black Analog Watch</name>
            <price>2845</price>
            <quantity>1</quantity>
            <size>FREE SIZE</size>
            <sku>CA490JW03ZHO-56081</sku>
            <striked_price>2995</striked_price>
         </e>
      </order_items>
      <order_shipping_address>
         <address1>1ULvkxK3YF,</address1>
         <address2>Gurgaon - 122001</address2>
         <id>15380074</id>
         <name>hadphtvmjo</name>
         <phone>+91 5319345868</phone>
      </order_shipping_address>
      <order_total_block>
         <gift_wrap_charges>30.00</gift_wrap_charges>
         <shipping_charges>0.00</shipping_charges>
         <subtotal>2845.00</subtotal>
         <total>2875.00</total>
      </order_total_block>
      <payment_options>
         <e>
            <id>ExpressCheckout</id>
            <position>0</position>
            <title>Saved Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>COD</id>
            <message>
               <e>Cash on Delivery not available for orders with Gift Wrap</e>
            </message>
            <position>1</position>
            <title>Cash on Delivery</title>
            <visibility>0</visibility>
         </e>
         <e>
            <id>Netbanking</id>
            <position>2</position>
            <title>Net Banking</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>CreditCard</id>
            <position>3</position>
            <title>Credit Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>DebitCard</id>
            <position>4</position>
            <title>Debit Card</title>
            <visibility>1</visibility>
         </e>
      </payment_options>
      <reward_points>57</reward_points>
      <stored_card_details>
         <C>
            <e>
               <billingAddress>3855523</billingAddress>
               <cardCategory>C</cardCategory>
               <cardNumber>XXXXXXXXXXXX7018</cardNumber>
               <cardType>mastercard</cardType>
               <expiryDate>Expires on September 2015</expiryDate>
               <imageUrl>https://rocket:G9zqP2CFaotYQ@pay-integration1.jabongfashion.com/public/img/masterCard.jpg</imageUrl>
               <jabongToken>c28d0666da00f78c5809a13605e2c883620a6c97</jabongToken>
               <nameOnCard>MC</nameOnCard>
               <rank>1</rank>
            </e>
         </C>
      </stored_card_details>
      <user>
         <created_at>2014-11-06 16:25:48</created_at>
         <email>jabong.automation@gmail.com</email>
         <first_name>gbmslklogc</first_name>
         <gender>male</gender>
         <giftcard_credits_available>2332.33</giftcard_credits_available>
         <id_customer>11584369</id_customer>
         <is_confirmed>1</is_confirmed>
         <last_name>jabongm</last_name>
         <order_count>5967</order_count>
         <password>b1e84150a37e8d142d8ea78d98f44a802a6563da26f00f07f6666d027480f5c3</password>
         <phone>9662627992</phone>
         <store_credits_available>5570.00</store_credits_available>
         <total_store_credits>7902.33</total_store_credits>
      </user>
   </metadata>
   <server_flags>
      <webp_enabled>0</webp_enabled>
   </server_flags>
   <session>
      <YII_CSRF_TOKEN>f2797f767225583aa5424a10638baf6cfe6a27c2</YII_CSRF_TOKEN>
      <api_token>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</api_token>
      <app_cache_mt>
         <hpbr>850</hpbr>
         <md5>1427123847</md5>
         <menu>1427123847</menu>
         <segments>1427123847</segments>
         <stmsgv>1.0</stmsgv>
      </app_cache_mt>
      <expire null="true"/>
      <id>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</id>
      <is_loggedin>true</is_loggedin>
      <rpid null="true"/>
   </session>
   <success>true</success>
</Response>]]></con:value></con:property><con:property><con:name>Product_Sku_Non_giftwrappable</con:name><con:value>PE655JW73SDE</con:value></con:property><con:property><con:name>Product_Sku_Simple_Non_giftwrappable</con:name><con:value>PE655JW73SDE-97231</con:value></con:property><con:property><con:name>Product_Sku_Simple_List</con:name><con:value>TO179SH92FIT-12707,FR332MA25XIS-52675,</con:value></con:property><con:property><con:name>Total_Amount</con:name><con:value>2146.0</con:value></con:property><con:property><con:name>userDeviceType</con:name><con:value>mobile</con:value></con:property><con:property><con:name>utmSource</con:name><con:value/></con:property><con:property><con:name>utmCampaign</con:name><con:value/></con:property><con:property><con:name>isAgentCheckout</con:name><con:value>0</con:value></con:property><con:property><con:name>storecredit</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reg_user_is_placing_order_when_giftwrappable_product_is_removed" searchProperties="true" id="20d35127-6f75-4846-ae3c-c0c2e8da1c2f"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" id="749c4df1-3675-42fe-89ea-1e5d7d233061" disabled="true"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Get Session ID" id="bd0c3d8d-3249-48b0-a23f-c2b6cf2854d5"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id


</script></con:config></con:testStep><con:testStep type="groovy" name="Create token" id="cee4084a-ba51-44a4-988d-142663c89b93"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String token_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("token_id",token_id)


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="8d07591e-0556-4ed7-a68c-cba78d221972"><con:settings/><con:config><script>String mobapiversion = testRunner.testCase.testSuite.project.getPropertyValue("MobApi_Version");
def mobApiLoginTestStep = testRunner.testCase.getTestStepByName("Then user login to the application");
def mobApiLoginTestStepNew = testRunner.testCase.getTestStepByName("Then user login to the application using latest mobapi version");
log.info mobapiversion
if(mobapiversion == "1.8"){
	log.info "Enabling MobApi v 1.8";
	log.info mobApiLoginTestStepNew.disabled
	mobApiLoginTestStepNew.setDisabled(false);
	mobApiLoginTestStep.setDisabled(true);
	/*if(mobApiLoginTestStepNew.disabled){
		mobApiLoginTestStepNew.setDisabled(false);
		if(!mobApiLoginTestStep.disabled){
			mobApiLoginTestStep.setDisabled(true);
		}
	}	*/
}
else{
	log.info "Enabling MobApi earlier version";
	mobApiLoginTestStepNew.setDisabled(true);
	mobApiLoginTestStep.setDisabled(false);
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user login to the application" id="793722c8-a12d-452e-adc0-8be093769647"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/JAuth-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone()) 
// running in the ProUI
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    // running in the free version via testRunner.bat
    project = new WsdlProject(absolute)
}
myInterface = project.getInterfaceByName("JAuthManageUserAPIs")
myOperation = myInterface.getOperationByName("User Login")
myRequest = myOperation.getRequestByName("Request 1")
 
def context = testRunner.getRunContext()
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsString()
log.info "JAUTH -->>"+content
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(content);


def email = responseHolder.metadata.user.email.toString();

testRunner.testCase.testSuite.setPropertyValue("email",email);

//Capture id_customer of logged in user

def id_customer = responseHolder.metadata.user.id_customer.toString();

testRunner.testCase.testSuite.setPropertyValue("id_customer",id_customer);

//Capture logged in session id

String session = "session-id"
def LoggedInSession_ID = responseHolder."${session}".toString();

if(!LoggedInSession_ID.toString().equals(context.expand('${#Project#session_id}')))
	assert(false):"SESSION ID ASSERTION FAILURE : Session Id received After login is different from the one sent , Expected -- > "+context.expand('${#Project#session_id}')+" Actual -->"+LoggedInSession_ID

def id = context.expand('${#Project#session_id}')

assert(LoggedInSession_ID == id) : "Session id is mismatching"


}
catch(all){

assert(false):"Exception occurred: "+all	
}

</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user login to the application using latest mobapi version" disabled="true" id="adef1a8a-0d66-4beb-813e-2206c78c8fe6"><con:settings/><con:config service="MobApiVersion1.8" methodName="Method 1" resourcePath="/mobapi/customer/login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user login to the application using latest mobapi version" mediaType="application/x-www-form-urlencoded" postQueryString="false" id="f4e7b2e1-edec-4dfb-9f69-dc95b723606a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://${#Project#MobApi_endpoint}</con:endpoint><con:request>LoginForm[email]=${#TestCase#Email}&amp;LoginForm[password]=${#TestCase#Password}</con:request><con:originalUri>http://integration1.jabongfashion.com/mobapi/customer/login</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="4b25efa9-adeb-43dc-9043-a3f950c9c2fc"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f039bb30-08d1-4fc8-8e6b-17c623b06b7b"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",responseJsonHolder.session.id.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get all items added to cart" id="d04d92f1-3859-4b07-a207-7483078ce0a7"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get all items added to cart" mediaType="application/json" id="f6bdb86e-7d18-4c1b-9455-5051a65c965c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c73b5dab-242d-4178-b3db-1098ca55a663"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then Remove All items added to cart" id="4ec95d41-f19e-458b-991d-3ff5193a4260"><con:settings/><con:config><script>int i = context.List_of_Product_in_Cart.size()
log.info "i-->"+i
for(int j = 0; j&lt; i ; j++){
	log.info context.List_of_Product_in_Cart.get(j).toString()
	testRunner.testCase.testSuite.setPropertyValue("product_sku_simple", context.List_of_Product_in_Cart.get(j).toString())
	testRunner.runTestStepByName("User_Can_Remove_Item_Added_To_Cart")
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Can_Remove_Item_Added_To_Cart" disabled="true" id="61b01f5f-4f42-4ff0-ac7a-7e7f21bd6afe"><con:settings/><con:config service="JCartRemove" resourcePath="/v1/cart/{SimpleSku}" methodName="RemovefromCart" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Can_Remove_Item_Added_To_Cart" mediaType="application/json" postQueryString="false" id="ebb5d3d0-81c2-4164-b0ff-83d76688f15b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "SimpleSku": ""
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="SimpleSku" value="${#TestSuite#product_sku_simple}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="User can fetch giftwrappable products from db" id="27283060-b05c-442c-991f-c5370d5925d5"><con:settings/><con:config><script>String str_sku_simple
def resultSet
resultSet = context.statement.executeQuery("""SELECT cs.sku,  
		(( SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = cs.id_catalog_simple ) - 
		( SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON fk_sales_order = id_sales_order 
		WHERE fk_sales_order_process IN ( select id_sales_order_process from sales_order_process) AND is_reserved = 1 AND 
		sales_order_item.sku = cs.sku)) AS quantity FROM catalog_simple cs JOIN catalog_config cc on cc.id_catalog_config=cs.fk_catalog_config
		WHERE cc.is_gift_wrappable=1 AND cc.status='active' AND cs.status='active' GROUP BY cs.fk_catalog_config
		HAVING (quantity IS NOT NULL AND quantity > 2) limit 10""");	

while(resultSet.next()){
	str_sku_simple = resultSet.getString("sku")
}

testRunner.testCase.setPropertyValue("Product_Sku",str_sku_simple.split("-")[0])
testRunner.testCase.setPropertyValue("Product_Sku_Simple",str_sku_simple)
</script></con:config></con:testStep><con:testStep type="restrequest" name="And user add product to cart" id="3a80581f-56a1-44ff-a0df-4f3e9eb2e573"><con:settings/><con:config service="Add to cart from wishlist" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user add product to cart" mediaType="application/json" postQueryString="false" id="231ac3c0-9d70-45fe-bbe8-b13eeaf74981"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="${#Project#user_id}"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestCase#Product_Sku_Simple}",
  "Sku": "${#TestCase#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="80121260-1f5e-4715-99c0-3a16bb9e8c65"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="09ba99ef-383a-4982-b1fa-335989849029"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	log.info context.expand('${#TestCase#Product_Sku_Simple}') +":"+it.name().toString()
	if(it.name().toString().equals(context.expand('${#TestCase#Product_Sku_Simple}').toString())){
		bFlag = true;
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()
	}
	

}
assert(bFlag):"Product SKU still present in shortlist "+context.expand('${#TestCase#Product_Sku_Simple}')

assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("false")):"Giftwrap is applied already : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("0.00")):"Giftwrap charges are already applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then user will apply giftwrap" id="345f31d6-2971-4f37-acbd-50e92382a55c"><con:settings/><con:config service="Giftwrap" resourcePath="/v1/giftwrap" methodName="Giftwrap" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user will apply giftwrap" mediaType="application/json" postQueryString="false" id="7140e7af-55dc-4435-bd84-389bac371919"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Message": "${#TestCase#Message}",
  "Occasion": "${#TestCase#Occasion}",
  "Recipient": "${#TestCase#Recipient}",
  "Sender": "${#TestCase#Sender}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/giftwrap</con:originalUri><con:assertion type="Simple Contains" name="Contains" id="9a596d83-e9e9-4771-b938-b4a11e15688d"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7b5c623f-a55c-45c8-84bc-6f13fcd4bc9a"><con:configuration><scriptText>import groovy.json.JsonSlurper;
boolean bFlag = false
String response = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(response);
holder.metadata.cartItems.non_bundle.item_list.children().each(){
	log.info context.expand('${#TestCase#Product_Sku_Simple}') +":"+it.name().toString()
	if(it.name().toString().equals(context.expand('${#TestCase#Product_Sku_Simple}').toString())){
		bFlag = true;
		assert(it.additional_info.is_gift_wrapped.text().toString().equals("1")):"Giftwrap Flag is not true : VALUE RECEIVED -->"+it.additional_info.is_gift_wrapped.text()+"for product "+it.name()
	}
	

}
assert(bFlag):"Product SKU still present in shortlist "+context.expand('${#TestCase#Product_Sku_Simple}')

assert(holder.metadata.gift_wrap_info.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges differs with the expected one : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.isGiftWrapped.text().toString().equals("true")):"Giftwrap option is not applied : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.isGiftWrapped.text()
assert(holder.metadata.total.gift_wrap_charges.text().toString().equals("30.00")):"Giftwrap charges are not applied : VALUE RECEIVED -->"+holder.metadata.total.gift_wrap_charges.text()
assert(holder.metadata.gift_wrap_info.giftwrap_message.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Message").toString())):"Giftwrap message on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.giftwrap_message.text()
assert(holder.metadata.gift_wrap_info.recipient.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Recipient").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.recipient.text()
assert(holder.metadata.gift_wrap_info.sender.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Sender").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.sender.text()
assert(holder.metadata.gift_wrap_info.occasion.text().toString().equals(messageExchange.modelItem.testCase.getPropertyValue("Occasion").toString())):"Giftwrap Recipient on product is not as per the passed input : VALUE RECEIVED -->"+holder.metadata.gift_wrap_info.occasion.text()
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="f09f071b-71bb-40f9-b0f7-529e27cf7fa8"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseJsonHolder = slurper.parseText(response);
messageExchange.modelItem.testCase.setPropertyValue("Sub_Total_At_cart",responseJsonHolder.metadata.total.sub_total.toString())
messageExchange.modelItem.testCase.setPropertyValue("Giftwrap_charges_At_cart",responseJsonHolder.metadata.total.gift_wrap_charges.toString())</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Payment API is called to verify COD visibility" id="a2e5f6e6-b7fe-4396-8db9-98e5689c581a"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/Checkout-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone())
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    project = new WsdlProject(absolute)
}

myInterface = project.getInterfaceByName("PaymentMethods")
myOperation = myInterface.getOperationByName("PaymentMethods")
myRequest = myOperation.getRequestByName("Request 1")
 String endpoint = testRunner.testCase.testSuite.project.getPropertyValue("endpoint")
String checkout_endpoint = testRunner.testCase.testSuite.project.getPropertyValue("checkout_endpoint")

testRunner.testCase.testSuite.project.setPropertyValue("endpoint",checkout_endpoint)
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsXml()
log.info content
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
def holder = new XmlSlurper().parseText(content);
def mapForPaymentMethod = [:]
String strTitle
	holder.metadata.data.payment_options.depthFirst().each(){
		if(it.name().equals("id"))
			strTitle = it.text()+"_"
	 	if(it.name().equals("id") || it.name().equals("title") || it.name().equals("message") || it.name().equals("visibility") ){
	 		mapForPaymentMethod[strTitle+it.name()] = it.text()
	 	}
	 	
	 }
	
	testRunner.testCase.testSuite.project.setPropertyValue("Payment_options",mapForPaymentMethod.toString())
log.info testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	
}
catch(all){
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
assert(false):"Exception occurred: "+all
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate COD visibility" id="e84c37ef-a84a-4d1b-bb59-e0f5b90b5e26"><con:settings/><con:config><script>boolean bFlag = false
def selectionMap = testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	for(String str : selectionMap.toString().split(",")){
		if(str.equals(" COD_visibility:0") || str.contains(" COD_message:")){
			bFlag = true
			break;
		}
	}
	if(!bFlag)
		assert(false):"COD VISIBILITY ASSERTION FAILURE : COD visibility is not 0 "</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user will remove giftwrap charges" id="5089e9fc-c6c8-4288-a297-0b9c2aebc80d"><con:settings/><con:config service="Giftwrap" resourcePath="/{version}/giftwrap" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user will remove giftwrap charges" mediaType="application/json" id="bd377f28-b8b4-4241-87b6-83a4ce65bac6"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/giftwrap</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d5cf80d0-6b44-4846-b491-e8c2fd1f16cc"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);
assert(responseHolder.success == true):"Giftwrap charges are not removed"
assert(responseHolder.messages.success[0].toString().equals("Gift Wrap removed successfully")):"Gift Wrap did not remove successfully"</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Call payment method API post removing Giftwrap charges" id="1699cd78-6498-4452-80ac-0f2effe94a97"><con:settings/><con:config><script>import com.eviware.soapui.support.types.StringToStringsMap 
import com.eviware.soapui.impl.wsdl.WsdlProject

import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;
import java.io.File
try{

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def thisProjectDir = groovyUtils.projectPath
File f = new File(thisProjectDir, "/Checkout-IntegrationTests.xml");

String absolute = f.getCanonicalPath()
if (!com.eviware.soapui.SoapUI.isStandalone())
{
    project = Class.forName("com.eviware.soapui.impl.wsdl.WsdlProjectPro").newInstance(absolute);
}
else {
    project = new WsdlProject(absolute)
}

myInterface = project.getInterfaceByName("PaymentMethods")
myOperation = myInterface.getOperationByName("PaymentMethods")
myRequest = myOperation.getRequestByName("Request 1")
 String endpoint = testRunner.testCase.testSuite.project.getPropertyValue("endpoint")
String checkout_endpoint = testRunner.testCase.testSuite.project.getPropertyValue("checkout_endpoint")

testRunner.testCase.testSuite.project.setPropertyValue("endpoint",checkout_endpoint)
// get the context
def context = testRunner.getRunContext()
// send the request synchronous
submitted = myRequest.submit(context,false)
def response = submitted.getResponse()
def content = response.getContentAsXml()
log.info content
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
def holder = new XmlSlurper().parseText(content);
def mapForPaymentMethod = [:]
String strTitle
	holder.metadata.data.payment_options.depthFirst().each(){
		if(it.name().equals("id"))
			strTitle = it.text()+"_"
	 	if(it.name().equals("id") || it.name().equals("title") || it.name().equals("message") || it.name().equals("visibility") ){
	 		mapForPaymentMethod[strTitle+it.name()] = it.text()
	 	}
	 	
	 }
	
	testRunner.testCase.testSuite.project.setPropertyValue("Payment_options",mapForPaymentMethod.toString())
log.info testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	
}
catch(all){
testRunner.testCase.testSuite.project.setPropertyValue("endpoint",endpoint)
assert(false):"Exception occurred: "+all
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Validate COD visibility post removing giftwrap charges" id="9be1be11-fa0f-47f6-9c6a-3b6c6a7f67ec"><con:settings/><con:config><script>boolean bFlag = false
def selectionMap = testRunner.testCase.testSuite.project.getPropertyValue("Payment_options")
	for(String str : selectionMap.toString().split(",")){
		if(str.equals(" COD_visibility:1") || str.contains(" COD_message:Cash on Delivery not available for the chosen pincode")){
			bFlag = true
			break;
		}
	}
	if(!bFlag)
		assert(false):"COD VISIBILITY ASSERTION FAILURE : COD visibility is not 1 after removing gift wrap "</script></con:config></con:testStep><con:properties><con:property><con:name>segment</con:name><con:value>men</con:value></con:property><con:property><con:name>category</con:name><con:value>accessories</con:value></con:property><con:property><con:name>subcategory</con:name><con:value>sunglasses</con:value></con:property><con:property><con:name>specificselection</con:name><con:value>rectangle-frame</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>MI863WA26LDXINDFAS</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>MI863WA26LDXINDFAS-3342385</con:value></con:property><con:property><con:name>Message</con:name><con:value>Hi</con:value></con:property><con:property><con:name>Occasion</con:name><con:value>Default</con:value></con:property><con:property><con:name>Recipient</con:name><con:value>Automation Team</con:value></con:property><con:property><con:name>Sender</con:name><con:value>Jabong</con:value></con:property><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Sub_Total_At_cart</con:name><con:value>799.00</con:value></con:property><con:property><con:name>Giftwrap_charges_At_cart</con:name><con:value>30.00</con:value></con:property><con:property><con:name>Response_Internal</con:name><con:value><![CDATA[<Response xmlns="http://alice14.jabong.in/mobapi/checkout/cartToReviewOrder">
   <messages>
      <success>
         <e/>
      </success>
   </messages>
   <metadata>
      <address_count>1190</address_count>
      <delivery_time_msg>Please note that based on your shipping address, delivery time for your order has been updated. Your order will be delivered within 2-3 days.</delivery_time_msg>
      <disable_checkout>false</disable_checkout>
      <is_voucher_disabled>false</is_voucher_disabled>
      <jabong_credits>
         <credits_applied>0.00</credits_applied>
         <credits_available>5570.00</credits_available>
         <grand_total>2875.00</grand_total>
         <order_total_value_without_credits>2875.00</order_total_value_without_credits>
         <show_store_credit_block>true</show_store_credit_block>
         <total_store_credits>5570.00</total_store_credits>
      </jabong_credits>
      <order_items>
         <e>
            <brand>Casio</brand>
            <color>
               <Silver>#ecf1ef</Silver>
            </color>
            <delivery_date>Mon, 1st Jun</delivery_date>
            <delivery_time>2-3 days</delivery_time>
            <image>http://static.jabong.com/p/Casio-Enticer-Mtp-1191A-1Adf-Silver2FBlack-Analog-Watch-6167-69071-1-cart.jpg</image>
            <is_freebie>false</is_freebie>
            <is_pickup>false</is_pickup>
            <name>Enticer Mtp-1191A-1Adf Silver/Black Analog Watch</name>
            <price>2845</price>
            <quantity>1</quantity>
            <size>FREE SIZE</size>
            <sku>CA490JW03ZHO-56081</sku>
            <striked_price>2995</striked_price>
         </e>
      </order_items>
      <order_shipping_address>
         <address1>1ULvkxK3YF,</address1>
         <address2>Gurgaon - 122001</address2>
         <id>15380074</id>
         <name>hadphtvmjo</name>
         <phone>+91 5319345868</phone>
      </order_shipping_address>
      <order_total_block>
         <gift_wrap_charges>30.00</gift_wrap_charges>
         <shipping_charges>0.00</shipping_charges>
         <subtotal>2845.00</subtotal>
         <total>2875.00</total>
      </order_total_block>
      <payment_options>
         <e>
            <id>ExpressCheckout</id>
            <position>0</position>
            <title>Saved Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>COD</id>
            <message>
               <e>Cash on Delivery not available for orders with Gift Wrap</e>
            </message>
            <position>1</position>
            <title>Cash on Delivery</title>
            <visibility>0</visibility>
         </e>
         <e>
            <id>Netbanking</id>
            <position>2</position>
            <title>Net Banking</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>CreditCard</id>
            <position>3</position>
            <title>Credit Card</title>
            <visibility>1</visibility>
         </e>
         <e>
            <id>DebitCard</id>
            <position>4</position>
            <title>Debit Card</title>
            <visibility>1</visibility>
         </e>
      </payment_options>
      <reward_points>57</reward_points>
      <stored_card_details>
         <C>
            <e>
               <billingAddress>3855523</billingAddress>
               <cardCategory>C</cardCategory>
               <cardNumber>XXXXXXXXXXXX7018</cardNumber>
               <cardType>mastercard</cardType>
               <expiryDate>Expires on September 2015</expiryDate>
               <imageUrl>https://rocket:G9zqP2CFaotYQ@pay-integration1.jabongfashion.com/public/img/masterCard.jpg</imageUrl>
               <jabongToken>c28d0666da00f78c5809a13605e2c883620a6c97</jabongToken>
               <nameOnCard>MC</nameOnCard>
               <rank>1</rank>
            </e>
         </C>
      </stored_card_details>
      <user>
         <created_at>2014-11-06 16:25:48</created_at>
         <email>jabong.automation@gmail.com</email>
         <first_name>gbmslklogc</first_name>
         <gender>male</gender>
         <giftcard_credits_available>2332.33</giftcard_credits_available>
         <id_customer>11584369</id_customer>
         <is_confirmed>1</is_confirmed>
         <last_name>jabongm</last_name>
         <order_count>5967</order_count>
         <password>b1e84150a37e8d142d8ea78d98f44a802a6563da26f00f07f6666d027480f5c3</password>
         <phone>9662627992</phone>
         <store_credits_available>5570.00</store_credits_available>
         <total_store_credits>7902.33</total_store_credits>
      </user>
   </metadata>
   <server_flags>
      <webp_enabled>0</webp_enabled>
   </server_flags>
   <session>
      <YII_CSRF_TOKEN>f2797f767225583aa5424a10638baf6cfe6a27c2</YII_CSRF_TOKEN>
      <api_token>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</api_token>
      <app_cache_mt>
         <hpbr>850</hpbr>
         <md5>1427123847</md5>
         <menu>1427123847</menu>
         <segments>1427123847</segments>
         <stmsgv>1.0</stmsgv>
      </app_cache_mt>
      <expire null="true"/>
      <id>jb81fb3ed550cd34d511e522578356f10ebcdc21f6065d19615fa54e243fb2692e</id>
      <is_loggedin>true</is_loggedin>
      <rpid null="true"/>
   </session>
   <success>true</success>
</Response>]]></con:value></con:property><con:property><con:name>Total_Cart_Value</con:name><con:value>2325.0</con:value></con:property><con:property><con:name>userDeviceType</con:name><con:value>mobile</con:value></con:property><con:property><con:name>utmSource</con:name><con:value/></con:property><con:property><con:name>utmCampaign</con:name><con:value/></con:property><con:property><con:name>isAgentCheckout</con:name><con:value>0</con:value></con:property><con:property><con:name>storecredit</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>id_customer</con:name><con:value>11584369</con:value></con:property></con:properties></con:testSuite><con:testSuite name="Verify_correctness_of_Voucher_Applicability" id="109f72ec-ca85-4583-a7b1-f16cc0c6081b" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_voucher_applicability_on_cart" searchProperties="true" id="eda252d5-bbda-41bd-9ccd-26aa2b138835"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="63c3f531-f432-4d3c-af46-25ff17ef42cc"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="8ba9c114-fa93-4a7f-b1c2-86f308ff692b"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="0ff76d05-f57b-4c03-b1b0-fc236a09d245"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="69e3820f-e362-4e50-bddd-6fd078db3d64"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="2e54833f-8cbf-4d51-aab5-4ba025f677d5"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="9b6c44db-8cd3-43d1-8380-ddda0cdfa260"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="5ddee1f5-218d-41a6-853f-74b775d60230"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Get hold on xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def xmlresponse = holder.metadata.toString();
	log.info "xmlresponse" +xmlresponse
	


messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="292bdee4-5b26-4ac1-b7da-204916129387"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user get list of items added to cart" id="1a014bb4-6a4d-4cd2-88d0-7bdea60eb3f4"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user get list of items added to cart" mediaType="application/json" id="c77f6a67-7af1-4a6a-aa62-3e6470ccb06e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="71e75806-c8ce-4a66-8215-1f352ec052d7"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="9ce44dd3-cbc5-4837-a2a5-128cbbd8018f"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	




</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7a2a1269-a506-4b5e-83a1-65d3aba57ab3"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user verifies item added to cart is visible in cart" id="d386605a-d173-4be3-859a-f67a449be3fe"><con:settings/><con:config><script>def addcart = context.expand( '${#TestCase#xmlresponse}' )
def listcart = context.expand( '${#TestCase#cartresponse}')


assert(addcart.equals(listcart)) : "Product details added to cart does not match products visible in cart"
</script></con:config></con:testStep><con:testStep type="restrequest" name="And User Apply correct voucher code" id="e8689b23-a4c6-40f2-99f8-91fa6548e11b"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And User Apply correct voucher code" mediaType="application/json" postQueryString="false" id="d5bb626d-068a-4df6-a7e6-9ab310873457"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "TESTINGAUTOLIVE"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Capture Apply voucher API xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def voucherresponse = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("voucherresponse",voucherresponse);
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE APPLIED SUCCESSFULLY" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And Verify Coupon Applied SuccessFully" id="306b6769-e7dd-4bc0-8d27-19346f0d4917"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And Verify Coupon Applied SuccessFully" mediaType="application/json" id="a9acb610-cfa5-40d4-a167-263b3cd2ff33"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="63314ef3-4778-4192-8cad-4c61e2f6677c"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_cart_listing = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_cart_listing",session_cart_listing);

//Assert session id for cart listing step against apply voucher step session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_cart_listing) : "Session id is mismatching"


//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Capture get cart listing API xml response with voucher successfully applied
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def CartWithVoucher = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("CartWithVoucher",CartWithVoucher);

//Assert ApplyVoucher API xml response against CartListing API xml(with voucher applied) response

def voucherresponse = context.expand( '${#TestCase#voucherresponse}' )

assert(voucherresponse.equals(CartWithVoucher)) : "Cart details do not match"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>voucherresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false02501.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsetruefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00225041441970000false02501.00100000Yellow Solid Bra200.0017537.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B425.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.0050.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>CartWithVoucher</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false02501.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsetruefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00225041441970000false02501.00100000Yellow Solid Bra200.0017537.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B425.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.0050.000.000.0075.000.00400.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_removal_of_voucher_from_cart" searchProperties="true" id="46056184-362e-4736-aa32-aac959a254aa"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="6d4ed878-0560-4556-bcdb-12b5a3e8d7a1"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="b29ed48f-8f6c-45af-b07a-69a28fd263da"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="6fffbef1-46f7-48a2-a54f-367cceca00f1"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="91e84cbc-f578-4815-ba4a-f43cddc26493"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="bcc971e9-dd22-40a8-8a15-22a53ce6e8ae"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="2a9dd8a8-a8be-4776-9bb1-f3db1f130389"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="287629a9-7a52-41c9-9507-6709260dddd1"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Get hold on xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def xmlresponse = holder.metadata.toString();
	log.info "xmlresponse" +xmlresponse
	


messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="460774c9-de4b-44f6-9dd3-22aed5227fd5"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user get list of items added to cart" id="7bb9bbf0-d8cf-4dd7-8f5c-4fe32488d8f7"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user get list of items added to cart" mediaType="application/json" id="bf160a24-15df-493b-9a39-23b008611222"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="7e486007-1f02-4d27-93a2-95db29d11cba"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="29592530-23d5-4cc6-9064-e05799b7385d"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	




</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c8f057e7-8c96-45f5-93c9-b15a9190d629"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user verifies item added to cart is visible in cart" id="144be72c-818f-4c58-973c-8c3e17a0f908"><con:settings/><con:config><script>def addcart = context.expand( '${#TestCase#xmlresponse}' )
def listcart = context.expand( '${#TestCase#cartresponse}')


assert(addcart.equals(listcart)) : "Product details added to cart does not match products visible in cart"
</script></con:config></con:testStep><con:testStep type="restrequest" name="And User Apply correct voucher code" id="a0b1db99-6a06-47d5-a35d-352daaa894d3"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And User Apply correct voucher code" mediaType="application/json" postQueryString="false" id="1f628729-f658-49e3-b864-060eb1d36bf7"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "TESTINGAUTOLIVE"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d2a1692b-0c6c-4a11-adb5-e761c3917605"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Capture Apply voucher API xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def voucherresponse = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("voucherresponse",voucherresponse);
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE APPLIED SUCCESSFULLY" id="b54cdefb-c9cf-4658-a451-9c2bfd6c2d47"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And Verify Coupon Applied SuccessFully" id="7575b983-09a8-421e-a737-f35bd4e0d5b7"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And Verify Coupon Applied SuccessFully" mediaType="application/json" id="a9acb610-cfa5-40d4-a167-263b3cd2ff33"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b096ead3-9f8c-407c-af49-a9f6de1a478a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_cart_listing = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_cart_listing",session_cart_listing);

//Assert session id for cart listing step against apply voucher step session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_cart_listing) : "Session id is mismatching"


//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Capture get cart listing API xml response with voucher successfully applied
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def CartWithVoucher = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("CartWithVoucher",CartWithVoucher);

//Assert ApplyVoucher API xml response against CartListing API xml(with voucher applied) response

def voucherresponse = context.expand( '${#TestCase#voucherresponse}' )

assert(voucherresponse.equals(CartWithVoucher)) : "Cart details do not match"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then User Remove the applied voucher from cart" id="fc963f85-69d8-47fe-a202-8aad43d4eddc"><con:settings/><con:config service="JCartVoucher" resourcePath="/{version}/voucher/{CouponCode}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then User Remove the applied voucher from cart" mediaType="application/json" id="d32b84f0-fa6f-4511-bcb1-2e01e8eb7d68"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher/TESTINGAUTOLIVE</con:originalUri><con:assertion type="Simple Contains" name="VOUCHER CODE HAS BEEN SUCCESSFULLY REMOVED" id="d5284f66-22cf-4288-8596-9f8748a17dc6"><con:configuration><token>has been successfully removed</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="91a08d58-89ff-462b-9b56-7645527899cc"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Capture Remove voucher API xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def removevoucher = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("removevoucher",removevoucher);
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="CouponCode" value="TESTINGAUTOLIVE"/>
  <con:entry key="version" value="${#Project#version}"/>
</con:parameters><con:parameterOrder><con:entry>version</con:entry><con:entry>CouponCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And Verify Coupon Removed Successfully" id="d3b6ef12-8c65-4c02-8cec-4c04299c9521"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And Verify Coupon Removed Successfully" mediaType="application/json" id="a9acb610-cfa5-40d4-a167-263b3cd2ff33"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ce3dfd78-426d-46b9-b196-ea2332d4e057"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_cart_listing = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_cart_listing",session_cart_listing);

//Assert session id for cart listing step against apply voucher step session id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_cart_listing) : "Session id is mismatching"


//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Capture get cart listing API xml response with voucher successfully removed
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def CartWithoutVoucher = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("CartWithoutVoucher",CartWithoutVoucher);

//Assert RemoveVoucher API xml response against CartListing API xml(with voucher removed) response

def removevoucher = context.expand( '${#TestCase#removevoucher}' )

assert(removevoucher.equals(CartWithoutVoucher)) : "Cart details do not match"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>voucherresponse</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false02501.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsetruefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00225041441970000false02501.00100000Yellow Solid Bra200.0017537.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B425.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.0050.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>CartWithVoucher</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false02501.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsetruefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00225041441970000false02501.00100000Yellow Solid Bra200.0017537.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B425.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.0050.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>removevoucher</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property><con:property><con:name>CartWithoutVoucher</con:name><con:value>QWERTYKGNGC5V5QZfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-30dummy text2016-02-25 23:59:59SSSTXQQA9FCfalse0To avail this voucher please add products that are worth Rs.1999.00 that are listed here/all-products/?promotion=additional-3028 Jan 2016, 30, 02016-01-28 23:59:592000false0001.00100000Tweens200630BTW089WA86MGVINDFAS-4144203200632BTW089WA86MGVINDFAS-4144201200634BTW089WA86MGVINDFAS-4144199200636BTW089WA86MGVINDFAS-41441970#f1f40e1308913TW089WA86MGVINDFASSat, 28th Nov6-9 days/p/Tweens-Yellow-Solid-Bra-9332-3198031-3/p/Tweens-Yellow-Solid-Bra-9332-3198031-falsefalsefalse0tweens-Yellow-Solid-Bra-1308913.htmlYellow Solid Bra12005.000.00041441970000false0001.00100000Yellow Solid Bra200.0020037.50TW089WA86MGVINDFAS-4144197000.00200.006TweenssizeSize36B475.000ClothingWomen ClothingLingerie &amp; NightwearWomenBuy this product with any other Jabong product(s) to get free shipping***./sizechart/Bras.jpgSIZEUNDERBUST(INCH)OVERBUST(INCH)truefalse30A25 - 2630-3130B25 - 2631 - 3230C25 - 2632 - 3330D25 - 2633 - 3430DD25 - 2634-3532A27 - 2832-3332B27 - 2833 - 3432C27 - 2834 - 3532D27 - 2835 - 3632DD27 - 2837-3834A29 - 3034-3534B29 - 3035 - 3634C29 - 3036 - 3734D29 - 3037 - 3834DD29 - 3038-3936A31 - 3236-3736B31 - 3237 - 3836C31 - 3238 - 3936D31 - 3239 - 4036DD31 - 3241-4238A33 - 3438-3938B33 - 3439 - 4038C33 - 3440 - 4138D33 - 3439 - 4038DD33 - 3440-4140A35 - 3640 - 4140B35 - 3641 - 4240C35 - 3642 - 4340D35 - 3643-4440DD35 - 3644-4542A37-3842-4342B37-3843-4442C37-3844-4542D37-3845-4642DD37-3846-4744A39-4044-4544B39-4045-4644C39-4046-4744D39-4047-4844DD39-4048-490.000.000.000.0075.000.00400.00</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_fixed_type_voucher_applicability_on_dropship_items" searchProperties="true" id="f8747b7c-42d2-4ad0-b554-9aef3efcbb30"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="873d22a2-f18e-4fa6-b71d-ed85c393b1ba"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database-common sku" disabled="true" id="14e37875-e625-488a-a44a-80cd01808af7"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 12 and catalog_config.status ='ACTIVE' limit 5"""); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simplenew" +sku_simple
  log.info "skunew" +sku 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="9a503eec-5a04-4831-b03e-fece4ffe9147"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database" id="cdbf1e02-ae19-4755-af61-026b2dcf3861"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 15 and catalog_config.status ='ACTIVE' limit 20"""); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds dropship item to Cart" id="ea01454c-4605-4fcf-beb6-bb9e795925c3"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds dropship item to Cart" mediaType="application/json" postQueryString="false" id="878336ad-40f8-4ccd-8747-73fb1e7439c1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("dropship_item_added",dropship_item_added);
log.info "dropship_item_added" +dropship_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies dropship item added to cart" id="476ff6cf-71d6-49fb-a810-1fc6459da40b"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies dropship item added to cart" mediaType="application/json" id="a8da2354-c45e-460e-8345-f06fc9fee5ff"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

//Assert dropship item added to cart is visible in cart

def dropship_item_added = context.expand('${#TestCase#dropship_item_added}')

assert(Item_expected_in_cart == dropship_item_added) : "Dropship item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies fixed type voucher code to cart then voucher could not be applied to dropship item" id="52edf99c-428e-4758-9c7c-0e9370290998"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies fixed type voucher code to cart then voucher could not be applied to dropship item" mediaType="application/json" postQueryString="false" id="e72772b7-1ac9-4287-bce2-a8bd0123b3ac"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "TESTINGAUTOLIVE"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "false") : "Success Flag for the API is not false";

</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE CANNOT BE APPLIED" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>Sorry! This voucher can't be applied because some products sold</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="2e045998-9623-4e01-82e7-6a28c435d41b"><con:configuration><token>shipped by jabong-partners are added to cart</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">GE061MA14XQR-245589</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_fixed_type_voucher_applicability_on_marketplace_items" searchProperties="true" id="85e452b2-6fac-46ed-adfa-d6f2c10a4aa2"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="da4a618e-688b-4f11-aeed-2481281cae2f"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="c3428700-3518-4e95-a025-58d4a47aee02"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

log.info "session_id" +session_id

</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database" id="2714a8dc-cc4e-4b5e-bfa3-a292673211d7"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 10
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database-common sku" disabled="true" id="ee3df769-1578-4a71-b828-7687a6726090"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 10
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simplemkt" +sku_simple
  log.info "skumkt" +sku
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds marketplace item to Cart" id="600b84b8-b50a-4391-8e4b-6d0275de6d97"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds marketplace item to Cart" mediaType="application/json" postQueryString="false" id="263b10a9-76fd-45c1-8e6b-5f9edac1abd4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("marketplace_item_added",marketplace_item_added);
log.info "marketplace_item_added" +marketplace_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies marketplace item added to cart" id="144474fa-4604-4950-9d3c-115f6be2a813"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies marketplace item added to cart" mediaType="application/json" id="e9c44490-6b59-4472-a9ed-7a73ba186bc4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert marketplace item added to cart is visible in cart


def marketplace_item_added = context.expand('${#TestCase#marketplace_item_added}')

assert(Item_expected_in_cart == marketplace_item_added) : "Marketplace item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies fixed type voucher code to cart then voucher could successfully applied to marketplace item" id="f669cdc9-4abe-450a-a134-79578f40ca9a"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies fixed type voucher code to cart then voucher could successfully applied to marketplace item" mediaType="application/json" postQueryString="false" id="054ef3c6-fe98-43c5-a8af-e413297576b0"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "TESTINGAUTOLIVE"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Assert marketplace item on which voucher code is applied is same as item present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_present

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_present = it.name();
}


def Item_expected_in_cart = context.expand('${#TestCase#Item_expected_in_cart}')

assert(marketplace_item_present == Item_expected_in_cart):"Item on which voucher applied is not same as marketplace item added"


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE SUCCESS MESSAGE" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value>HO217HO37JGW-21590</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SO955BE17DIS-166718</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>SO955BE17DIS-166718</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_bank_voucher_applicability_on_dropship_items" searchProperties="true" disabled="true" id="ada20b1c-d1ad-4995-8f96-18edb7506d04"><con:settings/><con:testStep type="groovy" name="Given user generates random session id" id="9b29e277-9170-4193-8c86-3ecd96c5fe37"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="ed585287-243f-4203-9334-7a2953526cc3"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database" id="42fd42f2-4f1a-4a4f-861d-8abee3e38d08"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 15 and catalog_config.status ='ACTIVE' limit 20"""); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database-common sku" disabled="true" id="33762ccb-20d3-4e3c-8c90-aa6ca6a4850a"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 12 and catalog_config.status ='ACTIVE' limit 5"""); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku
 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds dropship item to Cart" id="37416c5b-ab5d-429d-86ee-33ac23528044"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds dropship item to Cart" mediaType="application/json" postQueryString="false" id="1a8b39f7-78a8-4bd0-be2a-b9779b80d74c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("dropship_item_added",dropship_item_added);
log.info "dropship_item_added" +dropship_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies dropship item added to cart" id="a87dd109-660a-4f28-a8b7-1669f9cbb56b"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies dropship item added to cart" mediaType="application/json" id="d7db2996-50b4-41b3-8e67-bc202e7b9bfd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert dropship item added to cart is visible in cart


def dropship_item_added = context.expand('${#TestCase#dropship_item_added}')

assert(Item_expected_in_cart == dropship_item_added) : "Dropship item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And user fetches bank coupon from database" id="199df62e-169d-43e6-bec8-ed77bada8be4"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select sr.code from sales_rule sr join sales_rule_set srs on srs.id_sales_rule_set=sr.fk_sales_rule_set
									where srs.is_active = 1 and srs.bank_name is not null
									and srs.type='coupon' and sr.is_active = 1 
									and now() between sr.from_date and sr.to_date limit 2"""); 
						
 while(resultSet.next()){
  code  = resultSet.getString("code")
  
  log.info "code" +code
  break;
 
}

  
testRunner.testCase.testSuite.setPropertyValue("code" ,code)


</script></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies bank voucher code to cart then voucher could not be applied to dropship item" id="f150f6c7-2f4c-499d-9f43-2682b00afe0a"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies bank voucher code to cart then voucher could not be applied to dropship item" mediaType="application/json" postQueryString="false" id="0396ea20-9398-4efe-be0e-09047310dfa7"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "${#TestSuite#code}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "false") : "Success Flag for the API is not false";

//Assert dropship item on which bank voucher code is applied is same as item present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_present

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_present = it.name();
}


def Item_expected_in_cart = context.expand('${#TestCase#Item_expected_in_cart}')

assert(dropship_item_present == Item_expected_in_cart):"Item on which voucher applied is not same as dropship item added"


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE CANNOT BE APPLIED" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>Sorry! This voucher can't be applied because some products sold</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="8e4b4421-d337-428f-b041-3b3f2b60966f"><con:configuration><token>shipped by jabong-partners are added to cart</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value>GE061MA14XQR-245589</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value>YE982MA08JDB-176849</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>GE061MA14XQR-245589</con:value></con:property><con:property><con:name>Coupon</con:name><con:value>HDFCPHTAV</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_bank_voucher_applicability_on_marketplace_items" searchProperties="true" disabled="true" id="1b43a209-d0ab-4336-9663-9338674220c5"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" id="a9024d26-6f47-483f-b999-3d75b0ae4363"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database" id="ef86ea22-0c2f-44f9-95f3-6df254e21149"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 10
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database-common sku" disabled="true" id="92c1514f-16f2-4005-ad85-89b4a6537873"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 12
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds marketplace item to Cart" id="ab330f48-3af1-4cc3-8b05-05872d87ff0c"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds marketplace item to Cart" mediaType="application/json" postQueryString="false" id="f1d604b4-2353-4c46-bfb3-19ed9ae3b040"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("marketplace_item_added",marketplace_item_added);
log.info "marketplace_item_added" +marketplace_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies marketplace item added to cart" id="70a2b4b1-0424-4f6a-806c-ad840a2628f1"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies marketplace item added to cart" mediaType="application/json" id="de0ae39f-bbbf-4d4e-b4e2-d3531769695c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert marketplace item added to cart is visible in cart


def marketplace_item_added = context.expand('${#TestCase#marketplace_item_added}')

assert(Item_expected_in_cart == marketplace_item_added) : "Marketplace item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And user fetches bank coupon from database" id="fdb195b5-fc79-46af-a4ee-a97c6e612198"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select sr.code from sales_rule sr join sales_rule_set srs on srs.id_sales_rule_set=sr.fk_sales_rule_set
									where srs.is_active = 1 and srs.bank_name is not null
									and srs.type='coupon' and sr.is_active = 1 
									and now() between sr.from_date and sr.to_date limit 2"""); 
						
 while(resultSet.next()){
  code  = resultSet.getString("code")
  
  log.info "code" +code
}

  
testRunner.testCase.testSuite.setPropertyValue("code" ,code)


</script></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies bank voucher code to cart then voucher could successfully applied to marketplace item" id="367b1644-762f-468a-b87f-e2b949160903"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies bank voucher code to cart then voucher could successfully applied to marketplace item" mediaType="application/json" postQueryString="false" id="4bf636d0-6200-4584-92db-fc93bd5bb2b1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "${#TestSuite#code}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Assert marketplace item on which voucher code is applied is same as item present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_present

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_present = it.name();
}


def Item_expected_in_cart = context.expand('${#TestCase#Item_expected_in_cart}')

assert(marketplace_item_present == Item_expected_in_cart):"Item on which voucher applied is not same as marketplace item added"


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE SUCCESS MESSAGE" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value>HO217HO37JGW-21590</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">PE655JW19SBK-97185</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>PE655JW19SBK-97185</con:value></con:property><con:property><con:name>Coupon</con:name><con:value>HDFCPHTAV</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_bank_voucher_applicability_on_dropship_items" searchProperties="true" id="187239ca-0886-4f3f-a808-b59c9dc96814"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="47630ecc-212a-4a55-97cc-6673a2882233"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="c425d2ee-2eba-4c6f-b10c-0ca797d926e1"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database" id="7efd9e67-86a3-485f-ab3e-2f2d0bb38d13"><con:settings/><con:config><script><![CDATA[ArrayList<String> sku_name = new ArrayList<String>()

ArrayList<String> sku_simple_name = new ArrayList<String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
						and catalog_simple.price - catalog_simple.simple_special_price <100
       					and pet_approved = 1 and quantity > 10 and catalog_config.status ='ACTIVE' limit 40"""); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();
log.info "size" +size


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i<sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
]]></script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database-common sku" disabled="true" id="7637bff4-cd9e-48c5-8f89-092f803e52a2"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 12 and catalog_config.status ='ACTIVE' limit 5"""); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku
 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds dropship item to Cart" id="9455694b-ec54-427b-bdee-f8ca48082789"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds dropship item to Cart" mediaType="application/json" postQueryString="false" id="75b94531-1bee-4c1b-ae1d-89ea60a69e36"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "3",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("dropship_item_added",dropship_item_added);
log.info "dropship_item_added" +dropship_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies dropship item added to cart" id="cb1fe7fe-0550-49e6-bc9a-f73434bbb641"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies dropship item added to cart" mediaType="application/json" id="157ebb0a-94ad-4ba4-819c-6c2097c2af05"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert dropship item added to cart is visible in cart


def dropship_item_added = context.expand('${#TestCase#dropship_item_added}')

assert(Item_expected_in_cart == dropship_item_added) : "Dropship item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And user fetches bank coupon from database" disabled="true" id="2d5b22e7-4f4d-402f-93d0-fb9c969d6845"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select sr.code from sales_rule sr join sales_rule_set srs on srs.id_sales_rule_set=sr.fk_sales_rule_set
									where srs.is_active = 1 and srs.bank_name is not null
									and srs.type='coupon' and sr.is_active = 1 
									and now() between sr.from_date and sr.to_date limit 2"""); 
						
 while(resultSet.next()){
  code  = resultSet.getString("code")
  
  log.info "code" +code
  break;
 
}

  
testRunner.testCase.testSuite.setPropertyValue("code" ,code)


</script></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies bank voucher code to cart then voucher could not be applied to dropship item" id="5a2f2919-b0f9-4621-9d11-46a5f4886326"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies bank voucher code to cart then voucher could not be applied to dropship item" mediaType="application/json" postQueryString="false" id="7c0a6969-25f2-4cd4-906a-9f8f9ae16d1a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "${#TestCase#Coupon}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Assert dropship item on which bank voucher code is applied is same as item present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_present

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_present = it.name();
}


def Item_expected_in_cart = context.expand('${#TestCase#Item_expected_in_cart}')

assert(dropship_item_present == Item_expected_in_cart):"Item on which voucher applied is not same as dropship item added"


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS ON ALERT MESSAGE" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully.Please ensure that you do the payment by HDFC Bank NetBanking or Card.</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS ON CART MESSAGE" id="8e4b4421-d337-428f-b041-3b3f2b60966f"><con:configuration><token>applied successfully.Please ensure that you do the payment by HDFC Bank NetBanking or Card.</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SA336SH86QQZINDFAS-332275</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value>YE982MA08JDB-176849</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>SA336SH86QQZINDFAS-332275</con:value></con:property><con:property><con:name>Coupon</con:name><con:value>HDFCPHTAV</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_bank_voucher_applicability_on_marketplace_items" searchProperties="true" id="1e5488d0-5206-4a07-bb9d-9dddb13c6c01"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="a6a7b3f3-cec6-42c4-86a4-805bd33659d4"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="22f5c43b-a3f4-4912-b570-1c4176d7d0d4"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)

</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database" id="d06afeea-2c20-4995-8dab-f87bdbab4f54"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 10
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database-common sku" disabled="true" id="e8cd8e0d-72fd-4a87-929f-bdc0c555c784"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 12
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User adds marketplace item to Cart" id="d02b6b52-5b34-4059-bb40-b753579ae7de"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User adds marketplace item to Cart" mediaType="application/json" postQueryString="false" id="8959827c-3f1f-4eba-a560-7f1a0635c7bd"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value="1896698"/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("marketplace_item_added",marketplace_item_added);
log.info "marketplace_item_added" +marketplace_item_added


	


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Given user verifies marketplace item added to cart" id="89c6ea60-b273-4072-81a6-6288d09b64a1"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user verifies marketplace item added to cart" mediaType="application/json" id="ae82d9be-bde2-44d7-a254-d1e88a11fd02"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert marketplace item added to cart is visible in cart


def marketplace_item_added = context.expand('${#TestCase#marketplace_item_added}')

assert(Item_expected_in_cart == marketplace_item_added) : "Marketplace item added to cart is not visible in cart"


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And user fetches bank coupon from database" disabled="true" id="5496abe4-b6d9-4f9a-bace-166456406be0"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select sr.code from sales_rule sr join sales_rule_set srs on srs.id_sales_rule_set=sr.fk_sales_rule_set
									where srs.is_active = 1 and srs.bank_name is not null
									and srs.type='coupon' and sr.is_active = 1 
									and now() between sr.from_date and sr.to_date limit 2"""); 
						
 while(resultSet.next()){
  code  = resultSet.getString("code")
  
  log.info "code" +code
}

  
testRunner.testCase.testSuite.setPropertyValue("code" ,code)


</script></con:config></con:testStep><con:testStep type="restrequest" name="And when user applies bank voucher code to cart then voucher could successfully applied to marketplace item" id="69388fa1-6749-47b9-8a25-8092d88fad65"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And when user applies bank voucher code to cart then voucher could successfully applied to marketplace item" mediaType="application/json" postQueryString="false" id="c3395378-0a0c-4aef-b289-8713de0d782f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "${#TestCase#Coupon}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Assert marketplace item on which voucher code is applied is same as item present in cart

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_present

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_present = it.name();
}


def Item_expected_in_cart = context.expand('${#TestCase#Item_expected_in_cart}')

assert(marketplace_item_present == Item_expected_in_cart):"Item on which voucher applied is not same as marketplace item added"


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE SUCCESS MESSAGE" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value>HO217HO37JGW-21590</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">SO955BE09DJA-166726</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>SO955BE09DJA-166726</con:value></con:property><con:property><con:name>Coupon</con:name><con:value>HDFCPHTAV</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>price</con:name><con:value>200</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>4144197</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>TW089WA86MGVINDFAS</con:value></con:property><con:property><con:name>product_sku_simple</con:name><con:value>TW089WA86MGVINDFAS-4144197</con:value></con:property><con:property><con:name>code</con:name><con:value>HDFC2QJT5</con:value></con:property><con:property><con:name>sku</con:name><con:value>GE061MA14XQR</con:value></con:property><con:property><con:name>sku_simple</con:name><con:value>GE061MA14XQR-245589</con:value></con:property></con:properties></con:testSuite><con:testSuite name="AsARegisteredUserICanPlaceOrderWithVoucherAlsoAppliedOnCart" id="b51196d4-04e0-4261-ae36-4cfab027c502" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Logged_In_Succesfully_With_Correct_Credentials" searchProperties="true" id="e242a138-9ba1-48b7-85cf-9b87d9c025f5"><con:settings/><con:testStep type="restrequest" name="Given User initialize the application" id="aed75553-bab8-4098-8532-5e917d1a34b0"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the application" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://integration1.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8e46be89-3439-4558-b9ba-ba933c09a876"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);
log.info responseHolder;
//assert the status of request.
def success_status = responseHolder.success.toString();
assert ( success_status == "true") : "success status is not true";

//Get the session id
def session_id = responseHolder.session.id.toString();

//Set above value to PROJECT LEVEL for later usage.
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_id);

</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="When User try to log in to application with correct credentials" id="f2a24d89-0a42-4c3d-b888-2ece6c5e42fd"><con:settings/><con:config service="JabongUsersAPIs" resourcePath="/mobapi/customer/login" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="When User try to log in to application with correct credentials" mediaType="application/json" postQueryString="false" id="afdb8974-1a97-4283-9e97-eeefde27daae"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="b5467071c82d1e0d88a46f6e057dbb88"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="1.2"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="mobile"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="application/ios.rocket.SHOP_MOBILEAPI_STAGING-v1.0+json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/login</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Verify Customer logged in successfully" id="aced8771-4a10-4d62-9d9c-8982d8c1c51c"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);


def email = responseHolder.metadata.customer_data.email.toString();

messageExchange.modelItem.testCase.testSuite.setPropertyValue("email",email);





//Asserting for the success status for the API.
def success_status = responseHolder.success.toString();
assert(success_status == "true") : "Success status for the login is not true.";


//Get and set the session id.
def session_ID = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID",session_ID);

//Check out IS Logged IN .
def is_LoggedIn = responseHolder.session.is_loggedin.toString();
assert(is_LoggedIn == "true"):"is_loggedin handle is not true. It is -- '" + is_LoggedIn + "'.";

//assert the message for success.
def success_message =  responseHolder.messages.success[0].toString();
assert(success_message == "Customer login success") : "Error in verifying the success message";
</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#Session_ID}"/>
  <con:entry key="LoginForm[password]" value="${#TestCase#password}"/>
  <con:entry key="LoginForm[email]" value="${#TestCase#Email}"/>
</con:parameters><con:parameterOrder><con:entry>LoginForm[email]</con:entry><con:entry>LoginForm[password]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then User Get logged into an application" disabled="true" id="0bc75225-42e3-4433-ad6b-f269747b66be"><con:settings/><con:config service="JabongUsersAPIs" resourcePath="/mobapi/customer/getdetails" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then User Get logged into an application" mediaType="application/json" postQueryString="false" id="96d1229e-84b8-4a38-9b38-76c19d6843ef"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/customer/getdetails</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Verify the details of logged in user" id="0d265605-2def-487a-81fd-424a48c3972b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//asserting the success status for the API
def success_status = responseHolder.success.toString();
assert(success_status == "true") : "Success status for the login is not true.";

//Check out if user IS Logged IN .
def is_LoggedIn = responseHolder.session.is_loggedin.toString();
assert(is_LoggedIn == "true"):"is_loggedin handle is not true. It is -- '" + is_LoggedIn + "'.";

//Get and set the session id.
def session_ID = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Session_ID",session_ID);

//Get and verify the email address of logged in user.
def Email_address = responseHolder.metadata.data.email.toString();
def LoggedInEmail = context.expand('${#TestCase#Email}').toString();
assert(Email_address == LoggedInEmail) : "Email in User details response doesn't mach"; 

</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#Session_ID}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>password</con:name><con:value>Automation@123</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Registered_User_Can_Place_The_Order_Through_COD_Option" searchProperties="true" id="4c2b781c-c2e1-4f2f-9c2c-fb9b16e13988"><con:settings/><con:testStep type="calltestcase" name="Given user login with correct credentials" id="f669dc00-9cc0-4ee5-a2b9-4a45f91fb4be"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6679a805-8ad3-4196-98e4-e336edf8cc5b</con:targetTestCase><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>password</con:name><con:value>Automation@123</con:value></con:property></con:properties><con:returnProperties><con:entry>Email</con:entry><con:entry>password</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Given user get list of items in cart" id="51990f93-7e00-48f0-94bf-e159ae1fd069"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given user get list of items in cart" mediaType="application/json" id="07769c19-e833-43a3-9061-d653b5d6cd6b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#LoggedInSession_ID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="ef4f4fd6-9b02-4679-bfa1-bc83b4521f3d"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="2a9162d7-2415-4e15-a8ca-507fe57b110a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_items_Session_ID",session_id);

//Assert session id in response against session_id generated for logged in user

def id = context.expand( '${#Project#LoggedInSession_ID}' )
assert(id == session_id) : "Session id is mismatching"

//Capture xml response

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def cartresponse = holder.metadata.toString();
	log.info "cartresponse" +cartresponse

	messageExchange.modelItem.testCase.setPropertyValue("cartresponse",cartresponse);

	
//	holder.metadata.cartItems.non_bundle.item_list.children().each{
//
//		def iteminCart = it.name();
//		log.info "string" +iteminCart

		
//	}



</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2ccdc84c-fba1-4703-bfec-88d2db6f755d"><con:configuration><scriptText>ArrayList&lt;String> List_of_Product_in_Cart = new ArrayList&lt;String>();
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);
	holder.metadata.cartItems.non_bundle.item_list.children().each{

		List_of_Product_in_Cart.add(it.name());

	}

context.List_of_Product_in_Cart=List_of_Product_in_Cart
log.info List_of_Product_in_Cart
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then Remove All items added to cart" id="697d5b0d-ddc1-41ca-a2c0-b54e8ca1d151"><con:settings/><con:config><script>int i = context.List_of_Product_in_Cart.size()
log.info "i-->"+i
for(int j = 0; j&lt; i ; j++){
	log.info context.List_of_Product_in_Cart.get(j).toString()
	testRunner.testCase.testSuite.setPropertyValue("product_sku_simple", context.List_of_Product_in_Cart.get(j).toString())
	testRunner.runTestStepByName("User_Can_Remove_Item_Added_To_Cart")
}</script></con:config></con:testStep><con:testStep type="restrequest" name="User_Can_Remove_Item_Added_To_Cart" disabled="true" id="a3c41063-5d11-4e6d-8077-4c60a0484f6e"><con:settings/><con:config service="JCartRemove" resourcePath="/v1/cart/{SimpleSku}" methodName="RemovefromCart" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User_Can_Remove_Item_Added_To_Cart" mediaType="application/json" postQueryString="false" id="cfc67af9-2fae-4f16-8711-ccb5c1812ace"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#LoggedInSession_ID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart/RE105SH90TWFINDFAS-3483833</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS-TRUE" id="8976cad9-1a0f-44d1-962f-de25a034a84f"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" name="DOES NOT CONTAINS MESSAGE-Items Restored" id="116df3ee-33ac-4d68-9eb6-f1bf7000a547"><con:configuration><token>Some items in your bag have been restored from an earlier visit. Please review before placing your order</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="SimpleSku" value="${#TestSuite#product_sku_simple}"/>
  <con:entry key="version" value="${#Project#version}"/>
</con:parameters><con:parameterOrder><con:entry>SimpleSku</con:entry><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user fetch sku and simplesku from database to add to cart" id="ef56ea1d-241f-4466-a3d2-a8a0a890e706"><con:settings/><con:config><script>String sku_simple;
int price;

def resultSet = context.statement.executeQuery("""SELECT  catalog_simple.sku, catalog_simple.price,
						(SELECT CAST(quantity AS SIGNED INT) FROM catalog_stock
						WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order ON 
						fk_sales_order = id_sales_order  WHERE fk_sales_order_process 
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) 
						AND is_reserved = 1  AND sales_order_item.sku = catalog_simple.sku) 
						AS qty FROM catalog_stock AS stock INNER JOIN catalog_simple ON 
						stock.fk_catalog_simple = id_catalog_simple AND (SELECT CAST(quantity AS SIGNED INT)
						FROM catalog_stock WHERE catalog_stock.fk_catalog_simple = catalog_simple.id_catalog_simple)
						-  (SELECT COUNT(*) FROM sales_order_item JOIN sales_order 
						ON fk_sales_order = id_sales_order  WHERE fk_sales_order_process
						IN (1004,1005,1002,1003,1008,1009,3,1007,1001,1006) AND is_reserved = 1 
						AND sales_order_item.sku = catalog_simple.sku) > 10 AND catalog_simple.special_price 
						IS NULL ORDER BY stock.id_catalog_stock DESC limit 5"""); 
						
				
log.info "result" +resultSet.getRow()
 while(resultSet.next()){
  sku_simple  = resultSet.getString("sku")
  log.info "simple" +sku_simple
  quantity = resultSet.getInt("qty")
  price = resultSet.getInt("price")
 break;
 
}

 
String[] str_sku_simple =  sku_simple.split("-")
  log.info "value" +str_sku_simple[0]
  

testRunner.testCase.testSuite.setPropertyValue("price" ,price.toString())
testRunner.testCase.testSuite.setPropertyValue("Product_Simple",str_sku_simple[1])
testRunner.testCase.testSuite.setPropertyValue("Product_Sku",str_sku_simple[0])
testRunner.testCase.testSuite.setPropertyValue("product_sku_simple",sku_simple)
 
</script></con:config></con:testStep><con:testStep type="restrequest" name="Given User add items to Cart" id="ee03ce70-4062-4500-84f6-1ade75333807"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User add items to Cart" mediaType="application/json" postQueryString="false" id="d1e7d26a-83af-46e0-bf53-fe8137aa98f2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value=""/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#LoggedInSession_ID}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "2",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#product_sku_simple}",
  "Sku": "${#TestSuite#Product_Sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("Cart_add_Session_ID",session_id);

//Assert session id in response against session_id generated for logged in user

def id = context.expand( '${#Project#LoggedInSession_ID}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

//Capturing item unit price

holder.metadata.cartItems.non_bundle.item_list.children().salesOrderItem.each{
	def itemprice = it.unit_price.text();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("unit_price",itemprice)	

log.info "price" +itemprice
}

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		def item_inCart = it.name();



messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("item_inCart",item_inCart);

}

def xmlresponse = holder.metadata.toString();
	
messageExchange.modelItem.testCase.setPropertyValue("xmlresponse",xmlresponse);


</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And User Apply correct voucher code" id="61a855e4-a31e-4190-9145-4a0cc00135f1"><con:settings/><con:config service="JCartVoucher" resourcePath="/v1/voucher" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And User Apply correct voucher code" mediaType="application/json" postQueryString="false" id="7e4699a5-ec97-4a56-b59f-23d9ad51124d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#LoggedInSession_ID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "CouponCode": "TESTINGAUTOLIVE"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/voucher</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ef1feca4-caff-41a1-9188-559ba5d21c0b"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("VoucherSession_ID",session_id);

//Assert vocuher applied step session id against logged in user session id generated
def id = context.expand( '${#Project#LoggedInSession_ID}' )
assert(id == session_id) : "Session id is mismatching"


//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "Success Flag for the API is not true";

//Capture Apply voucher API xml response
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def voucherresponse = holder.metadata.toString();
	
	
messageExchange.modelItem.testCase.setPropertyValue("voucherresponse",voucherresponse);
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="COUPON CODE APPLIED SUCCESSFULLY" id="d0e5b581-3736-4697-a367-ebae33ec6dc7"><con:configuration><token>applied successfully</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And Verify Coupon Applied successfully and cart details" id="a8f78ad7-ff9e-4d78-ab28-50b773f8f2af"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And Verify Coupon Applied successfully and cart details" mediaType="application/json" id="a9acb610-cfa5-40d4-a167-263b3cd2ff33"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#LoggedInSession_ID}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="63314ef3-4778-4192-8cad-4c61e2f6677c"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

def itemprice


String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_cart_listing = responseHolder."${session}".toString();

messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_cart_listing",session_cart_listing);

//Assert session id for cart listing step against apply voucher step session id

def id = context.expand( '${#Project#VoucherSession_ID}' )
assert(id == session_cart_listing) : "Session id is mismatching"


//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Capture get cart listing API xml response with voucher successfully applied
String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

	def CartWithVoucher = holder.metadata.toString();
			
	
messageExchange.modelItem.testCase.setPropertyValue("CartWithVoucher",CartWithVoucher);

//Assert ApplyVoucher API xml response against CartListing API xml(with voucher applied) response

def voucherresponse = context.expand( '${#TestCase#voucherresponse}' )

assert(voucherresponse.equals(CartWithVoucher)) : "Cart details do not match"



//Assert the sku details

def itemExpectedInCart = context.expand('${#Project#item_inCart}');

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		def item_inCart = it.name();


messageExchange.modelItem.testCase.setPropertyValue("item_inCart",item_inCart);

assert(item_inCart == itemExpectedInCart) : "Item found in cart is not same as item added"
}

//Assert the sku price


def itemExpectedPrice = context.expand('${#Project#unit_price}');

holder.metadata.cartItems.non_bundle.item_list.children().salesOrderItem.each{
	itemprice = it.unit_price.text();

	
	

messageExchange.modelItem.testCase.setPropertyValue("itemprice",itemprice);	
	
assert(itemprice == itemExpectedPrice) : "Price of item visbible in cart is not same as price of item added"
	
}

// Capturing the sku quantity in cart

holder.metadata.cartItems.non_bundle.item_list.children().each{
	def itemQuantity = it.quantity.text();
	

messageExchange.modelItem.testCase.setPropertyValue("itemQuantity",itemQuantity);	
}

////Asserting for price calculation in CART.
def sub_Total = responseHolder.metadata.total.sub_total.toString();

if(sub_Total == "null") { sub_Total = "0.00"}
def subTotal = Float.parseFloat(sub_Total);


def shipping_Charges = responseHolder.metadata.total.shipping_charge.toString();

if(shipping_Charges == "null") { shipping_Charges = "0.00";}
def shippingCharges =Float.parseFloat(shipping_Charges);
log.info "shippingCharges" +shippingCharges

def bundle_discount = responseHolder.metadata.total.bundle_discount.toString();
if(bundle_discount == "null") { bundle_discount = "0.00";}
def bundleDiscount =Float.parseFloat(bundle_discount);


def coupon_Money = responseHolder.metadata.total.coupon_money_value.toString();
if(coupon_Money == "null") { coupon_Money = "0.00";}
def couponMoneyValue = Float.parseFloat(coupon_Money);


def store_credits = responseHolder.metadata.total.store_credits_value.toString();
if(store_credits == "null"){store_credits = "0.00";}
def storeCredits = Float.parseFloat(store_credits);


def gift_Wrap = responseHolder.metadata.total.gift_wrap_charges.toString();
if(gift_Wrap == "null"){gift_Wrap = "0.00";}
def giftWrapCharges = Float.parseFloat(gift_Wrap);


def Vat_Amount = responseHolder.metadata.total.total_vat_amount.toString();

if(Vat_Amount == "null"){Vat_Amount = "0.00";}
def VATAmount = Float.parseFloat(Vat_Amount);



def cartTotal = Float.parseFloat(responseHolder.metadata.cartValue.toString());


messageExchange.modelItem.testCase.setPropertyValue("Cart_Value",cartTotal.toString());



////assert that sub-total must be same as item price multiplied by quantity

def productPrice = Float.parseFloat(itemprice);

// Total price of items 

int itemsprice = productPrice * 2;

log.info "itemsprice" +itemsprice

messageExchange.modelItem.testCase.setPropertyValue("itemsprice",itemsprice.toString());

assert(subTotal == itemsprice) : "SubTotal  must be same as itemsprice, as there are 2 items in CART";

def totalPrice = subTotal + shippingCharges - bundleDiscount - couponMoneyValue - storeCredits + giftWrapCharges + VATAmount;


totalPrice = Math.floor(totalPrice * 100)/100;

////assert that the total price is same as the the CART total.

if((cartTotal - totalPrice) > 0.1){

	assert false : "Cart total is not equivalent to Total Price calulated. CART TOTAL VALUE -- " + cartTotal + " And calculated total value -- " + totalPrice;
}
else{
	assert true;
}


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And user review the order" id="dd80d27d-ce83-4ca1-8770-6d8498f15f2e"><con:settings/><con:config service="CartToReviewPage" resourcePath="/mobapi/checkout/orderSummary" methodName="CartToReviewOrder" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user review the order" mediaType="application/json" id="be8c42d7-de36-408e-9e39-3a54bddf4e86"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>https://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi.jabong.com/mobapi/checkout/cartToReviewOrder</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6c90884b-5b4e-4abd-9a0f-34cee3ad0975"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.util.XmlSlurper;
import groovy.json.JsonSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
def session_id = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
assert(successFlag == "true") : "SuccessFlag is not true";

//Assert for if user is logged in.
def isLoggedIn = responseHolder.session.is_loggedin.toString();
assert(isLoggedIn == "true") : "User is not logged in";

//Get the properties of the product added to CART.

def CartTotal = context.expand('${#TestCase#Cart_Value}');

def product_sku = context.expand('${#TestCase#item_inCart}');

def sku_quantity = context.expand('${#TestCase#itemQuantity}');

def itemsprice = context.expand('${#TestCase#itemsprice}'); 


//Assert product info in order review.
def review_order_sku = responseHolder.metadata.order_items.sku[0].toString();

assert(review_order_sku == product_sku) : "Product in order review didn't match with the product added to cart";

def review_order_qty = responseHolder.metadata.order_items.quantity[0].toString();

assert(review_order_qty == sku_quantity) : "Product quantity in order review didn't match with the product quantity in cart";

def review_order_price = responseHolder.metadata.order_items.price[0].toString();

assert(review_order_price == itemsprice) : "Products price in order review didn't match with the products price in cart";


//Logging the Shipping address details.
def userId = responseHolder.metadata.order_shipping_address.id.toString();
def userName = responseHolder.metadata.order_shipping_address.name.toString();
def address1 = responseHolder.metadata.order_shipping_address.address1.toString();
def address2 = responseHolder.metadata.order_shipping_address.address2.toString();
def phone = responseHolder.metadata.order_shipping_address.phone.toString();
log.info "Shipping Details : \n";
log.info "Name -- " + userName + "\n";
log.info "UserId -- " + userId + "\n";
log.info "Address1 -- " + address1 + "\n";
log.info "Address2 -- " + address2 + "\n";
log.info "Phone -- " + phone + "\n";

//Assert the customer Email.
def Email = context.expand('${#TestSuite#email}');

def Customer_Email = responseHolder.metadata.user.email.toString();




assert(Customer_Email == Email) : "Customer Email couldn't verified";



</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="session[id]" value="${#Project#LoggedInSession_ID}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And clear off the Jabong Credit applied" id="3b418218-27a2-4f5a-9e59-c4831db09a75"><con:settings/><con:config service="MobApi_redeemJC" resourcePath="/mobapi/checkout/redeemjabongcredits" methodName="Redeemjabongcredits" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And clear off the Jabong Credit applied" mediaType="application/json" id="2aee9869-25c2-4906-a2de-8ead4eccd02c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform_android}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://supermarket.jabongfashion.com/mobapi/checkout/redeemjabongcredits</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS-TRUE" id="b524cff9-0094-4409-acd1-c0df68ae5037"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e806e694-fc8a-47ce-903c-44226a3cdbae"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.util.XmlSlurper;
import groovy.json.JsonSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();
def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
def session_id = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID",session_id);

//assert for the success flag.
def successFlag = responseHolder.success.toString();
if(successFlag != "true"){
	def errorMessage = responseHolder.messages.error[0];
	assert(errorMessage == "The amount you entered is invalid. Your maximum credit limit is 0.00") : "Error message couldn't verified";
}
else{
	def success_message = responseHolder.messages.success[0].toString();
assert(success_message == "STORECREDIT_CREDIT_SUCCESS") : "Success message couldn't verified";
}
//assert(successFlag == "true") : "SuccessFlag is not true";

//Assert for if user is logged in.
def isLoggedIn = responseHolder.session.is_loggedin.toString();
assert(isLoggedIn == "true") : "User is not logged in";

//Assert for success message.


//assert that the credit applied must be ZERO.
def appliedCredit = (responseHolder.metadata.jabong_credits.credits_applied);
assert(appliedCredit == "0.00") : "Applied Credit must be set to ZERO";

//Assert the Order Total Block.
def total = Float.parseFloat(responseHolder.metadata.order_total_block.total.toString());



def CartTotal = Float.parseFloat(context.expand('${#TestCase#Cart_Value}'));





assert(total == CartTotal) : "Total is mismatching CartTotal";



</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="storecredit" value="0"/>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
</con:parameters><con:parameterOrder><con:entry>storecredit</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then user select payment option as COD" id="340e2253-8c01-48e6-8ed9-f6ee889e340f"><con:settings/><con:config service="MobApi_paymentmode" resourcePath="/mobapi/checkout/codcharges" methodName="Codcharges" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user select payment option as COD" mediaType="application/json" id="2f3b4aa6-1cd5-4c0e-b0d2-24e79d58f577"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform_android}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://alice14.jabong.in/mobapi/checkout/codcharges</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="705200de-516f-4f8d-871f-efc725a93a6a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
def session_id = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID",session_id);

//assert for the success_flag
def success_flag = responseHolder.success.toString();
assert(success_flag = "true") : "Success flag for the API is not true";

//Assert for isLoggedInFlag
def isLoggedIn = responseHolder.session.is_loggedin.toString();
assert(isLoggedIn == "true") : "User is no more logged in";

//Assert for the COD charges.
def cod_charges = (responseHolder.metadata.codcharge.toString());
assert(cod_charges != "0.00") : "COD charges must not be ZERO";
</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
  <con:entry key="payment_method" value="cod"/>
</con:parameters><con:parameterOrder><con:entry>payment_method</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And User placed order using COD as payment mode" id="d99ba6ea-04a8-479d-b7de-928aa02902ec"><con:settings/><con:config service="MobApi_payWithCOD" resourcePath="/mobapi/checkout/cod" methodName="Cod" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And User placed order using COD as payment mode" mediaType="application/json" id="d201dc0a-0e22-46be-a17f-e22a2e8cc226"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform_android}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://alice14.jabong.in/mobapi/checkout/cod</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2623c3c8-1587-49d4-9915-d187c0a53a5f"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

if(response != null){
messageExchange.modelItem.testCase.setPropertyValue("Response",response);
}
else{
	assert false : "Couldn't place order";
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
  <con:entry key="PaymentMethodForm[payment_method]" value="CashOnDelivery"/>
</con:parameters><con:parameterOrder><con:entry>PaymentMethodForm[payment_method]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then order placed sucessfully with the projection of all detail information" id="e18a20cb-718b-4b3d-844c-45e5d1e178c9"><con:settings/><con:config><script>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = testRunner.testCase.getPropertyValue("Response");

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
def session_id = responseHolder.session.id.toString();
testRunner.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID",session_id);

//assert for the success_flag
def success_flag = responseHolder.success.toString();
assert(success_flag = "true") : "Success flag for the API is not true";

//assert for thankyou message.
def messageThankYou = responseHolder.messages.success.msg_thank_you.toString();
assert(messageThankYou != null &amp;&amp; messageThankYou != "") : "Empty ThankYou Message!"; 

//Assert total amount
def cod = Float.parseFloat(responseHolder.messages.success.order_summary_block.cod_charges.value.toString());
def TotalPayed = Float.parseFloat(responseHolder.messages.success.order_summary_block.total.value);
def CartTotal = Float.parseFloat(context.expand('${#TestCase#Cart_Value}'));
log.info "CartTotal" +CartTotal
def AmountToBePayed = CartTotal + cod;

assert(AmountToBePayed == TotalPayed) : "Amount to be payed is not same as user actually payed";

/*
 * Verify Product detail in payment with Username.
 */


 def productinOrder = responseHolder.metadata.items.simpleSku[0];
 def productWasInCart = context.expand('${#TestCase#item_inCart}'); 
 log.info "productWasInCart" +productWasInCart

 
 assert(productinOrder == productWasInCart) : "Product ordered is not in Payment Order Summary";

 //Assert the payment method in response.
 def paymentMethod = responseHolder.metadata.paymentMethod.toString();
 assert(paymentMethod == "Cash On Delivery") : "Payment method key didn't match";

 //Get the Order Number -- 
 def orderNumber = responseHolder.metadata.order_nr.toString();
 testRunner.testCase.testSuite.project.setPropertyValue("OrderNumber",orderNumber);
</script></con:config></con:testStep><con:testStep type="restrequest" name="When user continue to payment option through COD" disabled="true" id="1abe5735-503d-4502-9b65-4466b82af12b"><con:settings/><con:config service="MobApi_paymentmode" resourcePath="/mobapi/checkout/codcharges" methodName="Codcharges" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="When user continue to payment option through COD" mediaType="application/json" id="926d694e-fe05-49d2-b555-e133ca040e52"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-preprod.jabongfashion.com/mobapi/checkout/codcharges</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2d1e59b3-8600-46a8-8baa-da042ee52e98"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
def session_id = responseHolder.session.id.toString();
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("LoggedInSession_ID}",session_id);

//assert for the success_flag
def success_flag = responseHolder.success.toString();
assert(success_flag = "true") : "Success flag for the API is not true";

//Assert for isLoggedInFlag
def isLoggedIn = responseHolder.session.is_loggedin.toString();
assert(isLoggedIn == "true") : "User is no more logged in";

//Assert for the COD charges.
def cod_charges = (responseHolder.metadata.codcharge.toString());
assert(cod_charges != "0.00") : "COD charges must not be ZERO";
</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
  <con:entry key="payment_method" value="cod"/>
</con:parameters><con:parameterOrder><con:entry>payment_method</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And User finally placed order using COD as payment mode" disabled="true" id="6788e663-34cb-4709-8557-fd4339a3b8ad"><con:settings/><con:config service="MobApi_payWithCOD" resourcePath="/mobapi/checkout/cod" methodName="Cod" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And User finally placed order using COD as payment mode" mediaType="application/json" id="f18c50d5-2f3f-40f5-9d9d-395d424a6c20"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#MobApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://alice14.jabong.in/mobapi/checkout/cod</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2623c3c8-1587-49d4-9915-d187c0a53a5f"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

if(response != null){
messageExchange.modelItem.testCase.setPropertyValue("Response",response);
}
else{
	assert false : "Couldn't place order";
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="session[id]" value="${#Project#LoggedInSession_ID}"/>
  <con:entry key="PaymentMethodForm[payment_method]" value="CashOnDelivery"/>
</con:parameters><con:parameterOrder><con:entry>PaymentMethodForm[payment_method]</con:entry><con:entry>session[id]</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>cartresponse</con:name><con:value>TESTLMRJANMM494E649.00true0Use and SaveTest Page Discount2016-01-06 23:59:59TESTCAN4NF8UNCHQQVRHPM10.00true0Use and SaveVoucher Offer Filter Text2015-08-20 23:59:59TT30false0To avail this voucher please add products that are worth Rs.999.00 that are listed here/all-products/?promotion=tomtailor30% off on minimum purchase value of Rs.999. Valid till 31 Dec 2015. This product is on discount for limited period only.2015-12-31 23:59:592000false000100000Aaboli6496XSAA339WA25GFEINDFAS-47510316496SAA339WA25GFEINDFAS-47510326496MAA339WA25GFEINDFAS-47510336496LAA339WA25GFEINDFAS-47510346496XLAA339WA25GFEINDFAS-47510356491XXLAA339WA25GFEINDFAS-47510360#1664c41480574AA339WA25GFEINDFASFri, 14th Aug6-9 days/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-5/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-falsefalsefalse0aaboli-Blue-Printed-Kurtas-1480574.htmlBlue Printed Kurtas12005.000.0000000false000100000Blue Printed Kurtas649.006490.00AA339WA25GFEINDFAS-4751032000.00649.006AabolisizeSizeS1298.000ClothingWomen ClothingKurtas &amp; Suit SetsWomen/sizechart/Kurta.jpgSizeGarment Bust (In.)truefalseXS35S37M40L43XL45XXL490.000.000.000.000.000.001298.00</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>TESTLMRJANMM494E649.00true0Use and SaveTest Page Discount2016-01-06 23:59:59TESTCAN4NF8UNCHQQVRHPM10.00true0Use and SaveVoucher Offer Filter Text2015-08-20 23:59:59TT30false0To avail this voucher please add products that are worth Rs.999.00 that are listed here/all-products/?promotion=tomtailor30% off on minimum purchase value of Rs.999. Valid till 31 Dec 2015. This product is on discount for limited period only.2015-12-31 23:59:592000false000100000Aaboli6496XSAA339WA25GFEINDFAS-47510316496SAA339WA25GFEINDFAS-47510326496MAA339WA25GFEINDFAS-47510336496LAA339WA25GFEINDFAS-47510346496XLAA339WA25GFEINDFAS-47510356491XXLAA339WA25GFEINDFAS-47510360#1664c41480574AA339WA25GFEINDFASFri, 14th Aug6-9 days/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-5/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-falsefalsefalse0aaboli-Blue-Printed-Kurtas-1480574.htmlBlue Printed Kurtas12005.000.0000000false000100000Blue Printed Kurtas649.006490.00AA339WA25GFEINDFAS-4751032000.00649.006AabolisizeSizeS1298.000ClothingWomen ClothingKurtas &amp; Suit SetsWomen/sizechart/Kurta.jpgSizeGarment Bust (In.)truefalseXS35S37M40L43XL45XXL490.000.000.000.000.000.001298.00</con:value></con:property><con:property><con:name>voucherresponse</con:name><con:value>TESTLMRJANMM494E649.00true0Use and SaveTest Page Discount2016-01-06 23:59:59TESTCAN4NF8UNCHQQVRHPM10.00true0Use and SaveVoucher Offer Filter Text2015-08-20 23:59:59TT30false0To avail this voucher please add products that are worth Rs.999.00 that are listed here/all-products/?promotion=tomtailor30% off on minimum purchase value of Rs.999. Valid till 31 Dec 2015. This product is on discount for limited period only.2015-12-31 23:59:592000false000100000Aaboli6496XSAA339WA25GFEINDFAS-47510316496SAA339WA25GFEINDFAS-47510326496MAA339WA25GFEINDFAS-47510336496LAA339WA25GFEINDFAS-47510346496XLAA339WA25GFEINDFAS-47510356491XXLAA339WA25GFEINDFAS-47510360#1664c41480574AA339WA25GFEINDFASFri, 14th Aug6-9 days/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-5/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-falsetruefalse0aaboli-Blue-Printed-Kurtas-1480574.htmlBlue Printed Kurtas12005.000.0022500000false000100000Blue Printed Kurtas649.006240.00AA339WA25GFEINDFAS-4751032000.00649.006AabolisizeSizeS1248.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingKurtas &amp; Suit SetsWomen/sizechart/Kurta.jpgSizeGarment Bust (In.)truefalseXS35S37M40L43XL45XXL490.0050.000.000.000.000.001298.00</con:value></con:property><con:property><con:name>CartWithVoucher</con:name><con:value>TESTLMRJANMM494E649.00true0Use and SaveTest Page Discount2016-01-06 23:59:59TESTCAN4NF8UNCHQQVRHPM10.00true0Use and SaveVoucher Offer Filter Text2015-08-20 23:59:59TT30false0To avail this voucher please add products that are worth Rs.999.00 that are listed here/all-products/?promotion=tomtailor30% off on minimum purchase value of Rs.999. Valid till 31 Dec 2015. This product is on discount for limited period only.2015-12-31 23:59:592000false000100000Aaboli6496XSAA339WA25GFEINDFAS-47510316496SAA339WA25GFEINDFAS-47510326496MAA339WA25GFEINDFAS-47510336496LAA339WA25GFEINDFAS-47510346496XLAA339WA25GFEINDFAS-47510356491XXLAA339WA25GFEINDFAS-47510360#1664c41480574AA339WA25GFEINDFASFri, 14th Aug6-9 days/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-5/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-falsetruefalse0aaboli-Blue-Printed-Kurtas-1480574.htmlBlue Printed Kurtas12005.000.0022500000false000100000Blue Printed Kurtas649.006240.00AA339WA25GFEINDFAS-4751032000.00649.006AabolisizeSizeS1248.00TESTINGAUTOLIVE'TESTINGAUTOLIVE' applied.0ClothingWomen ClothingKurtas &amp; Suit SetsWomen/sizechart/Kurta.jpgSizeGarment Bust (In.)truefalseXS35S37M40L43XL45XXL490.0050.000.000.000.000.001298.00</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>1248.0</con:value></con:property><con:property><con:name>itemprice</con:name><con:value>649.00</con:value></con:property><con:property><con:name>Response</con:name><con:value><![CDATA[{"success":true,"messages":{"success":{"msg_next_steps_html":"    <div class=\"bodyBg fl\" style=\"float: left; background-color: #FFFFFF;\"><div style=\"float: left;\">        <h3 style=\"font-family: 'Helvetica'; font-size: 14px;\">Note for Cash on Delivery orders</h3><p style=\"font-family: 'Helvetica'; font-size: 12px;\">Our Customer Care Expert will call you <br/>within 24 hours to confirm your order before it gets <br />dispatched.</p>        <h3 class=\"nextStepsUl\" style=\"font-family: 'Helvetica'; font-size: 14px;\">Next Steps</h3><ul><li class=\"nextStepsUlLi\" style=\"font-family: Helvetica; font-size: 12px;\">We have sent an order confirmation email at <br /> jabong.automation@gmail.com<li class=\"nextStepsUlLi\" style=\"font-family: Helvetica; font-size: 12px;\">Login to <a href=\"my_account\">My Account</a> to track your orders.<li class=\"nextStepsUlLi\" style=\"font-family: Helvetica; font-size: 12px;\">In case of further clarification you can write us back at <br/> <a href=\"support_email|care@jabong.com\">care@jabong.com</a>. </ul></div></div>","msg_thank_you":"Your Order No. 150715253427824 has been successfully placed","order_verification_msg":["We will send a confirmation link on:","SMS: +919999999999"],"order_summary_block":{"order_summary_block_title":"YOUR ORDER SUMMARY","sub_total":{"label":"SUB TOTAL","value":"1298.00"},"discount":{"label":"DISCOUNT","value":"50.00"},"special_discount":{"label":"SPECIAL DISCOUNT","value":"0.00"},"jabong_credits":{"label":"JABONG CREDITS","value":"0.00"},"shipping_charges":{"label":"SHIPPING CHARGES","value":"0.00"},"cod_charges":{"label":"COD CHARGES","value":"49.00"},"vat_charges":{"label":"TAXES","value":"0"},"total":{"label":"TOTAL","value":"1297.00"}},"shipping_detail_block":{"shipping_detail_title":"SHIPPING DETAIL","shipping_detail_delivered_to_text":"Your order will be delivered to:","shipping_detail_customer_name":"Jabong Testing","shipping_detail_address1":"Jabong Office","shipping_detail_address2":"","shipping_detail_mobile":"9999999999","shipping_detail_please_note":"Please Note","shipping_detail_delivery_info":"Products with different delivery time may be shipped separately."}}},"session":{"id":"0kd3bc2nsvkgv37k7igpoigt42","expire":null,"is_loggedin":true,"app_cache_mt":{"segments":1427123847,"menu":1427123847,"md5":1427123847,"stmsgv":"1.0","hpbr":"850"},"YII_CSRF_TOKEN":"7ec3e58f14a8bae6bec8f696d7a9907ff17f61d4","rpid":null,"api_token":"0kd3bc2nsvkgv37k7igpoigt42"},"server_flags":{"webp_enabled":0},"metadata":{"expected_delivery":"Mon, 27 Jul 2015","delay_days":null,"reward_points":"24","gift_wrap_charges":"0.00","fb_title":"Blue Printed Kurtas","fb_image":"http://static.jabong.com/p/Aaboli-Blue-Printed-Kurtas-6055-4750841-1-catalog.jpg","fb_link_desk":"http://integration1.jabongfashion.com/aaboli-Blue-Printed-Kurtas-1480574.html","fb_link":"http://integration1.jabongfashion.com/aaboli-Blue-Printed-Kurtas-1480574.html","fb_share_text":"I just grabbed some cool stuff from Jabong...have you shopped yet from jabong.com?","remaining_jc":"1792811.18","customerIsNewsletterSubscribed":false,"customerBirthDay":"1981-12-12","subtotal":"1298.00","discount":"50.00","special_discount":"0.00","jabong_credits":"0.00","order_nr":"150715253427824","created_at":"2015-07-15 12:32:22","shipping_charges":"0.00","cod_charges":"49.00","total_amount":"1297.00","shipping_address":{"id_sales_order_address":"74587844","first_name":"Jabong","last_name":"Testing","address1":"Jabong Office","city":"Gurgaon","postcode":"122016","phone":"9999999999","fk_country":"105","is_billing":"0","created_at":"2015-07-15 12:32:22","updated_at":"2015-07-15 12:32:22","fk_customer_address_region":"29","region_name":"Haryana"},"payBackCredits":"0.00","userName":"Jabong Testing","items":[{"quantity":2,"simpleSku":"AA339WA25GFEINDFAS-4751034","name":"Blue Printed Kurtas","brand_name":"Aaboli","category":"Women-Clothing","price":1298,"pack_qty":"1","delivery_time":"Mon, 27 Jul 2015","paidPrice":"624.00","vatAmount":"0.00","storeCreditsValue":"0.00","couponMoneyValue":"25.00","shippingCharge":"0.00","idCatalogConfig":"1480574","rootCategoryId":"4472","brickCategoryId":"4565","brickCategoryName":"Kurtas & Kurtis","gender":"Women"}],"couponCode":"TESTINGAUTOLIVE","paymentMethod":"Cash On Delivery","cust_verification_status":"link_initiated","app_widget_setting":{"share_to_earn":"1","rate_this_app":"1"},"pixelInfo":[{"pid":"1480574","catid":"4472","price":"1248.00","quantity":2}]}}]]></con:value></con:property><con:property><con:name>item_inCart</con:name><con:value>AA339WA25GFEINDFAS-4751032</con:value></con:property><con:property><con:name>itemQuantity</con:name><con:value>2</con:value></con:property><con:property><con:name>itemsprice</con:name><con:value>1298</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>price</con:name><con:value>649</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>4751032</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>AA339WA25GFEINDFAS</con:value></con:property><con:property><con:name>product_sku_simple</con:name><con:value>AA339WA25GFEINDFAS-4751032</con:value></con:property><con:property><con:name>email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property></con:properties></con:testSuite><con:testSuite name="Verify_correctness_of_vendor_name_for_marketplace_and_dropship_items" id="b9d1e8a3-39f0-4e2f-a5bd-3cc3386ed0ee" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_vendor_name_for_marketplace_items" searchProperties="true" id="c01df644-b218-46b1-8618-4868151fe4f5"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="5e173dbe-6500-4941-a2a9-77dae3ec8344"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="a18ffb8b-1c37-4ee8-bb6d-1f2910f80785"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database" id="c3ea658d-ce7b-41e2-a1f8-02318c9b9df9"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 10
									and catalog_config.status ='ACTIVE' limit 25 """); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of marketplace products from database-common sku" disabled="true" id="1623c2dc-4d64-410c-a623-5c028486f84e"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
									from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       								inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
									where fk_catalog_shipment_type = 4 and pet_approved = 1 and quantity > 12
									and catalog_config.status ='ACTIVE' limit 5 """); 
						
 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku
 
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="groovy" name="Then user stores vendor name from database for the marketplace product to be added to cart" id="e88dfe04-2f1f-425b-b2ab-2e1aab5daf29"><con:settings/><con:config><script>String brand_name;

def sku = context.expand('${#TestSuite#sku}')

log.info "newsku" +sku

def resultSet = context.statement.executeQuery("""select cb.name from catalog_brand AS cb 
									join catalog_config AS cc ON cb.id_catalog_brand = cc.fk_catalog_brand 
									where cc.sku ='"""+sku+"""' """);


  while(resultSet.next()){
  
  brand_name = resultSet.getString("name")
  log.info "brand_name" +brand_name
}


testRunner.testCase.testSuite.setPropertyValue("brand_name",brand_name)

</script></con:config></con:testStep><con:testStep type="restrequest" name="And then User adds marketplace item to Cart" id="cd2cb236-3874-4a06-bf6e-326a90253bf9"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And then User adds marketplace item to Cart" mediaType="application/json" postQueryString="false" id="ca8656b5-7101-44e8-95ba-62f9e04e983a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value=""/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def marketplace_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		marketplace_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("marketplace_item_added",marketplace_item_added);
log.info "marketplace_item_added" +marketplace_item_added

def supplier_name

holder.metadata.cartItems.non_bundle.item_list.children().each{
	supplier_name = it.supplier.text();

}

messageExchange.modelItem.testCase.setPropertyValue("supplier_name",supplier_name)
log.info "supplier_name" +supplier_name
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then marketplace item added to cart" id="341061aa-a4a7-46eb-a8da-f66d00681b07"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then marketplace item added to cart" mediaType="application/json" id="26263f21-fa68-4a90-aa2a-117754d7ab14"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert marketplace item added to cart is visible in cart


def marketplace_item_added = context.expand('${#TestCase#marketplace_item_added}')

assert(Item_expected_in_cart == marketplace_item_added) : "Marketplace item added to cart is not visible in cart"

// Assert vendor name for marketplace item added to cart is same as vendor name visible in response

def supplier_name = context.expand('${#TestCase#supplier_name}')
def supplier_name_in_response

holder.metadata.cartItems.non_bundle.item_list.children().each{
	 supplier_name_in_response = it.supplier.text();

	 log.info "supplier_name_in_response" +supplier_name_in_response

assert(supplier_name_in_response == supplier_name) : "Supplier name in reponse is not same as expected '"+supplier_name+"' expected "

}
messageExchange.modelItem.testCase.setPropertyValue("supplier_name_in_response",supplier_name_in_response)
	


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And then verifies vendor name in response against vendor name fetched from database" id="aed78a21-a96c-461d-ba51-10f4cdeef054"><con:settings/><con:config><script>//Asserting vendor name/supplier name visible in API response for marketplace product
//in cart is same as vendor name/supplier name fetched from database


def supplier_name_from_database = context.expand('${#TestSuite#brand_name}')

log.info "supplier_name_from_database" +supplier_name_from_database

def supplier_name_visible_in_cart = context.expand('${#TestCase#supplier_name_in_response}')

log.info "supplier_name_visible_in_cart" +supplier_name_visible_in_cart

assert(supplier_name_visible_in_cart == supplier_name_from_database): "Vendor name in response is not same as vendor name fetched from database"</script></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value>HO217HO37JGW-21590</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>SO955BE05DJE-166730</con:value></con:property><con:property><con:name>supplier_name</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>supplier_name_in_response</con:name><con:value>Soulflower</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Given_user_verifies_vendor_name_for_dropship_items" searchProperties="true" id="d199be5e-153b-4a73-b236-022490b5ffe2"><con:settings/><con:testStep type="restrequest" name="Given User initialize the MobApi" disabled="true" id="5aca68b4-cf46-47e4-bd8a-08ac7ef175f8"><con:settings/><con:config service="MobApi_INIT" resourcePath="/mobapi/main/initapi/" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Given User initialize the MobApi" id="4c7e8070-7d0f-4cac-86f0-fea49a99194f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="X-ROCKET-MOBAPI-TOKEN" value="${#Project#MobApi_Token}"/>
  <con:entry key="X-ROCKET-MOBAPI-VERSION" value="${#Project#MobApi_Version}"/>
  <con:entry key="X-USER-DEVICE-TYPE" value="${#Project#MobApi_Device}"/>
  <con:entry key="X-ROCKET-MOBAPI-PLATFORM" value="${#Project#MobApi_Platform}"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#AliceApi_endpoint}</con:endpoint><con:request/><con:originalUri>http://mobapi-supermarket.jabongfashion.com/mobapi/main/initapi/</con:originalUri><con:assertion type="Simple Contains" id="25e6b025-b5f9-4a5f-8024-afb198c4145b" name="SUCCESS STATUS - TRUE"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="14d114ae-1079-4c2e-b464-15f63ed79a9a" name="Get the session_id"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

String session_id = responseHolder.session.id;
messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_id",session_id);</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#MobApi_username}</con:username><con:password>${#Project#MobApi_password}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Given user generates random session id" id="74875a97-ffd8-4f6c-80d7-63f4776a1e56"><con:settings/><con:config><script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

generator( (('A'..'Z')+('0'..'9')).join(), 25 )

String session_id = generator( (('A'..'Z')+('0'..'9')).join(), 25 )

testRunner.testCase.testSuite.project.setPropertyValue("session_id",session_id)</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database" id="b53c6637-2298-436e-95fc-21b4e6ea611c"><con:settings/><con:config><script>ArrayList&lt;String> sku_name = new ArrayList&lt;String>()

ArrayList&lt;String> sku_simple_name = new ArrayList&lt;String>()


def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku),catalog_simple.sku AS simple
						from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       					inner join catalog_stock ON id_catalog_simple = fk_catalog_simple where
   						fk_catalog_shipment_type = 4 # Shipment type = marketplace
						and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       					and pet_approved = 1 and quantity > 15 and catalog_config.status ='ACTIVE' limit 20"""); 
						
 while(resultSet.next()){
  sku_name.add(resultSet.getString("sku"))
  sku_simple_name.add(resultSet.getString("simple"))
  
}

int size = sku_name.size();


	Random item = new Random(); 
	 int j = item.nextInt(size);
	 log.info "j" +j

	String sku = sku_name.get(j)

	String sku_simple = null;	
	 
context.sku_name = sku_name;
log.info "context.sku_name" +context.sku_name

	for(int i=0;i&lt;sku_simple_name.size();i++)
	{
		
	  if(sku_simple_name.get(i).contains(sku)){
	 	 sku_simple = sku_simple_name.get(i)
		log.info"sku simple" +sku_simple
		break;
	  }
	}
	log.info"sku_simple" + sku_simple
	log.info"sku" +sku

testRunner.testCase.testSuite.setPropertyValue("sku", sku);
testRunner.testCase.testSuite.setPropertyValue("sku_simple",sku_simple);
</script></con:config></con:testStep><con:testStep type="groovy" name="Then user fetch sku and skusimple of dropship products from database-common sku" disabled="true" id="0c4d5240-4d07-4b56-80c2-be8419cc1956"><con:settings/><con:config><script>String sku_simple;
String sku;

def resultSet = context.statement.executeQuery("""select distinct(catalog_config.sku), catalog_simple.sku AS simple
								from catalog_config inner join catalog_simple ON id_catalog_config = fk_catalog_config
       							inner join catalog_stock ON id_catalog_simple = fk_catalog_simple
								where fk_catalog_shipment_type = 4 # Shipment type = marketplace
								and fk_catalog_attribute_option_global_dispatch_location = 5 # Dispatch location = Dropship
       							and pet_approved = 1 and quantity > 12
       							and catalog_config.status ='ACTIVE' limit 25 """);

 while(resultSet.next()){
  sku_simple  = resultSet.getString("simple")
  sku = resultSet.getString("sku")
  log.info "simple" +sku_simple
  log.info "sku" +sku
}

  
testRunner.testCase.testSuite.setPropertyValue("sku_simple" ,sku_simple)
testRunner.testCase.testSuite.setPropertyValue("sku",sku)

</script></con:config></con:testStep><con:testStep type="groovy" name="Then user stores vendor name from database for the dropship product to be added to cart" id="0a17cf5f-ff74-402c-948b-2de6c67cf594"><con:settings/><con:config><script>String brand_name;

def sku = context.expand('${#TestSuite#sku}')

def resultSet = context.statement.executeQuery("""select cb.name from catalog_brand AS cb 
									join catalog_config AS cc ON cb.id_catalog_brand = cc.fk_catalog_brand 
									where cc.sku ='"""+sku+"""' """);


  while(resultSet.next()){
  
  brand_name = resultSet.getString("name")
  log.info "brand_name" +brand_name
}


testRunner.testCase.testSuite.setPropertyValue("brand_name",brand_name)

</script></con:config></con:testStep><con:testStep type="restrequest" name="And then User adds dropship item to Cart" id="ba52c953-3bcf-4ee9-a82e-4a5f8b831fe8"><con:settings/><con:config service="JCartAdd" resourcePath="/{version}/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And then User adds dropship item to Cart" mediaType="application/json" postQueryString="false" id="aa8dd3d9-4d83-4e11-a94e-4739c5d1d407"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="X-Jabong-UserId" value=""/>
  &lt;con:entry key="X-Jabong-Token" value="${#Project#token_id}"/>
  &lt;con:entry key="X-Jabong-Sessionid" value="${#Project#session_id}"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request>{
  "Quantity": "1",
  "Shortlist": false,
  "SimpleSku": "${#TestSuite#sku_simple}",
  "Sku": "${#TestSuite#sku}"
}</con:request><con:originalUri>http://jcart-integration1.jabongfashion.com/</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="99c6d64c-7a77-419b-a9c5-ea46c9c053e5"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture ADD To CART API response" id="c913e5a3-ceed-4137-bb5d-0870e5cce40a"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPI init session id



def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"

String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def dropship_item_added

holder.metadata.cartItems.non_bundle.item_list.children().each{

	
		dropship_item_added = it.name();

}


messageExchange.modelItem.testCase.setPropertyValue("dropship_item_added",dropship_item_added);
log.info "dropship_item_added" +dropship_item_added

def supplier_name

holder.metadata.cartItems.non_bundle.item_list.children().each{
	supplier_name = it.supplier.text();

}

messageExchange.modelItem.testCase.setPropertyValue("supplier_name",supplier_name)
log.info "supplier_name" +supplier_name
</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" name="SUCCESS MESSAGE" id="051ed134-832e-4c40-8b5d-b0703aae57ae"><con:configuration><token>Product added to bag</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then dropship item added to cart" id="351faf45-5b88-4fd2-9341-706328184bd1"><con:settings/><con:config service="JCARTItemsListing" resourcePath="/v1/cart" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then dropship item added to cart" mediaType="application/json" id="b3fe4083-a352-4642-bfee-4f61c7d5125b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-Jabong-Sessionid" value="${#Project#session_id}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>http://${#Project#endpoint}</con:endpoint><con:request/><con:originalUri>http://jcart-integration1.jabongfashion.com/v1/cart</con:originalUri><con:assertion type="Simple Contains" name="SUCCESS STATUS-TRUE" id="a1c0bd34-3d88-49da-830e-33149fcc68f1"><con:configuration><token>true</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Capture Cart listing API response" id="1aed28ed-a8aa-4521-bbec-b11277436883"><con:configuration><scriptText>// Get hold on JSON Response.
import net.sf.json.groovy.*;
import groovy.json.JsonSlurper;
import groovy.util.XmlSlurper;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

String response  = messageExchange.getResponseContent();

def slurper = new JsonSlurper()

def responseHolder = slurper.parseText(response);

//Get the session id.
String session = "session-id"
def session_id = responseHolder."${session}".toString();
//def cartCount = responseHolder.metadata.cartCount.toString();


messageExchange.modelItem.testCase.testSuite.project.setPropertyValue("session_ID",session_id);

//Assert session id in response against MobAPi init id

def id = context.expand( '${#Project#session_id}' )
assert(id == session_id) : "Session id is mismatching"



String res = messageExchange.responseContentAsXml;
def holder = new XmlSlurper().parseText(res);

def Item_expected_in_cart

	
holder.metadata.cartItems.non_bundle.item_list.children().each{

		Item_expected_in_cart = it.name();
		
	}

messageExchange.modelItem.testCase.setPropertyValue("Item_expected_in_cart",Item_expected_in_cart)

//Assert dropship item added to cart is visible in cart


def dropship_item_added = context.expand('${#TestCase#dropship_item_added}')

assert(Item_expected_in_cart == dropship_item_added) : "Dropship item added to cart is not visible in cart"

// Assert vendor name for dropship item added to cart is same as vendor name visible in response

def supplier_name = context.expand('${#TestCase#supplier_name}')
def supplier_name_in_response

holder.metadata.cartItems.non_bundle.item_list.children().each{
	 supplier_name_in_response = it.supplier.text();

	 log.info "supplier_name_in_response" +supplier_name_in_response

assert(supplier_name_in_response == supplier_name) : "Supplier name in reponse is not same as expected '"+supplier_name+"' expected "

}
messageExchange.modelItem.testCase.setPropertyValue("supplier_name_in_response",supplier_name_in_response)
	


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="version" value="${#Project#version}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="And then verifies vendor name in response against vendor name fetched from database" id="c9060d2c-e4c6-4ee6-aca6-03862803a1e7"><con:settings/><con:config><script>//Asserting vendor name/supplier name visible in API response for dropship product
//in cart is same as vendor name/supplier name fetched from database


def supplier_name_from_database = context.expand('${#TestSuite#brand_name}')

log.info "supplier_name_from_database" +supplier_name_from_database

def supplier_name_visible_in_cart = context.expand('${#TestCase#supplier_name_in_response}')

log.info "supplier_name_visible_in_cart" +supplier_name_visible_in_cart

assert(supplier_name_visible_in_cart == supplier_name_from_database): "Vendor name in response is not same as vendor name fetched from database"</script></con:config></con:testStep><con:properties><con:property><con:name>Email</con:name><con:value>jabong.automation@gmail.com</con:value></con:property><con:property><con:name>Password</con:name><con:value>Automation@123</con:value></con:property><con:property><con:name>Product_Sku_Simple</con:name><con:value>RE105SH90TWFINDFAS-3483833</con:value></con:property><con:property><con:name>Product_Simple</con:name><con:value>3483833</con:value></con:property><con:property><con:name>Product_Sku</con:name><con:value>RE105SH90TWFINDFAS</con:value></con:property><con:property><con:name>Response_list</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jb493599dde19a6249db9a21b43f929e7feaaed7348c89f3b84d88b6affcd2c614",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Response_add</con:name><con:value>{
  "success": true,
  "messages": {
   "success": [
    "Product added to bag."
   ]
  },
  "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",
  "metadata": {
   "applicable_vouchers": [],
   "cartCount": 2,
   "cartItems": {
    "non_bundle": {
     "item_list": {
      "RE105SH90TWFINDFAS-3483833": {
       "additional_info": {
        "corporate_currency_value": 0,
        "default_shop_look_bundle_id": 0,
        "discount_cap": 0,
        "is_gift_wrapped": "1",
        "is_shop_look_psku": false,
        "is_vat_charged": 0,
        "mode_of_discount_amount": 0,
        "mode_of_payment_amount": 0,
        "pack_qty": 1,
        "payback_credits_value": 0,
        "reward_points": 49.98,
        "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
        "shop_look_bundle_id": 0,
        "vat_amount": 0
       },
       "brand": "Reebok",
       "cart_change_data": [
        {
         "price": "2499",
         "quantity": 6,
         "size": "6",
         "sku": "RE105SH90TWFINDFAS-3483829"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "7",
         "sku": "RE105SH90TWFINDFAS-3483831"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "8",
         "sku": "RE105SH90TWFINDFAS-3483833"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "9",
         "sku": "RE105SH90TWFINDFAS-3483835"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "10",
         "sku": "RE105SH90TWFINDFAS-3483837"
        },
        {
         "price": "2499",
         "quantity": 6,
         "size": "11",
         "sku": "RE105SH90TWFINDFAS-3483839"
        }
       ],
       "cart_rule_discount": 0,
       "cart_rule_display_names": [],
       "color": {
        "Black": "#333333"
       },
       "configId": "1120709",
       "configSku": "RE105SH90TWFINDFAS",
       "delivery_date": "Tue, 2nd Jun",
       "delivery_time": "3-6 days",
       "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
       "image_list": {
        "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",
        "imgCount": 8
       },
       "is_any_gift_wrappable_item": true,
       "is_item_voucher_applied": false,
       "item_index": 0,
       "max_saving_percentage": "",
       "name": "Exclusive Runner Lp Black Running Shoes",
       "pack_qty": "1",
       "quantity": 2,
       "salesOrderItem": {
        "brand": "Reebok",
        "bundle_discount": 0,
        "cart_rule_discount": 0,
        "cart_rule_display_names": "",
        "catalog_config": {
         "vat_company_contribution": "12.50",
         "vat_customer_contribution": "10.99"
        },
        "catalog_tax_class": {
         "tax_percent": "0.00"
        },
        "category": "Sports Shoes",
        "coupon_money_value": 0,
        "fk_sku_bundle": "",
        "giftcard_credits_value": 0,
        "info_collection": {
         "corporate_currency_value": 0,
         "default_shop_look_bundle_id": 0,
         "discount_cap": 0,
         "is_gift_wrapped": "1",
         "is_shop_look_psku": false,
         "is_vat_charged": 0,
         "mode_of_discount_amount": 0,
         "mode_of_payment_amount": 0,
         "pack_qty": 1,
         "payback_credits_value": 0,
         "reward_points": 49.98,
         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",
         "shop_look_bundle_id": 0,
         "vat_amount": 0
        },
        "name": "Exclusive Runner Lp Black Running Shoes",
        "original_unit_price": "2499.00",
        "paid_price": 2499,
        "shipping_charge": "0.00",
        "sku": "RE105SH90TWFINDFAS-3483833",
        "store_credits_value": 0,
        "tax_amount": 0,
        "tax_percent": "0.00",
        "unit_price": "2499.00"
       },
       "specialPrice": null,
       "stock": 6,
       "uniqueAttributes": {
        "key": "size",
        "size": {
         "label": "Size UK",
         "value": "8"
        }
       },
       "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"
      }
     }
    }
   },
   "cartValue": "4998.00",
   "coupon_code": null,
   "gift_wrap_info": {
    "gift_wrap_charges": "30.00",
    "isGiftWrapped": false,
    "message": "Gift wrap this order for Rs. 30"
   },
   "size_chart": [
    {
     "RE105SH90TWFINDFAS": {
      "chart_image": "/sizechart/Image_Men Women.png",
      "columnHeader": [
       "",
       "UK Size",
       "US Size",
       "Euro Size",
       "In Cm"
      ],
      "is_column_header": true,
      "is_row_header": false,
      "row": [
       {
        "row": [
         "6",
         "7",
         "39",
         "25"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "7",
         "8",
         "40.5",
         "26"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "8",
         "9",
         "42",
         "27"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "9",
         "10",
         "43",
         "28"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "10",
         "11",
         "44.5",
         "29"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "11",
         "12",
         "45.5",
         "30"
        ],
        "rowHead": ""
       },
       {
        "row": [
         "12",
         "13",
         "47",
         "31"
        ],
        "rowHead": ""
       }
      ]
     }
    }
   ],
   "total": {
    "bundle_discount": "0.00",
    "coupon_money_value": "0.00",
    "gift_wrap_charges": "0.00",
    "payback_credits": "0.00",
    "shipping_charge": "0.00",
    "store_credits_value": "0.00",
    "sub_total": "4998.00"
   },
   "giftWrappableCount": 1
  }
 }</con:value></con:property><con:property><con:name>response_listing</con:name><con:value>{   "success": true,   "messages": [],   "session-id": "jbcc0e19ce280e4631d230c4a62f5c5fe79b7aad5c72ba41b9877d283311fb17b2",   "metadata": {    "applicable_vouchers": [],    "cartCount": 2,    "cartItems": {     "non_bundle": {      "item_list": {       "RE105SH90TWFINDFAS-3483833": {        "additional_info": {         "corporate_currency_value": 0,         "default_shop_look_bundle_id": 0,         "discount_cap": 0,         "is_gift_wrapped": "1",         "is_shop_look_psku": false,         "is_vat_charged": 0,         "mode_of_discount_amount": 0,         "mode_of_payment_amount": 0,         "pack_qty": 1,         "payback_credits_value": 0,         "reward_points": 49.98,         "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",         "shop_look_bundle_id": 0,         "vat_amount": 0        },        "brand": "Reebok",        "cart_change_data": [         {          "price": "2499",          "quantity": 6,          "size": "6",          "sku": "RE105SH90TWFINDFAS-3483829"         },         {          "price": "2499",          "quantity": 6,          "size": "7",          "sku": "RE105SH90TWFINDFAS-3483831"         },         {          "price": "2499",          "quantity": 6,          "size": "8",          "sku": "RE105SH90TWFINDFAS-3483833"         },         {          "price": "2499",          "quantity": 6,          "size": "9",          "sku": "RE105SH90TWFINDFAS-3483835"         },         {          "price": "2499",          "quantity": 6,          "size": "10",          "sku": "RE105SH90TWFINDFAS-3483837"         },         {          "price": "2499",          "quantity": 6,          "size": "11",          "sku": "RE105SH90TWFINDFAS-3483839"         }        ],        "cart_rule_discount": 0,        "cart_rule_display_names": [],        "color": {         "Black": "#333333"        },        "configId": "1120709",        "configSku": "RE105SH90TWFINDFAS",        "delivery_date": "Tue, 2nd Jun",        "delivery_time": "3-6 days",        "image": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",        "image_list": {         "prefixUrl": "/p/Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-5380-9070211-",         "imgCount": 8        },        "is_any_gift_wrappable_item": true,        "is_item_voucher_applied": false,        "item_index": 0,        "max_saving_percentage": "",        "name": "Exclusive Runner Lp Black Running Shoes",        "pack_qty": "1",        "quantity": 2,        "salesOrderItem": {         "brand": "Reebok",         "bundle_discount": 0,         "cart_rule_discount": 0,         "cart_rule_display_names": "",         "catalog_config": {          "vat_company_contribution": "12.50",          "vat_customer_contribution": "10.99"         },         "catalog_tax_class": {          "tax_percent": "0.00"         },         "category": "Sports Shoes",         "coupon_money_value": 0,         "fk_sku_bundle": "",         "giftcard_credits_value": 0,         "info_collection": {          "corporate_currency_value": 0,          "default_shop_look_bundle_id": 0,          "discount_cap": 0,          "is_gift_wrapped": "1",          "is_shop_look_psku": false,          "is_vat_charged": 0,          "mode_of_discount_amount": 0,          "mode_of_payment_amount": 0,          "pack_qty": 1,          "payback_credits_value": 0,          "reward_points": 49.98,          "reward_rules_applied": "{\"default\":{\"bonus\":49.98}}",          "shop_look_bundle_id": 0,          "vat_amount": 0         },         "name": "Exclusive Runner Lp Black Running Shoes",         "original_unit_price": "2499.00",         "paid_price": 2499,         "shipping_charge": "0.00",         "sku": "RE105SH90TWFINDFAS-3483833",         "store_credits_value": 0,         "tax_amount": 0,         "tax_percent": "0.00",         "unit_price": "2499.00"        },        "specialPrice": null,        "stock": 6,        "uniqueAttributes": {         "key": "size",         "size": {          "label": "Size UK",          "value": "8"         }        },        "link": "Reebok-Exclusive-Runner-Lp-Black-Running-Shoes-1120709.html"       }      }     }    },    "cartValue": "4998.00",    "coupon_code": null,    "gift_wrap_info": {     "gift_wrap_charges": "30.00",     "isGiftWrapped": false,     "message": "Gift wrap this order for Rs. 30"    },    "size_chart": [     {      "RE105SH90TWFINDFAS": {       "chart_image": "/sizechart/Image_Men Women.png",       "columnHeader": [        "",        "UK Size",        "US Size",        "Euro Size",        "In Cm"       ],       "is_column_header": true,       "is_row_header": false,       "row": [        {         "row": [          "6",          "7",          "39",          "25"         ],         "rowHead": ""        },        {         "row": [          "7",          "8",          "40.5",          "26"         ],         "rowHead": ""        },        {         "row": [          "8",          "9",          "42",          "27"         ],         "rowHead": ""        },        {         "row": [          "9",          "10",          "43",          "28"         ],         "rowHead": ""        },        {         "row": [          "10",          "11",          "44.5",          "29"         ],         "rowHead": ""        },        {         "row": [          "11",          "12",          "45.5",          "30"         ],         "rowHead": ""        },        {         "row": [          "12",          "13",          "47",          "31"         ],         "rowHead": ""        }       ]      }     }    ],    "total": {     "bundle_discount": "0.00",     "coupon_money_value": "0.00",     "gift_wrap_charges": "0.00",     "payback_credits": "0.00",     "shipping_charge": "0.00",     "store_credits_value": "0.00",     "sub_total": "4998.00"    },    "giftWrappableCount": 1   }  }</con:value></con:property><con:property><con:name>Cart_Value</con:name><con:value>4998.0</con:value></con:property><con:property><con:name>xmlresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>cartresponse</con:name><con:value>1000false0001029.98{"default":{"bonus":29.98}}00Yepme1499230YE982MA08JDB-1768491499132YE982MA08JDB-1768500#33333358891YE982MA08JDBTue, 23rd Jun9-12 days/p/Yepme-Smart-Black-Chinos-7597-19885-4/p/Yepme-Smart-Black-Chinos-7597-19885-falsefalse0Yepme-Smart-Black-Chinos-58891.htmlSmart Black Chinos11Yepme005.000.00Casual Trousers00000false0001029.98{"default":{"bonus":29.98}}00Smart Black Chinos1499.0014990.00YE982MA08JDB-176849000.001499.002YepmesizeSize301499.000ClothingMen ClothingCasual TrousersMen/sizechart/plus-size-trouser.jpgSizeGarment Waist(In)Garment Outseam Length(In)truefalse2830443032443234443436443638443840444042440.000.000.000.000.000.001499.00</con:value></con:property><con:property><con:name>dropship_item_added</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">GE061MA15XQQ-245584</con:value></con:property><con:property><con:name>marketplace_item_added</con:name><con:value>HO217HO37JGW-21590</con:value></con:property><con:property><con:name>Item_expected_in_cart</con:name><con:value>GE061MA15XQQ-245584</con:value></con:property><con:property><con:name>supplier_name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Genesis</con:value></con:property><con:property><con:name>supplier_name_in_response</con:name><con:value>Genesis</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>sku_simple</con:name><con:value>GE061MA15XQQ-245584</con:value></con:property><con:property><con:name>sku</con:name><con:value>GE061MA15XQQ</con:value></con:property><con:property><con:name>brand_name</con:name><con:value>Genesis</con:value></con:property></con:properties></con:testSuite><con:requirements/><con:properties><con:property><con:name>execution_tag</con:name><con:value>giftwrap</con:value></con:property><con:property><con:name>checkout_endpoint</con:name><con:value>172.16.84.210:1234</con:value></con:property><con:property><con:name>MobApi_endpoint</con:name><con:value>mobapi.jabong.com</con:value></con:property><con:property><con:name>MobApi_Token</con:name><con:value>b5467071c82d1e0d88a46f6e057dbb88</con:value></con:property><con:property><con:name>MobApi_Version</con:name><con:value>1.6</con:value></con:property><con:property><con:name>MobApi_Platform</con:name><con:value>application/wsoa.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json</con:value></con:property><con:property><con:name>MobApi_Platform_android</con:name><con:value>application/android.rocket.SHOP_MOBILEAPI_STAGING-v1.1+json</con:value></con:property><con:property><con:name>MobApi_Device</con:name><con:value>mobile</con:value></con:property><con:property><con:name>MobApi_username</con:name><con:value>rocket</con:value></con:property><con:property><con:name>MobApi_password</con:name><con:value>Q67gING87DEFT</con:value></con:property><con:property><con:name>endpoint</con:name><con:value>172.16.84.210:7000</con:value></con:property><con:property><con:name>JShortlist_endpoint</con:name><con:value>jshortlist-integration1.jabongfashion.com</con:value></con:property><con:property><con:name>version</con:name><con:value>v1</con:value></con:property><con:property><con:name>session_id</con:name><con:value>M84B1SIABSK13CX5N0FV7IEP9</con:value></con:property><con:property><con:name>JAuth_endpoint</con:name><con:value>172.16.84.210:7001</con:value></con:property><con:property><con:name>Payment_options</con:name><con:value>[ExpressCheckout_id:ExpressCheckout, ExpressCheckout_title:Saved Card, ExpressCheckout_visibility:1, COD_id:COD, COD_message:This mode of payment has been disabled for your account by the Risk department. Please contact us to know more., COD_title:Cash on Delivery, COD_visibility:0, Netbanking_id:Netbanking, Netbanking_title:Net Banking, Netbanking_visibility:1, CreditCard_id:CreditCard, CreditCard_title:Credit Card, CreditCard_visibility:1, DebitCard_id:DebitCard, DebitCard_title:Debit Card, DebitCard_visibility:1, Wallet_id:Wallet, Wallet_title:Wallets, Wallet_visibility:1]</con:value></con:property><con:property><con:name>Cart_add_Session_ID</con:name><con:value>D9L9P29BVJPW3VLHF8I2IZZ05</con:value></con:property><con:property><con:name>Cart_items_Session_ID</con:name><con:value>D9L9P29BVJPW3VLHF8I2IZZ05</con:value></con:property><con:property><con:name>Session_ID_Response</con:name><con:value>ZYX2UH5JTRTKNQSA3FF3GM3NL</con:value></con:property><con:property><con:name>session_cart_listing</con:name><con:value>D9L9P29BVJPW3VLHF8I2IZZ05</con:value></con:property><con:property><con:name>LoggedInSession_ID</con:name><con:value>t5s1um86ggrifg5v27g58jrmb0</con:value></con:property><con:property><con:name>unit_price</con:name><con:value>649.00</con:value></con:property><con:property><con:name>item_inCart</con:name><con:value>AA339WA25GFEINDFAS-4751032</con:value></con:property><con:property><con:name>VoucherSession_ID</con:name><con:value>t5s1um86ggrifg5v27g58jrmb0</con:value></con:property><con:property><con:name>response_from_apply_JC</con:name><con:value>{"success":true,"messages":{"success":["STORECREDIT_CREDIT_SUCCESS",""]},"session":{"id":"HGC0PX78QIDK9DFX9OY4SLBKB","expire":null,"is_loggedin":true,"app_cache_mt":{"segments":1427123847,"menu":1427123847,"md5":1436361250,"stmsgv":"1.1","hpbr":"850"},"YII_CSRF_TOKEN":"b67ce0da9560adbb20d503871adcfa7a5acfde7e","rpid":null,"api_token":"HGC0PX78QIDK9DFX9OY4SLBKB"},"server_flags":{"webp_enabled":0,"gn_enabled":0},"metadata":{"order_shipping_address":{"id":"16409076","name":"Testing Jabong","address1":"jsdf, ","address2":"Gurgaon - 122001","phone":"+91 7568589999"},"disable_checkout":false,"special_delivery_options":[],"delivery_time_msg":"Please note that based on your shipping address, delivery time for your order has been updated. Your order will be delivered within 4-5 days.","is_voucher_disabled":false,"order_items":[{"sku":"CA490JW07ZHK-56077","name":"Enticer Mtp-1302L-1Avdf Black Analog Watch","brand":"Casio","quantity":1,"price":2295,"image":"https:\/\/static.jabong.com\/p\/Casio-Enticer-Mtp-1302L-1Avdf-Black-Analog-Watch-4480-29071-1-new_cart.jpg","color":{"Black":"#333333"},"size":"FREE SIZE","delivery_time":"4-5 days","delivery_date":"Mon, 23rd Nov","applied_special_service_name":"","applied_special_service_code":"","item_available_special_delivery_service_codes":[],"item_available_special_delivery_options_msg":"","is_freebie":false,"is_pickup":false,"couponValue":0,"isGiftWrappable":true,"groupKey":"nonbundled"}],"order_total_block":{"subtotal":"2295.00","shipping_charges":"0.00","total":"2325.00","gift_wrap_charges":"30.00","special_shipping_service":{"special_shipping_service_text":"","special_shipping_service_value":"0.00"}},"payback_block":{"visible":false},"codCharges":{"removeGiftWrapCharges":0,"giftWrapStatus":1,"total":"2325.00","codcharge":"0.00","prepaidOfferCharge":"49","phone":"+917568589999"}}}</con:value></con:property><con:property><con:name>token_id</con:name><con:value>HS35NIL9P0Y4M0JD5FXQAFU0J</con:value></con:property><con:property><con:name>DB_Name</con:name><con:value>bob_Artemis</con:value></con:property><con:property><con:name>UserId</con:name><con:value/></con:property><con:property><con:name>user_id</con:name><con:value>11584369</con:value></con:property></con:properties><con:encryptedContent xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer><con:oAuth2Profile><con:name>JPS-Auth</con:name><con:type>OAuth 2.0</con:type><con:clientID>my-trusted-client-with-secret</con:clientID><con:resourceOwnerName>test</con:resourceOwnerName><con:resourceOwnerPassword>kangaroo</con:resourceOwnerPassword><con:clientSecret>jpLQ6PHbCYvrp6XBd4Fv</con:clientSecret><con:accessTokenURI>https://jps.jabong.com/oauth/token</con:accessTokenURI><con:accessToken>5ca02071-a590-4073-8a08-33404f87f9a6</con:accessToken><con:accessTokenPosition>HEADER</con:accessTokenPosition><con:oAuth2Flow>RESOURCE_OWNER_PASSWORD_CREDENTIALS</con:oAuth2Flow><con:refreshAccessTokenMethod>AUTOMATIC</con:refreshAccessTokenMethod><con:refreshToken>34719841-fdd7-40ee-b71e-7e0babf50e7d</con:refreshToken><con:scope>read trust write</con:scope><con:accessTokenStartingStatus>RETRIEVED_FROM_SERVER</con:accessTokenStartingStatus><con:accessTokenExpirationTime>98800</con:accessTokenExpirationTime><con:accessTokenIssuedTime>1424425988</con:accessTokenIssuedTime><con:manualAccessTokenExpirationTime>2</con:manualAccessTokenExpirationTime><con:useManualAccessTokenExpirationTime>true</con:useManualAccessTokenExpirationTime><con:manualAccessTokenExpirationTimeUnit>SECONDS</con:manualAccessTokenExpirationTimeUnit></con:oAuth2Profile><con:oAuth2Profile><con:name>JPS-Unauthorized</con:name><con:type>OAuth 2.0</con:type><con:accessToken>-9821-21370847082130#$@@</con:accessToken><con:accessTokenPosition>HEADER</con:accessTokenPosition><con:oAuth2Flow>AUTHORIZATION_CODE_GRANT</con:oAuth2Flow><con:refreshAccessTokenMethod>AUTOMATIC</con:refreshAccessTokenMethod><con:accessTokenStartingStatus>ENTERED_MANUALLY</con:accessTokenStartingStatus></con:oAuth2Profile></con:oAuth2ProfileContainer><con:reporting><con:reportTemplates><con:name>CDI-Functional-Test</con:name><con:reportType>PROJECT</con:reportType><con:reportLevel>MAINREPORT</con:reportLevel><con:data><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ProjectReport" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="30" bottomMargin="30" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="IncludeOverview" class="java.lang.Boolean">
      <property name="interactive" value="true"/>
      <property name="label" value="Include Project Overview"/>
      <parameterDescription>Includes Project Overview information in report</parameterDescription>
      <defaultValueExpression>true</defaultValueExpression>
   </parameter>
   <parameter name="IncludeResults" class="java.lang.Boolean">
      <property name="interactive" value="false"/>
      <property name="label" value="Include Latest Results"/>
      <property name="depends" value="ProjectTestSuiteResults"/>
      <parameterDescription>Includes Latest Test Results in report</parameterDescription>
      <defaultValueExpression>false</defaultValueExpression>
   </parameter>
   <parameter name="FlowLayout" class="java.lang.Boolean">
      <property name="interactive" value="false"/>
      <property name="label" value="Flow Layout"/>
      <parameterDescription>Choose flow layout for report</parameterDescription>
      <defaultValueExpression>false</defaultValueExpression>
   </parameter>
   <parameter name="ErrorDetails" class="java.lang.Boolean">
      <property name="interactive" value="true"/>
      <property name="label" value="Detailed Error Information"/>
      <property name="depends" value="ProjectFailedTestSteps"/>
      <parameterDescription>Adds details for failed test items to report</parameterDescription>
      <defaultValueExpression>true</defaultValueExpression>
   </parameter>
   <parameter name="IncludeCoverage" class="java.lang.Boolean">
      <property name="interactive" value="true"/>
      <property name="label" value="Include Project Coverage"/>
      <property name="depends" value="ProjectCoverage"/>
      <parameterDescription>Includes Project Coverage information in report</parameterDescription>
      <defaultValueExpression>true</defaultValueExpression>
   </parameter>
   <parameter name="HeaderLogo" class="java.lang.String" isForPrompting="false">
      <defaultValueExpression>"../../logos/header_logo.jpg"</defaultValueExpression>
   </parameter>
   <pageHeader>
      <band height="51">
         <printWhenExpression>$V{PAGE_NUMBER} == 1 || !$P{FlowLayout}</printWhenExpression>
         <image scaleImage="Clip" hAlign="Right" onErrorType="Blank">
            <reportElement x="0" y="0" width="535" height="51"/>
            <imageExpression class="java.lang.String">$P{HeaderLogo}</imageExpression>
         </image>
      </band>
   </pageHeader>
   <columnHeader>
      <band height="68">
         <printWhenExpression>$V{PAGE_NUMBER} == 1 || !$P{FlowLayout}</printWhenExpression>
         <staticText>
            <reportElement style="MainHeader" x="1" y="0" width="534" height="34"/>
            <textElement/>
            <text>Project Results for</text>
         </staticText>
         <textField isStretchWithOverflow="true">
            <reportElement style="MainHeader" x="0" y="34" width="535" height="34"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"${=project.name}"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="292">
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="1" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeOverview}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"Project"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:MetricsReport"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="32" width="536" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeOverview}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"Project"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:PropertiesReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" x="0" y="63" width="534" height="1">
               <printWhenExpression>$P{IncludeOverview} &amp;&amp; !$P{FlowLayout} &amp;&amp; $P{ProjectRequirements}.hasData()</printWhenExpression>
            </reportElement>
         </break>
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="65" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeOverview}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"TestSuite"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectRequirements}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:RequirementsReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" x="0" y="96" width="100" height="1">
               <printWhenExpression>$P{IncludeOverview} &amp;&amp; !$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="98" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeOverview}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"TestSuite"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectTestSuites}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:ModelItemListReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" x="0" y="129" width="100" height="1">
               <printWhenExpression>$P{IncludeOverview} &amp;&amp; !$P{FlowLayout} &amp;&amp; ($P{ProjectMockServices}.getRecordCount() > 0 )</printWhenExpression>
            </reportElement>
         </break>
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="131" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeOverview}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"MockService"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectMockServices}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:ModelItemListReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="164" width="100" height="1" isRemoveLineWhenBlank="true">
               <printWhenExpression>!$P{FlowLayout} &amp;&amp; $P{IncludeResults} &amp;&amp; $P{ProjectResultMetrics}.hasData()</printWhenExpression>
            </reportElement>
         </break>
         <subreport isUsingCache="true" runToBottom="false">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="1" y="161" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeResults}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="Type">
               <subreportParameterExpression>"Result"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectResultMetrics}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:MetricsReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="197" width="535" height="1" isRemoveLineWhenBlank="true">
               <printWhenExpression>!$P{FlowLayout} &amp;&amp; $P{IncludeResults} &amp;&amp; $P{ProjectTestSuiteResults}.hasData()</printWhenExpression>
            </reportElement>
         </break>
         <subreport isUsingCache="false" runToBottom="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="198" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeResults}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectTestSuiteResults}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:ProjectTestSuiteResultsOverviewReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="228" width="535" height="1" isRemoveLineWhenBlank="true">
               <printWhenExpression>!$P{FlowLayout} &amp;&amp; $P{IncludeResults} &amp;&amp; $P{ProjectTestSuiteResults}.hasData()</printWhenExpression>
            </reportElement>
         </break>
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="229" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeResults}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ErrorDetails">
               <subreportParameterExpression>$P{ErrorDetails}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectTestSuiteResults}.cloneDataSource()</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:ProjectTestSuiteResultsReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="259" width="535" height="1" isRemoveLineWhenBlank="true">
               <printWhenExpression>!$P{FlowLayout} &amp;&amp; $P{ProjectCoverage}.hasData()</printWhenExpression>
            </reportElement>
         </break>
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="1" y="260" width="535" height="30" isRemoveLineWhenBlank="true">
               <printWhenExpression>$P{IncludeCoverage}</printWhenExpression>
            </reportElement>
            <subreportParameter name="IncludeOverview">
               <subreportParameterExpression>$P{IncludeOverview}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ProjectCoverage">
               <subreportParameterExpression>$P{ProjectCoverage}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="IncludeResults">
               <subreportParameterExpression>$P{IncludeResults}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ErrorDetails">
               <subreportParameterExpression>$P{ErrorDetails}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:ProjectCoverageChart"</subreportExpression>
         </subreport>
      </band>
   </detail>
   <pageFooter>
      <band height="23">
         <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
         <textField>
            <reportElement x="0" y="0" width="535" height="20" forecolor="#999999"/>
            <textElement textAlignment="Center" verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">"created with soapUI Pro on " + new Date()</textFieldExpression>
         </textField>
      </band>
   </pageFooter>
   <lastPageFooter>
      <band height="23">
         <textField>
            <reportElement x="0" y="0" width="535" height="20" forecolor="#999999"/>
            <textElement textAlignment="Center" verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">"created with soapUI Pro on " + new Date()</textFieldExpression>
         </textField>
      </band>
   </lastPageFooter>
</jasperReport>]]></con:data><con:description>Project report for CDI functional tests</con:description><con:subreports>FailedTestStepsReport</con:subreports><con:subreports>MetricsReport</con:subreports><con:subreports>ProjectTestSuiteResultsOverviewReport</con:subreports><con:subreports>ProjectTestSuiteResultsReport</con:subreports><con:scope>PROJECT</con:scope></con:reportTemplates><con:reportTemplates>
  <con:name>FailedTestStepsReport-CDI-Functional-Tests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>FailedTestSteps</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FailedTestSteps" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="FlowLayout" class="java.lang.Boolean"/>
   <field name="testStepName" class="java.lang.String"/>
   <field name="messages" class="java.util.List"/>
   <field name="detail" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <detail>
      <band height="101">
         <break>
            <reportElement positionType="Float" x="0" y="1" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <textField isStretchWithOverflow="true">
            <reportElement style="Code" x="1" y="73" width="535" height="27"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{detail}</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true">
            <reportElement style="ColumnHeader" x="1" y="4" width="534" height="30" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">"Failed TestStep: " + $F{testStepName}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="0" y="34" width="535" height="28"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{messages}</textFieldExpression>
         </textField>
         <line>
            <reportElement x="1" y="67" width="534" height="3"/>
         </line>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>FailedTestSteps</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>MetricsReport-CDI-Functional-Tests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>MetricsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MetricsReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="Type" class="java.lang.String" isForPrompting="false">
      <property name="test" value="me"/>
   </parameter>
   <parameter name="Flow" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
      <parameterDescription>Creates a flow-based layout instead of a page-based layout</parameterDescription>
   </parameter>
   <parameter name="Show Details" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <parameter name="Comment" class="java.lang.String" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <field name="name" class="java.lang.String"/>
   <field name="value" class="java.lang.String"/>
   <field name="category" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <columnHeader>
      <band height="23">
         <textField>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="23"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$P{Type} + " Metrics"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="48">
         <textField isStretchWithOverflow="true">
            <reportElement x="253" y="31" width="282" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{value}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="ColumnHeader" isPrintRepeatedValues="false" x="0" y="0" width="535" height="24" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Bottom"/>
            <textFieldExpression class="java.lang.String">$F{category}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="20" y="31" width="233" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{name}</textFieldExpression>
         </textField>
         <image scaleImage="RealSize" isUsingCache="true" onErrorType="Blank">
            <reportElement x="0" y="29" width="16" height="16"/>
            <imageExpression class="java.lang.String">"logo:" + $F{icon}</imageExpression>
         </image>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ReportMetrics</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectTestSuiteResultsOverviewReport-CDI-Functional-Tests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>PROJECT</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectTestSuiteResultsOverviewReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="TestSuiteTestCaseResultsOverview" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FINISHED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333"/>
      </conditionalStyle>
   </style>
   <field name="startTime" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <field name="testSuiteName" class="java.lang.String"/>
   <field name="reason" class="java.lang.String"/>
   <field name="testRunnerResults" class="net.sf.jasperreports.engine.JRDataSource"/>
   <columnHeader>
      <band height="58">
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="38" width="162" height="20"/>
            <box leftPadding="0"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>TestSuite</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="175" y="38" width="51" height="20"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>Status</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="299" y="38" width="236" height="20"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>Reason</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="236" y="38" width="53" height="20"/>
            <textElement/>
            <text>Time Taken</text>
         </staticText>
         <staticText>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="34"/>
            <box>
               <pen lineWidth="1.0" lineColor="#000000"/>
               <topPen lineWidth="0.0" lineColor="#000000"/>
               <leftPen lineWidth="0.0" lineColor="#000000"/>
               <bottomPen lineWidth="0.0"/>
               <rightPen lineWidth="0.0" lineColor="#000000"/>
            </box>
            <textElement/>
            <text>TestSuite Results</text>
         </staticText>
      </band>
   </columnHeader>
   <detail>
      <band height="20">
         <textField hyperlinkType="Reference">
            <reportElement x="0" y="4" width="162" height="16"/>
            <box leftPadding="0"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">$F{testSuiteName}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" stretchType="RelativeToTallestObject" mode="Opaque" x="175" y="4" width="51" height="16"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="236" y="4" width="53" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{timeTaken}.concat( " ms" )</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true" isBlankWhenNull="true">
            <reportElement x="299" y="4" width="236" height="16"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">$F{reason}</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectTestSuiteResults</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectTestSuiteResultsReport-CDI-Functional-Tests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>PROJECT</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectTestSuiteResultsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ProjectTestSuiteResultsReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FINISHED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333" isBold="true"/>
      </conditionalStyle>
   </style>
   <parameter name="FlowLayout" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
      <property name="label" value="Flow Layout"/>
      <parameterDescription>Choose flow layout for report</parameterDescription>
      <defaultValueExpression>$P{FlowLayout}</defaultValueExpression>
   </parameter>
   <parameter name="ErrorDetails" class="java.lang.Boolean"/>
   <field name="startTime" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <field name="testSuiteName" class="java.lang.String"/>
   <field name="reason" class="java.lang.String"/>
   <field name="testRunnerResults" class="net.sf.jasperreports.engine.JRDataSource"/>
   <field name="testProperties" class="net.sf.jasperreports.engine.JRDataSource"/>
   <detail>
      <band height="197">
         <break>
            <reportElement x="0" y="1" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <textField>
            <reportElement style="SmallHeader" mode="Opaque" x="0" y="2" width="535" height="32" forecolor="#000000" backcolor="#FFFFFF"/>
            <box leftPadding="0"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{testSuiteName} + " Summary"</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" x="0" y="65" width="71" height="15"/>
            <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="81" y="66" width="119" height="18" backcolor="#FFFFFF"/>
            <box leftPadding="2"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{startTime}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="211" y="67" width="75" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{timeTaken}.concat( " ms" )</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true" isBlankWhenNull="true">
            <reportElement mode="Transparent" x="298" y="67" width="237" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{reason}</textFieldExpression>
         </textField>
         <subreport isUsingCache="false">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="114" width="535" height="40" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="testCaseName">
               <subreportParameterExpression>$F{testSuiteName}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testRunnerResults}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:TestCaseResultsOverviewReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement x="0" y="154" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <subreport isUsingCache="false">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="155" width="535" height="42" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ErrorDetails">
               <subreportParameterExpression>$P{ErrorDetails}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testRunnerResults}.cloneDataSource()</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:TestCaseResultsReport"</subreportExpression>
         </subreport>
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="40" width="71" height="20"/>
            <textElement/>
            <text>Status</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="81" y="40" width="119" height="20"/>
            <textElement/>
            <text>Start Time</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="211" y="40" width="75" height="20"/>
            <textElement/>
            <text>Time Taken</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="298" y="40" width="237" height="20"/>
            <textElement/>
            <text>Reason</text>
         </staticText>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="84" width="535" height="30" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="Type">
               <subreportParameterExpression>"TestSuite"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testProperties}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:PropertiesReport"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectTestSuiteResults</con:dataSource>
  </con:reportTemplates><con:reportTemplates>
  <con:name>TestStepResultsReport-CDI-Functional-Tests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestStepResultsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="TestStepResultsReport" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "OK" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333" isBold="true"/>
      </conditionalStyle>
   </style>
   <parameter name="testCaseName" class="java.lang.String" isForPrompting="false"/>
   <field name="started" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="order" class="java.lang.String"/>
   <field name="name" class="java.lang.String"/>
   <field name="message" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <columnHeader>
      <band height="57">
         <staticText>
            <reportElement style="ColumnHeader" x="134" y="37" width="401" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Message</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="37" width="56" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Status</text>
         </staticText>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="37"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestStep Results"</textFieldExpression>
         </textField>
         <staticText>
            <reportElement style="ColumnHeader" x="56" y="37" width="78" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Timestamp</text>
         </staticText>
      </band>
   </columnHeader>
   <detail>
      <band height="21" splitType="Prevent">
         <textField isStretchWithOverflow="true">
            <reportElement x="134" y="5" width="401" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{message}</textFieldExpression>
         </textField>
         <textField>
            <reportElement stretchType="RelativeToTallestObject" x="56" y="4" width="78" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{started}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" stretchType="RelativeToTallestObject" x="0" y="4" width="45" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows results of individual teststeps</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestStepResults</con:dataSource>
</con:reportTemplates><con:reportTemplates><con:name>IntegrationTestSuiteReport</con:name><con:reportType>PROJECT</con:reportType><con:reportLevel>MAINREPORT</con:reportLevel><con:data><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportTemplate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <!--FIELDS & PARAMS-->
   <title>
      <band height="70">
         <textField>
            <reportElement x="159" y="13" width="229" height="42"/>
            <textElement>
               <font size="26"/>
            </textElement>
            <textFieldExpression class="java.lang.String">$F{name} + " Report"</textFieldExpression>
         </textField>
      </band>
   </title>
   <pageHeader>
      <band/>
   </pageHeader>
   <detail>
      <band height="122">
         <!--SUBREPORTS UNDER HERE-->
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{FailedTestSteps}</dataSourceExpression>
            <subreportExpression>"subreport:FailedTestStepsReport-CDI-Functional-Tests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport-CDI-Functional-Tests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectTestSuiteResults}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectTestSuiteResultsOverviewReport-CDI-Functional-Tests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectTestSuiteResults}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectTestSuiteResultsReport-CDI-Functional-Tests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport-CDI-Functional-Tests"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data><con:subreports>FailedTestStepsReport-CDI-Functional-Tests</con:subreports><con:subreports>MetricsReport-CDI-Functional-Tests</con:subreports><con:subreports>ProjectTestSuiteResultsOverviewReport-CDI-Functional-Tests</con:subreports><con:subreports>ProjectTestSuiteResultsReport-CDI-Functional-Tests</con:subreports><con:subreports>TestStepResultsReport-CDI-Functional-Tests</con:subreports><con:scope>PROJECT</con:scope></con:reportTemplates><con:reportTemplates>
  <con:name>FailedTestStepsReport-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>FailedTestSteps</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FailedTestSteps" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="FlowLayout" class="java.lang.Boolean"/>
   <field name="testStepName" class="java.lang.String"/>
   <field name="messages" class="java.util.List"/>
   <field name="detail" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <detail>
      <band height="101">
         <break>
            <reportElement positionType="Float" x="0" y="1" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <textField isStretchWithOverflow="true">
            <reportElement style="Code" x="1" y="73" width="535" height="27"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{detail}</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true">
            <reportElement style="ColumnHeader" x="1" y="4" width="534" height="30" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">"Failed TestStep: " + $F{testStepName}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="0" y="34" width="535" height="28"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{messages}</textFieldExpression>
         </textField>
         <line>
            <reportElement x="1" y="67" width="534" height="3"/>
         </line>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>FailedTestSteps</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>MetricsReport-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>MetricsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MetricsReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="Type" class="java.lang.String" isForPrompting="false">
      <property name="test" value="me"/>
   </parameter>
   <parameter name="Flow" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
      <parameterDescription>Creates a flow-based layout instead of a page-based layout</parameterDescription>
   </parameter>
   <parameter name="Show Details" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <parameter name="Comment" class="java.lang.String" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <field name="name" class="java.lang.String"/>
   <field name="value" class="java.lang.String"/>
   <field name="category" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <columnHeader>
      <band height="23">
         <textField>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="23"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$P{Type} + " Metrics"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="48">
         <textField isStretchWithOverflow="true">
            <reportElement x="253" y="31" width="282" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{value}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="ColumnHeader" isPrintRepeatedValues="false" x="0" y="0" width="535" height="24" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Bottom"/>
            <textFieldExpression class="java.lang.String">$F{category}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="20" y="31" width="233" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{name}</textFieldExpression>
         </textField>
         <image scaleImage="RealSize" isUsingCache="true" onErrorType="Blank">
            <reportElement x="0" y="29" width="16" height="16"/>
            <imageExpression class="java.lang.String">"logo:" + $F{icon}</imageExpression>
         </image>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ReportMetrics</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectCoverageChart-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectCoverageChart</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <parameter name="ProjectCoverage" class="com.eviware.soapui.reporting.reports.support.ExportableJRBeanCollectionDataSource"/>
   <detail>
      <band height="50">
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="30" width="535" height="20" isRemoveLineWhenBlank="true"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:CoverageReport"</subreportExpression>
         </subreport>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="30"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"Project Coverage"</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows the project coverage chart</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectCoverage</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectTestSuiteResultsOverviewReport-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>PROJECT</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectTestSuiteResultsOverviewReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="TestSuiteTestCaseResultsOverview" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FINISHED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333"/>
      </conditionalStyle>
   </style>
   <field name="startTime" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <field name="testSuiteName" class="java.lang.String"/>
   <field name="reason" class="java.lang.String"/>
   <field name="testRunnerResults" class="net.sf.jasperreports.engine.JRDataSource"/>
   <columnHeader>
      <band height="58">
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="38" width="162" height="20"/>
            <box leftPadding="0"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>TestSuite</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="175" y="38" width="51" height="20"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>Status</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="299" y="38" width="236" height="20"/>
            <textElement>
               <font isUnderline="false"/>
            </textElement>
            <text>Reason</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="236" y="38" width="53" height="20"/>
            <textElement/>
            <text>Time Taken</text>
         </staticText>
         <staticText>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="34"/>
            <box>
               <pen lineWidth="1.0" lineColor="#000000"/>
               <topPen lineWidth="0.0" lineColor="#000000"/>
               <leftPen lineWidth="0.0" lineColor="#000000"/>
               <bottomPen lineWidth="0.0"/>
               <rightPen lineWidth="0.0" lineColor="#000000"/>
            </box>
            <textElement/>
            <text>TestSuite Results</text>
         </staticText>
      </band>
   </columnHeader>
   <detail>
      <band height="20">
         <textField hyperlinkType="Reference">
            <reportElement x="0" y="4" width="162" height="16"/>
            <box leftPadding="0"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">$F{testSuiteName}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" stretchType="RelativeToTallestObject" mode="Opaque" x="175" y="4" width="51" height="16"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="236" y="4" width="53" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{timeTaken}.concat( " ms" )</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true" isBlankWhenNull="true">
            <reportElement x="299" y="4" width="236" height="16"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">$F{reason}</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectTestSuiteResults</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectTestSuiteResultsReport-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>PROJECT</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectTestSuiteResultsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ProjectTestSuiteResultsReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FINISHED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333" isBold="true"/>
      </conditionalStyle>
   </style>
   <parameter name="FlowLayout" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
      <property name="label" value="Flow Layout"/>
      <parameterDescription>Choose flow layout for report</parameterDescription>
      <defaultValueExpression>$P{FlowLayout}</defaultValueExpression>
   </parameter>
   <parameter name="ErrorDetails" class="java.lang.Boolean"/>
   <field name="startTime" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <field name="testSuiteName" class="java.lang.String"/>
   <field name="reason" class="java.lang.String"/>
   <field name="testRunnerResults" class="net.sf.jasperreports.engine.JRDataSource"/>
   <field name="testProperties" class="net.sf.jasperreports.engine.JRDataSource"/>
   <detail>
      <band height="197">
         <break>
            <reportElement x="0" y="1" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <textField>
            <reportElement style="SmallHeader" mode="Opaque" x="0" y="2" width="535" height="32" forecolor="#000000" backcolor="#FFFFFF"/>
            <box leftPadding="0"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{testSuiteName} + " Summary"</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" x="0" y="65" width="71" height="15"/>
            <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="81" y="66" width="119" height="18" backcolor="#FFFFFF"/>
            <box leftPadding="2"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{startTime}</textFieldExpression>
         </textField>
         <textField>
            <reportElement mode="Transparent" x="211" y="67" width="75" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{timeTaken}.concat( " ms" )</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true" isBlankWhenNull="true">
            <reportElement mode="Transparent" x="298" y="67" width="237" height="14" backcolor="#FFFFFF"/>
            <textElement verticalAlignment="Top"/>
            <textFieldExpression class="java.lang.String">$F{reason}</textFieldExpression>
         </textField>
         <subreport isUsingCache="false">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="114" width="535" height="40" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="testCaseName">
               <subreportParameterExpression>$F{testSuiteName}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testRunnerResults}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:TestCaseResultsOverviewReport"</subreportExpression>
         </subreport>
         <break>
            <reportElement x="0" y="154" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <subreport isUsingCache="false">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="155" width="535" height="42" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="ErrorDetails">
               <subreportParameterExpression>$P{ErrorDetails}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testRunnerResults}.cloneDataSource()</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:TestCaseResultsReport"</subreportExpression>
         </subreport>
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="40" width="71" height="20"/>
            <textElement/>
            <text>Status</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="81" y="40" width="119" height="20"/>
            <textElement/>
            <text>Start Time</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="211" y="40" width="75" height="20"/>
            <textElement/>
            <text>Time Taken</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="298" y="40" width="237" height="20"/>
            <textElement/>
            <text>Reason</text>
         </staticText>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="84" width="535" height="30" isRemoveLineWhenBlank="true"/>
            <subreportParameter name="Type">
               <subreportParameterExpression>"TestSuite"</subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="FlowLayout">
               <subreportParameterExpression>$P{FlowLayout}</subreportParameterExpression>
            </subreportParameter>
            <dataSourceExpression>$F{testProperties}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:PropertiesReport"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectTestSuiteResults</con:dataSource>
  </con:reportTemplates><con:reportTemplates>
  <con:name>PropertiesReport-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>PropertiesReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PropertiesReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="20" bottomMargin="20" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="Type" class="java.lang.String"/>
   <field name="property" class="java.lang.String"/>
   <field name="value" class="java.lang.String"/>
   <field name="type" class="java.lang.String"/>
   <field name="description" class="java.lang.String"/>
   <columnHeader>
      <band height="48">
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="34" width="175" height="14"/>
            <textElement>
               <font isBold="true"/>
            </textElement>
            <text>Name</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="175" y="34" width="360" height="14" isPrintWhenDetailOverflows="true"/>
            <textElement>
               <font isBold="true"/>
            </textElement>
            <text>Value</text>
         </staticText>
         <textField>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="34"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$P{Type} + " Properties"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="22">
         <textField isStretchWithOverflow="true">
            <reportElement x="175" y="5" width="360" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{value}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="0" y="5" width="162" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{property}</textFieldExpression>
         </textField>
      </band>
   </detail>
   <noData>
      <band height="15">
         <staticText>
            <reportElement x="0" y="0" width="100" height="13"/>
            <textElement/>
            <text>Missing Properties</text>
         </staticText>
      </band>
   </noData>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestProperties</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>TestCaseCoverageChart-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestCaseCoverageChart</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <parameter name="TestCaseCoverage" class="com.eviware.soapui.reporting.reports.support.ExportableJRBeanCollectionDataSource"/>
   <detail>
      <band height="62">
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="30" width="535" height="30" isRemoveLineWhenBlank="true"/>
            <dataSourceExpression>$P{TestCaseCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:CoverageReport"</subreportExpression>
         </subreport>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="30"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestCase Coverage"</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows the TestCase coverage chart</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestCaseCoverage</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>TestStepResultsReport-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestStepResultsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="TestStepResultsReport" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "OK" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333" isBold="true"/>
      </conditionalStyle>
   </style>
   <parameter name="testCaseName" class="java.lang.String" isForPrompting="false"/>
   <field name="started" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="order" class="java.lang.String"/>
   <field name="name" class="java.lang.String"/>
   <field name="message" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <columnHeader>
      <band height="57">
         <staticText>
            <reportElement style="ColumnHeader" x="134" y="37" width="401" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Message</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="37" width="56" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Status</text>
         </staticText>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="37"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestStep Results"</textFieldExpression>
         </textField>
         <staticText>
            <reportElement style="ColumnHeader" x="56" y="37" width="78" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Timestamp</text>
         </staticText>
      </band>
   </columnHeader>
   <detail>
      <band height="21" splitType="Prevent">
         <textField isStretchWithOverflow="true">
            <reportElement x="134" y="5" width="401" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{message}</textFieldExpression>
         </textField>
         <textField>
            <reportElement stretchType="RelativeToTallestObject" x="56" y="4" width="78" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{started}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" stretchType="RelativeToTallestObject" x="0" y="4" width="45" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows results of individual teststeps</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestStepResults</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>TestSuiteCoverageChart-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestSuiteCoverageChart</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <parameter name="TestSuiteCoverage" class="com.eviware.soapui.reporting.reports.support.ExportableJRBeanCollectionDataSource"/>
   <detail>
      <band height="62">
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="30" width="535" height="30" isRemoveLineWhenBlank="true"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:CoverageReport"</subreportExpression>
         </subreport>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="30"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestSuite Coverage"</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows the TestSuite coverage chart</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestSuiteCoverage</con:dataSource>
</con:reportTemplates><con:reportTemplates><con:name>JPS-Report</con:name><con:reportType>PROJECT</con:reportType><con:reportLevel>MAINREPORT</con:reportLevel><con:data><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportTemplate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <!--FIELDS & PARAMS-->
   <title>
      <band height="70">
         <textField>
            <reportElement x="159" y="13" width="229" height="42"/>
            <textElement>
               <font size="26"/>
            </textElement>
            <textFieldExpression class="java.lang.String">$F{name} + " Report"</textFieldExpression>
         </textField>
      </band>
   </title>
   <pageHeader>
      <band/>
   </pageHeader>
   <detail>
      <band height="122">
         <!--SUBREPORTS UNDER HERE-->
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{FailedTestSteps}</dataSourceExpression>
            <subreportExpression>"subreport:FailedTestStepsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectTestSuiteResults}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectTestSuiteResultsOverviewReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectTestSuiteResults}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectTestSuiteResultsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression>"subreport:PropertiesReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestCaseCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestCaseCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestSuiteCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data><con:subreports>FailedTestStepsReport-JPS-IntegrationTests</con:subreports><con:subreports>MetricsReport-JPS-IntegrationTests</con:subreports><con:subreports>ProjectCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>ProjectTestSuiteResultsOverviewReport-JPS-IntegrationTests</con:subreports><con:subreports>ProjectTestSuiteResultsReport-JPS-IntegrationTests</con:subreports><con:subreports>PropertiesReport-JPS-IntegrationTests</con:subreports><con:subreports>TestCaseCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>TestStepResultsReport-JPS-IntegrationTests</con:subreports><con:subreports>TestSuiteCoverageChart-JPS-IntegrationTests</con:subreports><con:scope>PROJECT</con:scope></con:reportTemplates><con:reportTemplates><con:name>JPS-Reports</con:name><con:reportType>COMMON</con:reportType><con:reportLevel>MAINREPORT</con:reportLevel><con:data><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportTemplate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <!--FIELDS & PARAMS-->
   <title>
      <band height="70">
         <textField>
            <reportElement x="159" y="13" width="229" height="42"/>
            <textElement>
               <font size="26"/>
            </textElement>
            <textFieldExpression class="java.lang.String">$F{name} + " Report"</textFieldExpression>
         </textField>
      </band>
   </title>
   <pageHeader>
      <band/>
   </pageHeader>
   <detail>
      <band height="122">
         <!--SUBREPORTS UNDER HERE-->
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression>"subreport:PropertiesReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestCaseCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestCaseCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestSuiteCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{FailedTestSteps}</dataSourceExpression>
            <subreportExpression>"subreport:FailedTestStepsReport"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectCoverageChart"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression>"subreport:PropertiesReport"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestCaseCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestCaseCoverageChart"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestSuiteCoverageChart"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data><con:subreports>MetricsReport-JPS-IntegrationTests</con:subreports><con:subreports>ProjectCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>PropertiesReport-JPS-IntegrationTests</con:subreports><con:subreports>TestCaseCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>TestStepResultsReport-JPS-IntegrationTests</con:subreports><con:subreports>TestSuiteCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>FailedTestStepsReport</con:subreports><con:subreports>MetricsReport</con:subreports><con:subreports>ProjectCoverageChart</con:subreports><con:subreports>PropertiesReport</con:subreports><con:subreports>TestCaseCoverageChart</con:subreports><con:subreports>TestStepResultsReport</con:subreports><con:subreports>TestSuiteCoverageChart</con:subreports><con:scope>PROJECT</con:scope></con:reportTemplates><con:reportTemplates>
  <con:name>FailedTestStepsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>FailedTestSteps</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FailedTestSteps" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="FlowLayout" class="java.lang.Boolean"/>
   <field name="testStepName" class="java.lang.String"/>
   <field name="messages" class="java.util.List"/>
   <field name="detail" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <detail>
      <band height="101">
         <break>
            <reportElement positionType="Float" x="0" y="1" width="100" height="1">
               <printWhenExpression>!$P{FlowLayout}</printWhenExpression>
            </reportElement>
         </break>
         <textField isStretchWithOverflow="true">
            <reportElement style="Code" x="1" y="73" width="535" height="27"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{detail}</textFieldExpression>
         </textField>
         <textField isStretchWithOverflow="true">
            <reportElement style="ColumnHeader" x="1" y="4" width="534" height="30" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression class="java.lang.String">"Failed TestStep: " + $F{testStepName}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="0" y="34" width="535" height="28"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{messages}</textFieldExpression>
         </textField>
         <line>
            <reportElement x="1" y="67" width="534" height="3"/>
         </line>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>FailedTestSteps</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>MetricsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>MetricsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MetricsReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="Type" class="java.lang.String" isForPrompting="false">
      <property name="test" value="me"/>
   </parameter>
   <parameter name="Flow" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
      <parameterDescription>Creates a flow-based layout instead of a page-based layout</parameterDescription>
   </parameter>
   <parameter name="Show Details" class="java.lang.Boolean" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <parameter name="Comment" class="java.lang.String" isForPrompting="false">
      <property name="interactive" value="true"/>
   </parameter>
   <field name="name" class="java.lang.String"/>
   <field name="value" class="java.lang.String"/>
   <field name="category" class="java.lang.String"/>
   <field name="icon" class="java.lang.String"/>
   <columnHeader>
      <band height="23">
         <textField>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="23"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$P{Type} + " Metrics"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="48">
         <textField isStretchWithOverflow="true">
            <reportElement x="253" y="31" width="282" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{value}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="ColumnHeader" isPrintRepeatedValues="false" x="0" y="0" width="535" height="24" isRemoveLineWhenBlank="true"/>
            <box bottomPadding="0">
               <pen lineStyle="Double"/>
               <topPen lineStyle="Double"/>
               <leftPen lineStyle="Double"/>
               <bottomPen lineStyle="Double"/>
               <rightPen lineStyle="Double"/>
            </box>
            <textElement verticalAlignment="Bottom"/>
            <textFieldExpression class="java.lang.String">$F{category}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="20" y="31" width="233" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{name}</textFieldExpression>
         </textField>
         <image scaleImage="RealSize" isUsingCache="true" onErrorType="Blank">
            <reportElement x="0" y="29" width="16" height="16"/>
            <imageExpression class="java.lang.String">"logo:" + $F{icon}</imageExpression>
         </image>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ReportMetrics</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>ProjectCoverageChart-JPS-IntegrationTests-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>ProjectCoverageChart</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <parameter name="ProjectCoverage" class="com.eviware.soapui.reporting.reports.support.ExportableJRBeanCollectionDataSource"/>
   <detail>
      <band height="50">
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="30" width="535" height="20" isRemoveLineWhenBlank="true"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:CoverageReport"</subreportExpression>
         </subreport>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="30"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"Project Coverage"</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows the project coverage chart</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>ProjectCoverage</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>PropertiesReport-JPS-IntegrationTests-JPS-IntegrationTests</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>PropertiesReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PropertiesReport" language="groovy" pageWidth="535" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="20" bottomMargin="20" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <parameter name="Type" class="java.lang.String"/>
   <field name="property" class="java.lang.String"/>
   <field name="value" class="java.lang.String"/>
   <field name="type" class="java.lang.String"/>
   <field name="description" class="java.lang.String"/>
   <columnHeader>
      <band height="48">
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="34" width="175" height="14"/>
            <textElement>
               <font isBold="true"/>
            </textElement>
            <text>Name</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="175" y="34" width="360" height="14" isPrintWhenDetailOverflows="true"/>
            <textElement>
               <font isBold="true"/>
            </textElement>
            <text>Value</text>
         </staticText>
         <textField>
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="34"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$P{Type} + " Properties"</textFieldExpression>
         </textField>
      </band>
   </columnHeader>
   <detail>
      <band height="22">
         <textField isStretchWithOverflow="true">
            <reportElement x="175" y="5" width="360" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{value}</textFieldExpression>
         </textField>
         <textField>
            <reportElement x="0" y="5" width="162" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{property}</textFieldExpression>
         </textField>
      </band>
   </detail>
   <noData>
      <band height="15">
         <staticText>
            <reportElement x="0" y="0" width="100" height="13"/>
            <textElement/>
            <text>Missing Properties</text>
         </staticText>
      </band>
   </noData>
</jasperReport>]]></con:data>
  <con:description>NO DESC</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestProperties</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>TestStepResultsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:name>
  <con:reportType>COMMON</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestStepResultsReport</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="TestStepResultsReport" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <style name="statusStyle" isDefault="false">
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "UNKNOWN" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#FFFF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "OK" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" backcolor="#66FF00"/>
      </conditionalStyle>
      <conditionalStyle>
         <conditionExpression>Boolean.valueOf($F{status}.equals( "FAILED" ))</conditionExpression>
         <style isDefault="false" style="statusStyle" mode="Opaque" forecolor="#FFFF00" backcolor="#FF3333" isBold="true"/>
      </conditionalStyle>
   </style>
   <parameter name="testCaseName" class="java.lang.String" isForPrompting="false"/>
   <field name="started" class="java.lang.String"/>
   <field name="timeTaken" class="java.lang.String"/>
   <field name="order" class="java.lang.String"/>
   <field name="name" class="java.lang.String"/>
   <field name="message" class="java.lang.String"/>
   <field name="status" class="java.lang.String"/>
   <columnHeader>
      <band height="57">
         <staticText>
            <reportElement style="ColumnHeader" x="134" y="37" width="401" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Message</text>
         </staticText>
         <staticText>
            <reportElement style="ColumnHeader" x="0" y="37" width="56" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Status</text>
         </staticText>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="37"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestStep Results"</textFieldExpression>
         </textField>
         <staticText>
            <reportElement style="ColumnHeader" x="56" y="37" width="78" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <text>Timestamp</text>
         </staticText>
      </band>
   </columnHeader>
   <detail>
      <band height="21" splitType="Prevent">
         <textField isStretchWithOverflow="true">
            <reportElement x="134" y="5" width="401" height="14"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{message}</textFieldExpression>
         </textField>
         <textField>
            <reportElement stretchType="RelativeToTallestObject" x="56" y="4" width="78" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{started}</textFieldExpression>
         </textField>
         <textField>
            <reportElement style="statusStyle" stretchType="RelativeToTallestObject" x="0" y="4" width="45" height="15"/>
            <box topPadding="1" leftPadding="1"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">$F{status}</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows results of individual teststeps</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestStepResults</con:dataSource>
</con:reportTemplates><con:reportTemplates>
  <con:name>JPS-Project-Report</con:name>
  <con:path xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:reportType>PROJECT</con:reportType>
  <con:reportLevel>SUBREPORT</con:reportLevel>
  <con:nameInReport>TestSuiteCoverageChart</con:nameInReport>
  <con:data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" language="groovy" pageWidth="535" pageHeight="842" columnWidth="535" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <template>"../../styles.jrtx"</template>
   <parameter name="TestSuiteCoverage" class="com.eviware.soapui.reporting.reports.support.ExportableJRBeanCollectionDataSource"/>
   <detail>
      <band height="62">
         <subreport>
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="30" width="535" height="30" isRemoveLineWhenBlank="true"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression class="java.lang.String">"subreport:CoverageReport"</subreportExpression>
         </subreport>
         <textField isStretchWithOverflow="true">
            <reportElement style="SmallHeader" x="0" y="0" width="535" height="30"/>
            <textElement/>
            <textFieldExpression class="java.lang.String">"TestSuite Coverage"</textFieldExpression>
         </textField>
      </band>
   </detail>
</jasperReport>]]></con:data>
  <con:description>Shows the TestSuite coverage chart</con:description>
  <con:scope>PROJECT</con:scope>
  <con:dataSource>TestSuiteCoverage</con:dataSource>
</con:reportTemplates><con:reportTemplates><con:name>JPS-reports</con:name><con:reportType>PROJECT</con:reportType><con:reportLevel>MAINREPORT</con:reportLevel><con:data><![CDATA[<jasperReport xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportTemplate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="30" bottomMargin="30" xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <property name="ireport.encoding" value="UTF-8"/>
   <template>"../../styles.jrtx"</template>
   <!--FIELDS & PARAMS-->
   <title>
      <band height="70">
         <textField>
            <reportElement x="159" y="13" width="229" height="42"/>
            <textElement>
               <font size="26"/>
            </textElement>
            <textFieldExpression class="java.lang.String">$F{name} + " Report"</textFieldExpression>
         </textField>
      </band>
   </title>
   <pageHeader>
      <band/>
   </pageHeader>
   <detail>
      <band height="122">
         <!--SUBREPORTS UNDER HERE-->
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{FailedTestSteps}</dataSourceExpression>
            <subreportExpression>"subreport:FailedTestStepsReport-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectCoverageChart-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression>"subreport:PropertiesReport-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestSuiteCoverageChart-JPS-IntegrationTests-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{FailedTestSteps}</dataSourceExpression>
            <subreportExpression>"subreport:FailedTestStepsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ReportMetrics}</dataSourceExpression>
            <subreportExpression>"subreport:MetricsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{ProjectCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:ProjectCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestProperties}</dataSourceExpression>
            <subreportExpression>"subreport:PropertiesReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestCaseCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestCaseCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestStepResults}</dataSourceExpression>
            <subreportExpression>"subreport:TestStepResultsReport-JPS-IntegrationTests"</subreportExpression>
         </subreport>
         <subreport isUsingCache="true">
            <reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="500" height="30"/>
            <dataSourceExpression>$P{TestSuiteCoverage}</dataSourceExpression>
            <subreportExpression>"subreport:TestSuiteCoverageChart-JPS-IntegrationTests"</subreportExpression>
         </subreport>
      </band>
   </detail>
</jasperReport>]]></con:data><con:subreports>FailedTestStepsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>MetricsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>ProjectCoverageChart-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>PropertiesReport-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>TestStepResultsReport-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>TestSuiteCoverageChart-JPS-IntegrationTests-JPS-IntegrationTests</con:subreports><con:subreports>FailedTestStepsReport-JPS-IntegrationTests</con:subreports><con:subreports>MetricsReport-JPS-IntegrationTests</con:subreports><con:subreports>ProjectCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>PropertiesReport-JPS-IntegrationTests</con:subreports><con:subreports>TestCaseCoverageChart-JPS-IntegrationTests</con:subreports><con:subreports>TestStepResultsReport-JPS-IntegrationTests</con:subreports><con:subreports>TestSuiteCoverageChart-JPS-IntegrationTests</con:subreports><con:scope>PROJECT</con:scope></con:reportTemplates><con:xmlTemplates/><con:parameters><con:property><con:name>name </con:name><con:value>nayan</con:value></con:property></con:parameters></con:reporting><con:beforeRunScript>import groovy.lang.Binding;
import groovy.util.GroovyScriptEngine;
import java.sql.DriverManager;
import java.sql.Connection;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;

////////////////////// Functions /////////////////////////

def filterList(commaSperatedListContent){
	def list = commaSperatedListContent.split(",");
	def filteredList = [];
	list.each(){
	def entry = it.toLowerCase().replaceAll("^\\s+", "");
	entry = entry.trim();
	if(entry != ""){
	filteredList.add(entry);}	
	}
	return filteredList;
}

def customListCompare(list1,list2){
	//list1 is the list of tags that are given by user to execute.
	//list2 is the list of tags for specific test suite.
	boolean isRunnable = false;
	for(int l1 in 0 .. list1.size()-1)
	{
		def inputTag = list1.get(l1);		
		for(int l2 in 0 .. list2.size()-1){
			
			if(inputTag.toString() == list2.get(l2).toString()){
				isRunnable =  true;
				break;
			}
		}
		if(isRunnable){
			break;
		}
	}
	return isRunnable;
}
///////////////////// Function //////////////////////////////////////////////

log.info "Start execution";

def projDir = context.expand('${projectDir}')

def execution_Env = project.getPropertyValue("environment");

def execution_Tag = project.getPropertyValue("execution_tag");

log.info "Test Execution environment : " +execution_Env;
log.info "Test Execution Base Tag : "+ execution_Tag;

//Fetch the tags to execute the required test suites.
def filteredTags = filterList(execution_Tag) ;

def Conf_input = "";

log.info "Reading the Configuration file.....";

try{

Conf_input = new File(projDir + "/Configurations/" + project.getName() + "/JCart-TestData.xml");

def parser = new XmlParser(); //Get XML Parser.

def Configuration = parser.parse(Conf_input);//Point parser to configration file.

context.Configuration = Configuration;

}
catch(Exception e){
		assert false : "Error in reading configuration file -- " + e.getMessage();
}

def testSuiteListToExecute = [];

log.info "Fetching Test-Scenarios to execute....";

def testSuites = project.getTestSuiteList();

//Enable all TestSuites.
for(j in 0 .. testSuites.size()-1){
	//log.info testSuites.get(j).getName();
	testSuites.get(j).setDisabled(false); 
}
//Decide which test suites to execute and eventually disabled the non-relevant test suites.
		for(i in 0 .. testSuites.size()-1) {
   			def testSuiteName = testSuites.get(i).getName();
   			def tags = context.Configuration.TestSuite."${testSuiteName}".tags.text()
   			def testSuiteTags = filterList(tags);
   			   			
   			if(filteredTags == null || filteredTags.empty){
   				break;
   			}
   			else{
   				if(testSuiteTags == null || testSuiteTags.empty){
   					testSuites.get(i).setDisabled(true);
   				}
   				else{
   					def isRunnable = customListCompare(filteredTags,testSuiteTags);
   					log.info testSuiteName+":::"+isRunnable
   					if(!isRunnable){
   						testSuites.get(i).setDisabled(true);
   					}
   				}
   			}
   			
		}


try{
def MessagesPropFileName = context.Configuration.MessagesPropertyFileName.text();

// Load the Messages property file.

def props = new java.util.Properties();

props.load(new FileInputStream(projDir + "/" + MessagesPropFileName + ".properties"));

context.ErrorMessagesPropertyContainer = props;
}
catch(all){
	log.info "Couldn't load message property file, reason being -- " + all.getMessage();
}

// Load Databases.
log.info"Loading Databases........";

String db_Name = project.getPropertyValue("DB_Name").toString()
context.dbName = db_Name;
String dbConnectionString = "";
String dbDriver = "";
try{
	String databaseCollectionFile_Location = projDir + "/Configurations/" + project.getName() + "/DataBases.csv";
	BufferedReader reader = new BufferedReader(new FileReader(databaseCollectionFile_Location));
	String lineInFile = reader.readLine();
		while(lineInFile != null){
		String[] lineContents = lineInFile.split(",");
		if(lineContents[0] == context.dbName){
			dbDriver = lineContents[1];
			dbConnectionString = lineContents[2];
			break;
		}
		lineInFile = reader.readLine();
		}
}
catch(Exception e){
	log.info "Couldn't load database from 'Databases' repo.Please review the file again!!" + e.getMessage();
}
context.dbDriver = dbDriver
context.dbConnectionString = dbConnectionString
log.info "Connecting to : [" + context.dbName + "] ................";
log.info "DB Driver -- " + dbDriver;
log.info "DB Connection String --" + dbConnectionString;
try{
com.eviware.soapui.support.GroovyUtils.registerJdbcDriver(context.dbDriver )
context.dbConnection = DriverManager.getConnection(context.dbConnectionString);
context.statement = context.dbConnection.createStatement();
}
catch(Exception e){
	log.info "Couldn't connect to application DB -- " + e.getMessage();	
}

log.info "Loading utilities......";
//create an instance of generic utilities.
try{
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
String path = projDir + "/ext/";

GroovyScriptEngine gse = new GroovyScriptEngine(path) ;
externalScript = gse.loadScriptByName("Utilities.groovy")
instance = externalScript.newInstance()
context.utility = instance ; 
}
catch(Exception e){
	log.info "Unable to initialize framework utility, error being -- " + e.getMessage();
}

log.info"Preparing test data ..............";

context.Configuration.children().each{
	if(it.name() == "TestSuite"){
		it.children().each{
	String testSuiteNameInConf = it.name();
	
	it.children().each{
		if(it.name() != "tags"){			
			String testCaseNameInConf = it.name();
			
			it.children().each{
				try{
//					log.info testSuiteNameInConf+":::"+testCaseNameInConf+":::"+it.name()+":::"+it.text()
					project.getTestSuiteByName(testSuiteNameInConf).getTestCaseByName(testCaseNameInConf).setPropertyValue(it.name(), it.text());
					}
				catch(Exception e){ }
			}
		}
	}
}
}
}
</con:beforeRunScript><con:afterRunScript>import com.eviware.soapui.model.testsuite.TestSuiteRunner;
import com.eviware.soapui.model.testsuite.TestCaseRunner;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

def projDir = context.expand('${projectDir}')
// Get the Execution tag.
String executiontag = project.getPropertyValue("execution_tag");


//Start Time
def projectstartTime = new Date(runner.getStartTime());

//Time Taken
def pr_timeTaken = runner.getTimeTaken();

int testcasespassed = 0;
int testcasesfailed = 0;
int testcasesexecuted = 0;
List&lt;String> testCaseNameFailed = new ArrayList&lt;String>();
//Number Of test cases passed/failed/didn't run.
def List&lt;TestSuiteRunner> testSuiteRunners = runner.getResults()

for(TestSuiteRunner suiterunner in testSuiteRunners){
	String testSuiteName = suiterunner.getTestSuite().getName();
	
	List&lt;TestCaseRunner> testcaserunners = suiterunner.getResults();
	for(TestCaseRunner testcaserunner in testcaserunners){
		Status status = testcaserunner.getStatus();
		 String testcasename = testcaserunner.getTestCase().getName();
		
		if(status == Status.FINISHED){
			testcasespassed++;
		}
		if(status == Status.FAILED){
			testcasesfailed++;
			testCaseNameFailed.add(testcasename);
		}
		log.info status;
	}
}
testcasesexecuted = testcasespassed + testcasesfailed;
def percentPassed = (testcasespassed / testcasesexecuted) * 100;
percentPassed = Math.round(percentPassed * 100) / 100
String testCaseFailedInStringFormat = "";
for(String testCaseFailed in testCaseNameFailed){
	if(testCaseFailedInStringFormat == ""){
		testCaseFailedInStringFormat = testCaseFailed;
	}
	else{
	testCaseFailedInStringFormat = testCaseFailedInStringFormat + "," + testCaseFailed}
}

// create a property file.
try{
File propFile =new File(projDir + "/Configurations/" + project.getName() + "/" + project.getName() + ".properties");
boolean isCreated = propFile.createNewFile();
log.info isCreated;
Properties props = new Properties();
props.load(propFile.newDataInputStream());
props.setProperty("testgroup",executiontag);
props.setProperty("StartTime",projectstartTime.toString());
props.setProperty("timetaken",pr_timeTaken.toString());
props.setProperty("testexecuted",testcasesexecuted.toString());
props.setProperty("testcasespassed",testcasespassed.toString());
props.setProperty("testcasesfailed",testcasesfailed.toString());
props.setProperty("persentpassed",percentPassed.toString());
props.setProperty("testCaseFailedInStringFormat",testCaseFailedInStringFormat);
props.store(propFile.newWriter(), null)
}
catch(Exception e){
	log.info "Error in storing test execution data"  + e.getMessage();
}
</con:afterRunScript><con:sensitiveInformation/><con:authRepository/><con:loadUiTest name="LoadTest1" id="478a6072-ef22-49b2-9440-f51e07ad2140"><con:settings/><con1:loadui-project id="fc346a1c-a661-4d11-9d3b-9a07d13bc5e1" label="LoadTest1" xmlns:con1="http://eviware.com/loadui/config"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="CanvasItem.abortOnFinish" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="ModelItem.saveReport" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="ModelItem.reportFolder" type="java.lang.String"/><con1:property propagates="true" key="ModelItem.reportFormat" type="java.lang.String"/></con1:properties><con1:attributes><con1:property key="limits">Time=60;</con1:property></con1:attributes><con1:addons/><con1:scene label="DefaultLoadUITest" id="b526584d-2ac2-428c-af8a-144eb4c9b2ae" version="4"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="CanvasItem.abortOnFinish" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="SceneItem.followProject" type="java.lang.Boolean">true</con1:property></con1:properties><con1:attributes><con1:property key="limits">Time=60;</con1:property></con1:attributes><con1:addons/><con1:component type="com.eviware.loadui.groovy.GroovyComponent" label="Fixed Rate 1" id="9a5dc3e5-995e-40c3-8553-6cc4f7a79aa0" category="generators"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="_script" type="java.lang.String">// 
// Copyright 2014 SmartBear Software
// 
// Licensed under the EUPL, Version 1.1 or - as soon they will be approved by the European Commission - subsequent
// versions of the EUPL (the "Licence");
// You may not use this work except in compliance with the Licence.
// You may obtain a copy of the Licence at:
// 
// http://ec.europa.eu/idabc/eupl
// 
// Unless required by applicable law or agreed to in writing, software distributed under the Licence is
// distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
// express or implied. See the Licence for the specific language governing permissions and limitations
// under the Licence.
// 

/**
 * Sends an empty message periodically, at a set rate
 * 
 * @id com.eviware.FixedRate
 * @help http://www.loadui.org/Generators/fixed-rate-component.html
 * @name Fixed Rate
 * @category generators
 * @nonBlocking true
 */

import java.util.concurrent.TimeUnit

//Properties
rate = createProperty( 'rate', Long, 10 ) { schedule() }
unit = createProperty( 'unit', String, 'Sec' ) { schedule() }

onReplace( stateProperty ) { value ->
	if( value ) schedule()
	else future?.cancel( true )
}

burstSize = createProperty( 'burstSize', Long, 1 )

triggerBurst = { 
	burstSize.value.times {
		trigger() 
	} 
}

future = null
schedule = {
	if( stateProperty.value ) {
		long microsecondsPerUnit = unit.value == 'Sec' ? 1000000 : unit.value == 'Min' ? 60000000 : 3600000000
		long delay = Math.max( 1, (long)(microsecondsPerUnit / rate.value ?: 1) )
		future?.cancel( true )
		future = scheduleAtFixedRate( triggerBurst, delay, delay, TimeUnit.MICROSECONDS )
	}
}

onAction( "START" ) { schedule() }
onAction( "STOP" ) { future?.cancel( true ) }

//Layout
layout { 
	property( property:rate, label:'Rate', min:1 ) 
	separator( vertical:true )
	property( property:unit, label:'Unit', options:['Sec','Min','Hour'] )
	separator( vertical:true )
	box( widget:'display' ) {
		node( label:'Rate', content: { "$rate.value / $unit.value" }, constraints:'wmin 75' )
	}
}

//Compact Layout
compactLayout {
	box( widget:'display' ) {
		node( label:'Rate', content: { "$rate.value / $unit.value" } )
	}
}

//Settings
settings( label: "General" ) {
	property( property: burstSize, label: 'Burst size' ) 
}

if( running ) schedule()</con1:property><con1:property propagates="true" key="stateProperty" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="rate" type="java.lang.Long">1</con1:property><con1:property propagates="true" key="unit" type="java.lang.String">Sec</con1:property><con1:property propagates="true" key="burstSize" type="java.lang.Long">1</con1:property></con1:properties><con1:attributes><con1:property key="com.eviware.loadui.api.model.ComponentItem@type">Fixed Rate</con1:property><con1:property key="_digest">dfce327311dea993be475b6233bf0270</con1:property><con1:property key="_id">com.eviware.FixedRate</con1:property><con1:property key="_classLoader">com.eviware.FixedRate</con1:property></con1:attributes><con1:addons/></con1:component><con1:component type="com.eviware.loadui.components.soapui.SoapUISamplerComponent" label="Ready API TestCase Runner 1" id="3120e9a0-d3a9-4cea-bf42-b5bb33a1f656" category="Runners"><con1:properties><con1:property propagates="true" key="ModelItem.description" type="java.lang.String"/><con1:property propagates="true" key="concurrentSamples" type="java.lang.Long">1000</con1:property><con1:property propagates="true" key="property_name_is_not_relevant_for_private_property" type="java.lang.Long">9223372036854775807</con1:property><con1:property propagates="true" key="maxQueueSize" type="java.lang.Long">1000</con1:property><con1:property propagates="true" key="countDiscarded" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="disabledTestSteps" type="java.lang.String"/><con1:property propagates="true" key="_thinkTime" type="java.lang.Long">0</con1:property><con1:property propagates="true" key="ReadyApiTestCase" type="com.eviware.soapui.impl.wsdl.testcase.WsdlTestCase">ac23e3aa-63a6-4412-b425-cbe64528f661</con1:property><con1:property propagates="true" key="raiseError" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="outputTestCaseProperties" type="java.lang.Boolean">true</con1:property><con1:property propagates="true" key="OutputLevel" type="java.lang.String">TestCase only</con1:property><con1:property propagates="true" key="closeConnectionsAfterRequest" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="disableSoapuiAssertions" type="java.lang.Boolean">false</con1:property><con1:property propagates="true" key="forceShareDatasources" type="java.lang.Boolean">true</con1:property></con1:properties><con1:attributes><con1:property key="com.eviware.loadui.api.model.ComponentItem@type">Ready API TestCase Runner</con1:property></con1:attributes><con1:addons/></con1:component><con1:connection outputTerminalId="9a5dc3e5-995e-40c3-8553-6cc4f7a79aa0/triggerTerminal" inputTerminalId="3120e9a0-d3a9-4cea-bf42-b5bb33a1f656/triggerTerminal"/></con1:scene><con1:statistics><con1:page title="DefaultLoadUIStatisticPage"/></con1:statistics></con1:loadui-project></con:loadUiTest></con:soapui-project>